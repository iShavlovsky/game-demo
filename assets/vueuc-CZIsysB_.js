import{B as Ze,F as We,C as Qe,d as W,I as ke,q as Oe,r as C,p as oe,i as ie,M as Le,J as T,X as Re,c as j,j as D,v as R,w as Z,n as Ve,a1 as He,L as et,z as tt,A as nt}from"./@vue-O2P8gYLh.js";import{a as Q,o as he}from"./evtd-CI_DDEu_.js";import{b as Xe,d as ge,D as G,j as rt,a as ot}from"./seemly-CXtgmfu1.js";import{u as le}from"./@css-render-PnKfIcPa.js";import{d as it,u as P,o as lt,i as st}from"./vooks-CqJ53JUq.js";import{z as ut}from"./vdirs-DRH9Xvnd.js";import{R as at}from"./@juggle-C8OzoCMD.js";import{m as ft}from"./@emotion-WldOFDRm.js";function pe(n,e,t="default"){const r=e[t];if(r===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);return r()}function me(n,e=!0,t=[]){return n.forEach(r=>{if(r!==null){if(typeof r!="object"){(typeof r=="string"||typeof r=="number")&&t.push(Ze(String(r)));return}if(Array.isArray(r)){me(r,e,t);return}if(r.type===We){if(r.children===null)return;Array.isArray(r.children)&&me(r.children,e,t)}else r.type!==Qe&&t.push(r)}}),t}function we(n,e,t="default"){const r=e[t];if(r===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);const o=me(r());if(o.length===1)return o[0];throw new Error(`[vueuc/${n}]: slot[${t}] should have exactly one child.`)}let L=null;function Ye(){if(L===null&&(L=document.getElementById("v-binder-view-measurer"),L===null)){L=document.createElement("div"),L.id="v-binder-view-measurer";const{style:n}=L;n.position="fixed",n.left="0",n.right="0",n.top="0",n.bottom="0",n.pointerEvents="none",n.visibility="hidden",document.body.appendChild(L)}return L.getBoundingClientRect()}function dt(n,e){const t=Ye();return{top:e,left:n,height:0,width:0,right:t.width-n,bottom:t.height-e}}function fe(n){const e=n.getBoundingClientRect(),t=Ye();return{left:e.left-t.left,top:e.top-t.top,bottom:t.height+t.top-e.bottom,right:t.width+t.left-e.right,width:e.width,height:e.height}}function ct(n){return n.nodeType===9?null:n.parentNode}function je(n){if(n===null)return null;const e=ct(n);if(e===null)return null;if(e.nodeType===9)return document;if(e.nodeType===1){const{overflow:t,overflowX:r,overflowY:o}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(t+o+r))return e}return je(e)}const Rt=W({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(n){var e;ke("VBinder",(e=Oe())===null||e===void 0?void 0:e.proxy);const t=ie("VBinder",null),r=C(null),o=s=>{r.value=s,t&&n.syncTargetWithParent&&t.setTargetRef(s)};let i=[];const a=()=>{let s=r.value;for(;s=je(s),s!==null;)i.push(s);for(const y of i)he("scroll",y,b,!0)},h=()=>{for(const s of i)Q("scroll",s,b,!0);i=[]},l=new Set,u=s=>{l.size===0&&a(),l.has(s)||l.add(s)},p=s=>{l.has(s)&&l.delete(s),l.size===0&&h()},b=()=>{Xe(d)},d=()=>{l.forEach(s=>s())},m=new Set,g=s=>{m.size===0&&he("resize",window,c),m.has(s)||m.add(s)},w=s=>{m.has(s)&&m.delete(s),m.size===0&&Q("resize",window,c)},c=()=>{m.forEach(s=>s())};return oe(()=>{Q("resize",window,c),h()}),{targetRef:r,setTargetRef:o,addScrollListener:u,removeScrollListener:p,addResizeListener:g,removeResizeListener:w}},render(){return pe("binder",this.$slots)}}),en=W({name:"Target",setup(){const{setTargetRef:n,syncTarget:e}=ie("VBinder");return{syncTarget:e,setTargetDirective:{mounted:n,updated:n}}},render(){const{syncTarget:n,setTargetDirective:e}=this;return n?Le(we("follower",this.$slots),[[e]]):we("follower",this.$slots)}});function ye(n,e){console.error(`[vueuc/${n}]: ${e}`)}function ht(n){let e=0;for(let t=0;t<n.length;++t)n[t]==="&"&&++e;return e}const De=/\s*,(?![^(]*\))\s*/g,pt=/\s+/g;function mt(n,e){const t=[];return e.split(De).forEach(r=>{let o=ht(r);if(o){if(o===1){n.forEach(a=>{t.push(r.replace("&",a))});return}}else{n.forEach(a=>{t.push((a&&a+" ")+r)});return}let i=[r];for(;o--;){const a=[];i.forEach(h=>{n.forEach(l=>{a.push(h.replace("&",l))})}),i=a}i.forEach(a=>t.push(a))}),t}function vt(n,e){const t=[];return e.split(De).forEach(r=>{n.forEach(o=>{t.push((o&&o+" ")+r)})}),t}function bt(n){let e=[""];return n.forEach(t=>{t=t&&t.trim(),t&&(t.includes("&")?e=mt(e,t):e=vt(e,t))}),e.join(", ").replace(pt," ")}function xe(n){if(!n)return;const e=n.parentElement;e&&e.removeChild(n)}function be(n,e){return(e??document.head).querySelector(`style[cssr-id="${n}"]`)}function gt(n){const e=document.createElement("style");return e.setAttribute("cssr-id",n),e}function ee(n){return n?/^\s*@(s|m)/.test(n):!1}const wt=/[A-Z]/g;function Ne(n){return n.replace(wt,e=>"-"+e.toLowerCase())}function yt(n,e="  "){return typeof n=="object"&&n!==null?` {
`+Object.entries(n).map(t=>e+`  ${Ne(t[0])}: ${t[1]};`).join(`
`)+`
`+e+"}":`: ${n};`}function xt(n,e,t){return typeof n=="function"?n({context:e.context,props:t}):n}function $e(n,e,t,r){if(!e)return"";const o=xt(e,t,r);if(!o)return"";if(typeof o=="string")return`${n} {
${o}
}`;const i=Object.keys(o);if(i.length===0)return t.config.keepEmptyBlock?n+` {
}`:"";const a=n?[n+" {"]:[];return i.forEach(h=>{const l=o[h];if(h==="raw"){a.push(`
`+l+`
`);return}h=Ne(h),l!=null&&a.push(`  ${h}${yt(l)}`)}),n&&a.push("}"),a.join(`
`)}function ve(n,e,t){n&&n.forEach(r=>{if(Array.isArray(r))ve(r,e,t);else if(typeof r=="function"){const o=r(e);Array.isArray(o)?ve(o,e,t):o&&t(o)}else r&&t(r)})}function _e(n,e,t,r,o){const i=n.$;let a="";if(!i||typeof i=="string")ee(i)?a=i:e.push(i);else if(typeof i=="function"){const u=i({context:r.context,props:o});ee(u)?a=u:e.push(u)}else if(i.before&&i.before(r.context),!i.$||typeof i.$=="string")ee(i.$)?a=i.$:e.push(i.$);else if(i.$){const u=i.$({context:r.context,props:o});ee(u)?a=u:e.push(u)}const h=bt(e),l=$e(h,n.props,r,o);a?t.push(`${a} {`):l.length&&t.push(l),n.children&&ve(n.children,{context:r.context,props:o},u=>{if(typeof u=="string"){const p=$e(h,{raw:u},r,o);t.push(p)}else _e(u,e,t,r,o)}),e.pop(),a&&t.push("}"),i&&i.after&&i.after(r.context)}function $t(n,e,t){const r=[];return _e(n,[],r,e,t),r.join(`

`)}typeof window<"u"&&(window.__cssrContext={});function Mt(n,e,t,r){const{els:o}=e;if(t===void 0)o.forEach(xe),e.els=[];else{const i=be(t,r);i&&o.includes(i)&&(xe(i),e.els=o.filter(a=>a!==i))}}function Me(n,e){n.push(e)}function St(n,e,t,r,o,i,a,h,l){let u;if(t===void 0&&(u=e.render(r),t=ft(u)),l){l.adapter(t,u??e.render(r));return}h===void 0&&(h=document.head);const p=be(t,h);if(p!==null&&!i)return p;const b=p??gt(t);if(u===void 0&&(u=e.render(r)),b.textContent=u,p!==null)return p;if(a){const d=h.querySelector(`meta[name="${a}"]`);if(d)return h.insertBefore(b,d),Me(e.els,b),b}return o?h.insertBefore(b,h.querySelector("style, link")):h.appendChild(b),Me(e.els,b),b}function Et(n){return $t(this,this.instance,n)}function Tt(n={}){const{id:e,ssr:t,props:r,head:o=!1,force:i=!1,anchorMetaName:a,parent:h}=n;return St(this.instance,this,e,r,o,i,a,h,t)}function zt(n={}){const{id:e,parent:t}=n;Mt(this.instance,this,e,t)}const te=function(n,e,t,r){return{instance:n,$:e,props:t,children:r,els:[],render:Et,mount:Tt,unmount:zt}},At=function(n,e,t,r){return Array.isArray(e)?te(n,{$:null},null,e):Array.isArray(t)?te(n,e,null,t):Array.isArray(r)?te(n,e,t,r):te(n,e,t,null)};function It(n={}){const e={c:(...t)=>At(e,...t),use:(t,...r)=>t.install(e,...r),find:be,context:{},config:n};return e}const{c:B}=It(),se="vueuc-style";function Se(n){return n&-n}class qe{constructor(e,t){this.l=e,this.min=t;const r=new Array(e+1);for(let o=0;o<e+1;++o)r[o]=0;this.ft=r}add(e,t){if(t===0)return;const{l:r,ft:o}=this;for(e+=1;e<=r;)o[e]+=t,e+=Se(e)}get(e){return this.sum(e+1)-this.sum(e)}sum(e){if(e===void 0&&(e=this.l),e<=0)return 0;const{ft:t,min:r,l:o}=this;if(e>o)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let i=e*r;for(;e>0;)i+=t[e],e-=Se(e);return i}getBound(e){let t=0,r=this.l;for(;r>t;){const o=Math.floor((t+r)/2),i=this.sum(o);if(i>e){r=o;continue}else if(i<e){if(t===o)return this.sum(t+1)<=e?t+1:o;t=o}else return o}return t}}function Ee(n){return typeof n=="string"?document.querySelector(n):n()}const Ct=W({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(n){return{showTeleport:it(D(n,"show")),mergedTo:j(()=>{const{to:e}=n;return e??"body"})}},render(){return this.showTeleport?this.disabled?pe("lazy-teleport",this.$slots):T(Re,{disabled:this.disabled,to:this.mergedTo},pe("lazy-teleport",this.$slots)):null}}),ne={top:"bottom",bottom:"top",left:"right",right:"left"},Te={start:"end",center:"center",end:"start"},de={top:"height",bottom:"height",left:"width",right:"width"},Ft={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},Bt={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},Wt={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},ze={top:!0,bottom:!1,left:!0,right:!1},Ae={top:"end",bottom:"start",left:"end",right:"start"};function kt(n,e,t,r,o,i){if(!o||i)return{placement:n,top:0,left:0};const[a,h]=n.split("-");let l=h??"center",u={top:0,left:0};const p=(m,g,w)=>{let c=0,s=0;const y=t[m]-e[g]-e[m];return y>0&&r&&(w?s=ze[g]?y:-y:c=ze[g]?y:-y),{left:c,top:s}},b=a==="left"||a==="right";if(l!=="center"){const m=Wt[n],g=ne[m],w=de[m];if(t[w]>e[w]){if(e[m]+e[w]<t[w]){const c=(t[w]-e[w])/2;e[m]<c||e[g]<c?e[m]<e[g]?(l=Te[h],u=p(w,g,b)):u=p(w,m,b):l="center"}}else t[w]<e[w]&&e[g]<0&&e[m]>e[g]&&(l=Te[h])}else{const m=a==="bottom"||a==="top"?"left":"top",g=ne[m],w=de[m],c=(t[w]-e[w])/2;(e[m]<c||e[g]<c)&&(e[m]>e[g]?(l=Ae[m],u=p(w,m,b)):(l=Ae[g],u=p(w,g,b)))}let d=a;return e[a]<t[de[a]]&&e[a]<e[ne[a]]&&(d=ne[a]),{placement:l!=="center"?`${d}-${l}`:d,left:u.left,top:u.top}}function Ot(n,e){return e?Bt[n]:Ft[n]}function Lt(n,e,t,r,o,i){if(i)switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"top-end":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"left-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:""};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:""};case"right-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width/2+o)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width/2+o)}px`,transform:"translateX(-50%)"}}}const Vt=B([B(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),B(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[B("> *",{pointerEvents:"all"})])]),tn=W({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const e=ie("VBinder"),t=P(()=>n.enabled!==void 0?n.enabled:n.show),r=C(null),o=C(null),i=()=>{const{syncTrigger:d}=n;d.includes("scroll")&&e.addScrollListener(l),d.includes("resize")&&e.addResizeListener(l)},a=()=>{e.removeScrollListener(l),e.removeResizeListener(l)};R(()=>{t.value&&(l(),i())});const h=le();Vt.mount({id:"vueuc/binder",head:!0,anchorMetaName:se,ssr:h}),oe(()=>{a()}),lt(()=>{t.value&&l()});const l=()=>{if(!t.value)return;const d=r.value;if(d===null)return;const m=e.targetRef,{x:g,y:w,overlap:c}=n,s=g!==void 0&&w!==void 0?dt(g,w):fe(m);d.style.setProperty("--v-target-width",`${Math.round(s.width)}px`),d.style.setProperty("--v-target-height",`${Math.round(s.height)}px`);const{width:y,minWidth:$,placement:A,internalShift:N,flip:V}=n;d.setAttribute("v-placement",A),c?d.setAttribute("v-overlap",""):d.removeAttribute("v-overlap");const{style:E}=d;y==="target"?E.width=`${s.width}px`:y!==void 0?E.width=y:E.width="",$==="target"?E.minWidth=`${s.width}px`:$!==void 0?E.minWidth=$:E.minWidth="";const H=fe(d),_=fe(o.value),{left:X,top:q,placement:U}=kt(A,s,H,N,V,c),f=Ot(U,c),{left:v,top:x,transform:M}=Lt(U,_,s,q,X,c);d.setAttribute("v-placement",U),d.style.setProperty("--v-offset-left",`${Math.round(X)}px`),d.style.setProperty("--v-offset-top",`${Math.round(q)}px`),d.style.transform=`translateX(${v}) translateY(${x}) ${M}`,d.style.setProperty("--v-transform-origin",f),d.style.transformOrigin=f};Z(t,d=>{d?(i(),u()):a()});const u=()=>{Ve().then(l).catch(d=>console.error(d))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(d=>{Z(D(n,d),l)}),["teleportDisabled"].forEach(d=>{Z(D(n,d),u)}),Z(D(n,"syncTrigger"),d=>{d.includes("resize")?e.addResizeListener(l):e.removeResizeListener(l),d.includes("scroll")?e.addScrollListener(l):e.removeScrollListener(l)});const p=st(),b=P(()=>{const{to:d}=n;if(d!==void 0)return d;p.value});return{VBinder:e,mergedEnabled:t,offsetContainerRef:o,followerRef:r,mergedTo:b,syncPosition:l}},render(){return T(Ct,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var n,e;const t=T("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[T("div",{class:"v-binder-follower-content",ref:"followerRef"},(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n))]);return this.zindexable?Le(t,[[ut,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):t}})}});class Ht{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new(typeof window<"u"&&window.ResizeObserver||at)(this.handleResize),this.elHandlersMap=new Map}handleResize(e){for(const t of e){const r=this.elHandlersMap.get(t.target);r!==void 0&&r(t)}}registerHandler(e,t){this.elHandlersMap.set(e,t),this.observer.observe(e)}unregisterHandler(e){this.elHandlersMap.has(e)&&(this.elHandlersMap.delete(e),this.observer.unobserve(e))}}const Ie=new Ht,Ce=W({name:"ResizeObserver",props:{onResize:Function},setup(n){let e=!1;const t=Oe().proxy;function r(o){const{onResize:i}=n;i!==void 0&&i(o)}R(()=>{const o=t.$el;if(o===void 0){ye("resize-observer","$el does not exist.");return}if(o.nextElementSibling!==o.nextSibling&&o.nodeType===3&&o.nodeValue!==""){ye("resize-observer","$el can not be observed (it may be a text node).");return}o.nextElementSibling!==null&&(Ie.registerHandler(o.nextElementSibling,r),e=!0)}),oe(()=>{e&&Ie.unregisterHandler(t.$el.nextElementSibling)})},render(){return He(this.$slots,"default")}});let re;function Xt(){return typeof document>"u"?!1:(re===void 0&&("matchMedia"in window?re=window.matchMedia("(pointer:coarse)").matches:re=!1),re)}let ce;function Fe(){return typeof document>"u"?1:(ce===void 0&&(ce="chrome"in window?window.devicePixelRatio:1),ce)}const Ue="VVirtualListXScroll";function Yt({columnsRef:n,renderColRef:e,renderItemWithColsRef:t}){const r=C(0),o=C(0),i=j(()=>{const u=n.value;if(u.length===0)return null;const p=new qe(u.length,0);return u.forEach((b,d)=>{p.add(d,b.width)}),p}),a=P(()=>{const u=i.value;return u!==null?Math.max(u.getBound(o.value)-1,0):0}),h=u=>{const p=i.value;return p!==null?p.sum(u):0},l=P(()=>{const u=i.value;return u!==null?Math.min(u.getBound(o.value+r.value)+1,n.value.length-1):0});return ke(Ue,{startIndexRef:a,endIndexRef:l,columnsRef:n,renderColRef:e,renderItemWithColsRef:t,getLeft:h}),{listWidthRef:r,scrollLeftRef:o}}const Be=W({name:"VirtualListRow",props:{index:{type:Number,required:!0},item:{type:Object,required:!0}},setup(){const{startIndexRef:n,endIndexRef:e,columnsRef:t,getLeft:r,renderColRef:o,renderItemWithColsRef:i}=ie(Ue);return{startIndex:n,endIndex:e,columns:t,renderCol:o,renderItemWithCols:i,getLeft:r}},render(){const{startIndex:n,endIndex:e,columns:t,renderCol:r,renderItemWithCols:o,getLeft:i,item:a}=this;if(o!=null)return o({itemIndex:this.index,startColIndex:n,endColIndex:e,allColumns:t,item:a,getLeft:i});if(r!=null){const h=[];for(let l=n;l<=e;++l){const u=t[l];h.push(r({column:u,left:i(l),item:a}))}return h}return null}}),jt=B(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[B("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[B("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),nn=W({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},columns:{type:Array,default:()=>[]},renderCol:Function,renderItemWithCols:Function,items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(n){const e=le();jt.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:se,ssr:e}),R(()=>{const{defaultScrollIndex:f,defaultScrollKey:v}=n;f!=null?c({index:f}):v!=null&&c({key:v})});let t=!1,r=!1;tt(()=>{if(t=!1,!r){r=!0;return}c({top:m.value,left:a.value})}),nt(()=>{t=!0,r||(r=!0)});const o=P(()=>{if(n.renderCol==null&&n.renderItemWithCols==null||n.columns.length===0)return;let f=0;return n.columns.forEach(v=>{f+=v.width}),f}),i=j(()=>{const f=new Map,{keyField:v}=n;return n.items.forEach((x,M)=>{f.set(x[v],M)}),f}),{scrollLeftRef:a,listWidthRef:h}=Yt({columnsRef:D(n,"columns"),renderColRef:D(n,"renderCol"),renderItemWithColsRef:D(n,"renderItemWithCols")}),l=C(null),u=C(void 0),p=new Map,b=j(()=>{const{items:f,itemSize:v,keyField:x}=n,M=new qe(f.length,v);return f.forEach((z,I)=>{const S=z[x],F=p.get(S);F!==void 0&&M.add(I,F)}),M}),d=C(0),m=C(0),g=P(()=>Math.max(b.value.getBound(m.value-ge(n.paddingTop))-1,0)),w=j(()=>{const{value:f}=u;if(f===void 0)return[];const{items:v,itemSize:x}=n,M=g.value,z=Math.min(M+Math.ceil(f/x+1),v.length-1),I=[];for(let S=M;S<=z;++S)I.push(v[S]);return I}),c=(f,v)=>{if(typeof f=="number"){A(f,v,"auto");return}const{left:x,top:M,index:z,key:I,position:S,behavior:F,debounce:O=!0}=f;if(x!==void 0||M!==void 0)A(x,M,F);else if(z!==void 0)$(z,F,O);else if(I!==void 0){const ue=i.value.get(I);ue!==void 0&&$(ue,F,O)}else S==="bottom"?A(0,Number.MAX_SAFE_INTEGER,F):S==="top"&&A(0,0,F)};let s,y=null;function $(f,v,x){const{value:M}=b,z=M.sum(f)+ge(n.paddingTop);if(!x)l.value.scrollTo({left:0,top:z,behavior:v});else{s=f,y!==null&&window.clearTimeout(y),y=window.setTimeout(()=>{s=void 0,y=null},16);const{scrollTop:I,offsetHeight:S}=l.value;if(z>I){const F=M.get(f);z+F<=I+S||l.value.scrollTo({left:0,top:z+F-S,behavior:v})}else l.value.scrollTo({left:0,top:z,behavior:v})}}function A(f,v,x){l.value.scrollTo({left:f,top:v,behavior:x})}function N(f,v){var x,M,z;if(t||n.ignoreItemResize||U(v.target))return;const{value:I}=b,S=i.value.get(f),F=I.get(S),O=(z=(M=(x=v.borderBoxSize)===null||x===void 0?void 0:x[0])===null||M===void 0?void 0:M.blockSize)!==null&&z!==void 0?z:v.contentRect.height;if(O===F)return;O-n.itemSize===0?p.delete(f):p.set(f,O-n.itemSize);const K=O-F;if(K===0)return;I.add(S,K);const Y=l.value;if(Y!=null){if(s===void 0){const ae=I.sum(S);Y.scrollTop>ae&&Y.scrollBy(0,K)}else if(S<s)Y.scrollBy(0,K);else if(S===s){const ae=I.sum(S);O+ae>Y.scrollTop+Y.offsetHeight&&Y.scrollBy(0,K)}q()}d.value++}const V=!Xt();let E=!1;function H(f){var v;(v=n.onScroll)===null||v===void 0||v.call(n,f),(!V||!E)&&q()}function _(f){var v;if((v=n.onWheel)===null||v===void 0||v.call(n,f),V){const x=l.value;if(x!=null){if(f.deltaX===0&&(x.scrollTop===0&&f.deltaY<=0||x.scrollTop+x.offsetHeight>=x.scrollHeight&&f.deltaY>=0))return;f.preventDefault(),x.scrollTop+=f.deltaY/Fe(),x.scrollLeft+=f.deltaX/Fe(),q(),E=!0,Xe(()=>{E=!1})}}}function X(f){if(t||U(f.target))return;if(n.renderCol==null&&n.renderItemWithCols==null){if(f.contentRect.height===u.value)return}else if(f.contentRect.height===u.value&&f.contentRect.width===h.value)return;u.value=f.contentRect.height,h.value=f.contentRect.width;const{onResize:v}=n;v!==void 0&&v(f)}function q(){const{value:f}=l;f!=null&&(m.value=f.scrollTop,a.value=f.scrollLeft)}function U(f){let v=f;for(;v!==null;){if(v.style.display==="none")return!0;v=v.parentElement}return!1}return{listHeight:u,listStyle:{overflow:"auto"},keyToIndex:i,itemsStyle:j(()=>{const{itemResizable:f}=n,v=G(b.value.sum());return d.value,[n.itemsStyle,{boxSizing:"content-box",width:G(o.value),height:f?"":v,minHeight:f?v:"",paddingTop:G(n.paddingTop),paddingBottom:G(n.paddingBottom)}]}),visibleItemsStyle:j(()=>(d.value,{transform:`translateY(${G(b.value.sum(g.value))})`})),viewportItems:w,listElRef:l,itemsElRef:C(null),scrollTo:c,handleListResize:X,handleListScroll:H,handleListWheel:_,handleItemResize:N}},render(){const{itemResizable:n,keyField:e,keyToIndex:t,visibleItemsTag:r}=this;return T(Ce,{onResize:this.handleListResize},{default:()=>{var o,i;return T("div",et(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[this.items.length!==0?T("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[T(r,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>{const{renderCol:a,renderItemWithCols:h}=this;return this.viewportItems.map(l=>{const u=l[e],p=t.get(u),b=a!=null?T(Be,{index:p,item:l}):void 0,d=h!=null?T(Be,{index:p,item:l}):void 0,m=this.$slots.default({item:l,renderedCols:b,renderedItemWithCols:d,index:p})[0];return n?T(Ce,{key:u,onResize:g=>this.handleItemResize(u,g)},{default:()=>m}):(m.key=u,m)})}})]):(i=(o=this.$slots).empty)===null||i===void 0?void 0:i.call(o)])}})}}),Dt=B(".v-x-scroll",{overflow:"auto",scrollbarWidth:"none"},[B("&::-webkit-scrollbar",{width:0,height:0})]),rn=W({name:"XScroll",props:{disabled:Boolean,onScroll:Function},setup(){const n=C(null);function e(o){!(o.currentTarget.offsetWidth<o.currentTarget.scrollWidth)||o.deltaY===0||(o.currentTarget.scrollLeft+=o.deltaY+o.deltaX,o.preventDefault())}const t=le();return Dt.mount({id:"vueuc/x-scroll",head:!0,anchorMetaName:se,ssr:t}),Object.assign({selfRef:n,handleWheel:e},{scrollTo(...o){var i;(i=n.value)===null||i===void 0||i.scrollTo(...o)}})},render(){return T("div",{ref:"selfRef",onScroll:this.onScroll,onWheel:this.disabled?void 0:this.handleWheel,class:"v-x-scroll"},this.$slots)}}),k="v-hidden",Nt=B("[v-hidden]",{display:"none!important"}),on=W({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateCount:Function,onUpdateOverflow:Function},setup(n,{slots:e}){const t=C(null),r=C(null);function o(a){const{value:h}=t,{getCounter:l,getTail:u}=n;let p;if(l!==void 0?p=l():p=r.value,!h||!p)return;p.hasAttribute(k)&&p.removeAttribute(k);const{children:b}=h;if(a.showAllItemsBeforeCalculate)for(const $ of b)$.hasAttribute(k)&&$.removeAttribute(k);const d=h.offsetWidth,m=[],g=e.tail?u==null?void 0:u():null;let w=g?g.offsetWidth:0,c=!1;const s=h.children.length-(e.tail?1:0);for(let $=0;$<s-1;++$){if($<0)continue;const A=b[$];if(c){A.hasAttribute(k)||A.setAttribute(k,"");continue}else A.hasAttribute(k)&&A.removeAttribute(k);const N=A.offsetWidth;if(w+=N,m[$]=N,w>d){const{updateCounter:V}=n;for(let E=$;E>=0;--E){const H=s-1-E;V!==void 0?V(H):p.textContent=`${H}`;const _=p.offsetWidth;if(w-=m[E],w+_<=d||E===0){c=!0,$=E-1,g&&($===-1?(g.style.maxWidth=`${d-_}px`,g.style.boxSizing="border-box"):g.style.maxWidth="");const{onUpdateCount:X}=n;X&&X(H);break}}}}const{onUpdateOverflow:y}=n;c?y!==void 0&&y(!0):(y!==void 0&&y(!1),p.setAttribute(k,""))}const i=le();return Nt.mount({id:"vueuc/overflow",head:!0,anchorMetaName:se,ssr:i}),R(()=>o({showAllItemsBeforeCalculate:!1})),{selfRef:t,counterRef:r,sync:o}},render(){const{$slots:n}=this;return Ve(()=>this.sync({showAllItemsBeforeCalculate:!1})),T("div",{class:"v-overflow",ref:"selfRef"},[He(n,"default"),n.counter?n.counter():T("span",{style:{display:"inline-block"},ref:"counterRef"}),n.tail?n.tail():null])}});function Pe(n){return n instanceof HTMLElement}function Ke(n){for(let e=0;e<n.childNodes.length;e++){const t=n.childNodes[e];if(Pe(t)&&(Je(t)||Ke(t)))return!0}return!1}function Ge(n){for(let e=n.childNodes.length-1;e>=0;e--){const t=n.childNodes[e];if(Pe(t)&&(Je(t)||Ge(t)))return!0}return!1}function Je(n){if(!_t(n))return!1;try{n.focus({preventScroll:!0})}catch{}return document.activeElement===n}function _t(n){if(n.tabIndex>0||n.tabIndex===0&&n.getAttribute("tabIndex")!==null)return!0;if(n.getAttribute("disabled"))return!1;switch(n.nodeName){case"A":return!!n.href&&n.rel!=="ignore";case"INPUT":return n.type!=="hidden"&&n.type!=="file";case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}let J=[];const ln=W({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(n){const e=rt(),t=C(null),r=C(null);let o=!1,i=!1;const a=typeof document>"u"?null:document.activeElement;function h(){return J[J.length-1]===e}function l(c){var s;c.code==="Escape"&&h()&&((s=n.onEsc)===null||s===void 0||s.call(n,c))}R(()=>{Z(()=>n.active,c=>{c?(b(),he("keydown",document,l)):(Q("keydown",document,l),o&&d())},{immediate:!0})}),oe(()=>{Q("keydown",document,l),o&&d()});function u(c){if(!i&&h()){const s=p();if(s===null||s.contains(ot(c)))return;m("first")}}function p(){const c=t.value;if(c===null)return null;let s=c;for(;s=s.nextSibling,!(s===null||s instanceof Element&&s.tagName==="DIV"););return s}function b(){var c;if(!n.disabled){if(J.push(e),n.autoFocus){const{initialFocusTo:s}=n;s===void 0?m("first"):(c=Ee(s))===null||c===void 0||c.focus({preventScroll:!0})}o=!0,document.addEventListener("focus",u,!0)}}function d(){var c;if(n.disabled||(document.removeEventListener("focus",u,!0),J=J.filter(y=>y!==e),h()))return;const{finalFocusTo:s}=n;s!==void 0?(c=Ee(s))===null||c===void 0||c.focus({preventScroll:!0}):n.returnFocusOnDeactivated&&a instanceof HTMLElement&&(i=!0,a.focus({preventScroll:!0}),i=!1)}function m(c){if(h()&&n.active){const s=t.value,y=r.value;if(s!==null&&y!==null){const $=p();if($==null||$===y){i=!0,s.focus({preventScroll:!0}),i=!1;return}i=!0;const A=c==="first"?Ke($):Ge($);i=!1,A||(i=!0,s.focus({preventScroll:!0}),i=!1)}}}function g(c){if(i)return;const s=p();s!==null&&(c.relatedTarget!==null&&s.contains(c.relatedTarget)?m("last"):m("first"))}function w(c){i||(c.relatedTarget!==null&&c.relatedTarget===t.value?m("last"):m("first"))}return{focusableStartRef:t,focusableEndRef:r,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:g,handleEndFocus:w}},render(){const{default:n}=this.$slots;if(n===void 0)return null;if(this.disabled)return n();const{active:e,focusableStyle:t}=this;return T(We,null,[T("div",{"aria-hidden":"true",tabindex:e?"0":"-1",ref:"focusableStartRef",style:t,onFocus:this.handleStartFocus}),n(),T("div",{"aria-hidden":"true",style:t,ref:"focusableEndRef",tabindex:e?"0":"-1",onFocus:this.handleEndFocus})])}});export{Rt as B,ln as F,Ct as L,Ce as V,nn as a,tn as b,en as c,on as d,rn as e,Ie as r};
