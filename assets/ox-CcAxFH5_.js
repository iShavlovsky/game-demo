import{k as re}from"./@noble-C5A8J5eD.js";import{p as R,f as z}from"./abitype-kHAD-mPk.js";const ne="0.1.1";function ie(){return ne}class f extends Error{constructor(t,r={}){const n=(()=>{var a;if(r.cause instanceof f){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return(a=r.cause)!=null&&a.message?r.cause.message:r.details})(),i=r.cause instanceof f&&r.cause.docsPath||r.docsPath,o=`https://oxlib.sh${i??""}`,c=[t||"An error occurred.",...r.metaMessages?["",...r.metaMessages]:[],...n||i?["",n?`Details: ${n}`:void 0,i?`See: ${o}`:void 0]:[]].filter(a=>typeof a=="string").join(`
`);super(c,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${ie()}`}),this.cause=r.cause,this.details=n,this.docs=o,this.docsPath=i,this.shortMessage=t}walk(t){return F(this,t)}}function F(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?F(e.cause,t):t?null:e}const se="#__bigint";function oe(e,t,r){return JSON.stringify(e,(n,i)=>typeof i=="bigint"?i.toString()+se:i,r)}function ue(e,t){if(C(e)>t)throw new ye({givenSize:C(e),maxSize:t})}const g={zero:48,nine:57,A:65,F:70,a:97,f:102};function T(e){if(e>=g.zero&&e<=g.nine)return e-g.zero;if(e>=g.A&&e<=g.F)return e-(g.A-10);if(e>=g.a&&e<=g.f)return e-(g.a-10)}function ce(e,t={}){const{dir:r,size:n=32}=t;if(n===0)return e;if(e.length>n)throw new be({size:e.length,targetSize:n,type:"Bytes"});const i=new Uint8Array(n);for(let s=0;s<n;s++){const o=r==="right";i[o?s:n-s-1]=e[o?s:e.length-s-1]}return i}function j(e,t){if(l(e)>t)throw new Ae({givenSize:l(e),maxSize:t})}function ae(e,t){if(typeof t=="number"&&t>0&&t>l(e)-1)throw new k({offset:t,position:"start",size:l(e)})}function fe(e,t,r){if(typeof t=="number"&&typeof r=="number"&&l(e)!==r-t)throw new k({offset:r,position:"end",size:l(e)})}function V(e,t={}){const{dir:r,size:n=32}=t;if(n===0)return e;const i=e.replace("0x","");if(i.length>n*2)throw new Se({size:Math.ceil(i.length/2),targetSize:n,type:"Hex"});return`0x${i[r==="right"?"padEnd":"padStart"](n*2,"0")}`}const de=new TextEncoder;function le(e){return e instanceof Uint8Array?e:typeof e=="string"?pe(e):he(e)}function he(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function pe(e,t={}){const{size:r}=t;let n=e;r&&(j(e,r),n=b(e,r));let i=n.slice(2);i.length%2&&(i=`0${i}`);const s=i.length/2,o=new Uint8Array(s);for(let c=0,a=0;c<s;c++){const u=T(i.charCodeAt(a++)),h=T(i.charCodeAt(a++));if(u===void 0||h===void 0)throw new f(`Invalid byte sequence ("${i[a-2]}${i[a-1]}" in "${i}").`);o[c]=u*16+h}return o}function me(e,t={}){const{size:r}=t,n=de.encode(e);return typeof r=="number"?(ue(n,r),ge(n,r)):n}function ge(e,t){return ce(e,{dir:"right",size:t})}function C(e){return e.length}let ye=class extends f{constructor({givenSize:t,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},be=class extends f{constructor({size:t,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const xe=new TextEncoder,we=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function $e(e,t={}){const{strict:r=!1}=t;if(!e)throw new H(e);if(typeof e!="string")throw new H(e);if(r&&!/^0x[0-9a-fA-F]*$/.test(e))throw new N(e);if(!e.startsWith("0x"))throw new N(e)}function m(...e){return`0x${e.reduce((t,r)=>t+r.replace("0x",""),"")}`}function G(e,t={}){const r=`0x${Number(e)}`;return typeof t.size=="number"?(j(r,t.size),y(r,t.size)):r}function _(e,t={}){let r="";for(let i=0;i<e.length;i++)r+=we[e[i]];const n=`0x${r}`;return typeof t.size=="number"?(j(n,t.size),b(n,t.size)):n}function d(e,t={}){const{signed:r,size:n}=t,i=BigInt(e);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof e=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const u=typeof e=="bigint"?"n":"";throw new W({max:s?`${s}${u}`:void 0,min:`${o}${u}`,signed:r,size:n,value:`${e}${u}`})}const a=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?y(a,n):a}function B(e,t={}){return _(xe.encode(e),t)}function y(e,t){return V(e,{dir:"left",size:t})}function b(e,t){return V(e,{dir:"right",size:t})}function O(e,t,r,n={}){const{strict:i}=n;ae(e,t);const s=`0x${e.replace("0x","").slice((t??0)*2,(r??e.length)*2)}`;return i&&fe(s,t,r),s}function l(e){return Math.ceil((e.length-2)/2)}function ze(e,t={}){const{strict:r=!1}=t;try{return $e(e,{strict:r}),!0}catch{return!1}}class W extends f{constructor({max:t,min:r,signed:n,size:i,value:s}){super(`Number \`${s}\` is not in safe${i?` ${i*8}-bit`:""}${n?" signed":" unsigned"} integer range ${t?`(\`${r}\` to \`${t}\`)`:`(above \`${r}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class H extends f{constructor(t){super(`Value \`${typeof t=="object"?oe(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class N extends f{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class Ae extends f{constructor({givenSize:t,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class k extends f{constructor({offset:t,position:r,size:n}){super(`Slice ${r==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class Se extends f{constructor({size:t,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function Ee(e){return{address:e.address,amount:d(e.amount),index:d(e.index),validatorIndex:d(e.validatorIndex)}}function et(e){return{...typeof e.baseFeePerGas=="bigint"&&{baseFeePerGas:d(e.baseFeePerGas)},...typeof e.blobBaseFee=="bigint"&&{blobBaseFee:d(e.blobBaseFee)},...typeof e.feeRecipient=="string"&&{feeRecipient:e.feeRecipient},...typeof e.gasLimit=="bigint"&&{gasLimit:d(e.gasLimit)},...typeof e.number=="bigint"&&{number:d(e.number)},...typeof e.prevRandao=="bigint"&&{prevRandao:d(e.prevRandao)},...typeof e.time=="bigint"&&{time:d(e.time)},...e.withdrawals&&{withdrawals:e.withdrawals.map(Ee)}}}function D(e,t={}){const{as:r=typeof e=="string"?"Hex":"Bytes"}=t,n=re(le(e));return r==="Bytes"?n:_(n)}class Pe extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const r=super.get(t);return super.has(t)&&r!==void 0&&(this.delete(t),super.set(t,r)),r}set(t,r){if(super.set(t,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const Ie={checksum:new Pe(8192)},$=Ie.checksum,je=/^0x[a-fA-F0-9]{40}$/;function w(e,t={}){const{strict:r=!0}=t;if(!je.test(e))throw new U({address:e,cause:new Oe});if(r){if(e.toLowerCase()===e)return;if(Be(e)!==e)throw new U({address:e,cause:new Me})}}function Be(e){if($.has(e))return $.get(e);w(e,{strict:!1});const t=e.substring(2).toLowerCase(),r=D(me(t),{as:"Bytes"}),n=t.split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&n[s]&&(n[s]=n[s].toUpperCase()),(r[s>>1]&15)>=8&&n[s+1]&&(n[s+1]=n[s+1].toUpperCase());const i=`0x${n.join("")}`;return $.set(e,i),i}function A(e,t={}){const{strict:r=!0}=t??{};try{return w(e,{strict:r}),!0}catch{return!1}}class U extends f{constructor({address:t,cause:r}){super(`Address "${t}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class Oe extends f{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class Me extends f{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function S(e){let t=!0,r="",n=0,i="",s=!1;for(let o=0;o<e.length;o++){const c=e[o];if(["(",")",","].includes(c)&&(t=!0),c==="("&&n++,c===")"&&n--,!!t){if(n===0){if(c===" "&&["event","function","error",""].includes(i))i="";else if(i+=c,c===")"){s=!0;break}continue}if(c===" "){e[o-1]!==","&&r!==","&&r!==",("&&(r="",t=!1);continue}i+=c,r+=c}}if(!s)throw new f("Unable to normalize signature.");return i}function E(e,t){const r=typeof e,n=t.type;switch(n){case"address":return A(e,{strict:!1});case"bool":return r==="boolean";case"function":return r==="string";case"string":return r==="string";default:return n==="tuple"&&"components"in t?Object.values(t.components).every((i,s)=>E(Object.values(e)[s],i)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(n)?r==="number"||r==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(n)?r==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(n)?Array.isArray(e)&&e.every(i=>E(i,{...t,type:n.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function q(e,t,r){for(const n in e){const i=e[n],s=t[n];if(i.type==="tuple"&&s.type==="tuple"&&"components"in i&&"components"in s)return q(i.components,s.components,r[n]);const o=[i.type,s.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?A(r[n],{strict:!1}):o.includes("address")&&o.includes("bytes")?A(r[n],{strict:!1}):!1)return o}}function J(e,t={}){const{prepare:r=!0}=t,n=Array.isArray(e)?R(e):typeof e=="string"?R(e):e;return{...n,...r?{hash:x(n)}:{}}}function ve(e,t,r){const{args:n=[],prepare:i=!0}=r??{},s=ze(t,{strict:!1}),o=e.filter(u=>s?u.type==="function"||u.type==="error"?K(u)===O(t,0,4):u.type==="event"?x(u)===t:!1:"name"in u&&u.name===t);if(o.length===0)throw new P({name:t});if(o.length===1)return{...o[0],...i?{hash:x(o[0])}:{}};let c;for(const u of o){if(!("inputs"in u))continue;if(!n||n.length===0){if(!u.inputs||u.inputs.length===0)return{...u,...i?{hash:x(u)}:{}};continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==n.length)continue;if(n.every((p,te)=>{const L="inputs"in u&&u.inputs[te];return L?E(p,L):!1})){if(c&&"inputs"in c&&c.inputs){const p=q(u.inputs,c.inputs,n);if(p)throw new Re({abiItem:u,type:p[0]},{abiItem:c,type:p[1]})}c=u}}const a=(()=>{if(c)return c;const[u,...h]=o;return{...u,overloads:h}})();if(!a)throw new P({name:t});return{...a,...i?{hash:x(a)}:{}}}function K(e){return O(x(e),0,4)}function Le(e){const t=typeof e=="string"?e:z(e);return S(t)}function x(e){return typeof e!="string"&&"hash"in e&&e.hash?e.hash:D(B(Le(e)))}class Re extends f{constructor(t,r){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${t.type}\` in \`${S(z(t.abiItem))}\`, and`,`\`${r.type}\` in \`${S(z(r.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class P extends f{constructor({name:t,data:r,type:n="item"}){const i=t?` with name "${t}"`:r?` with data "${r}"`:"";super(`ABI ${n}${i} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const Te=/^(.*)\[([0-9]*)\]$/,Ce=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,X=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function He({checksumAddress:e,parameters:t,values:r}){const n=[];for(let i=0;i<t.length;i++)n.push(M({checksumAddress:e,parameter:t[i],value:r[i]}));return n}function M({checksumAddress:e=!1,parameter:t,value:r}){const n=t,i=ke(n.type);if(i){const[s,o]=i;return Ue(r,{checksumAddress:e,length:s,parameter:{...n,type:o}})}if(n.type==="tuple")return We(r,{checksumAddress:e,parameter:n});if(n.type==="address")return Ne(r,{checksum:e});if(n.type==="bool")return Ve(r);if(n.type.startsWith("uint")||n.type.startsWith("int")){const s=n.type.startsWith("int"),[,,o="256"]=X.exec(n.type)??[];return Ge(r,{signed:s,size:Number(o)})}if(n.type.startsWith("bytes"))return Fe(r,{type:n.type});if(n.type==="string")return _e(r);throw new ee(n.type)}function v(e){let t=0;for(let s=0;s<e.length;s++){const{dynamic:o,encoded:c}=e[s];o?t+=32:t+=l(c)}const r=[],n=[];let i=0;for(let s=0;s<e.length;s++){const{dynamic:o,encoded:c}=e[s];o?(r.push(d(t+i,{size:32})),n.push(c),i+=l(c)):r.push(c)}return m(...r,...n)}function Ne(e,t){const{checksum:r=!1}=t;return w(e,{strict:r}),{dynamic:!1,encoded:y(e.toLowerCase())}}function Ue(e,t){const{checksumAddress:r,length:n,parameter:i}=t,s=n===null;if(!Array.isArray(e))throw new qe(e);if(!s&&e.length!==n)throw new De({expectedLength:n,givenLength:e.length,type:`${i.type}[${n}]`});let o=!1;const c=[];for(let a=0;a<e.length;a++){const u=M({checksumAddress:r,parameter:i,value:e[a]});u.dynamic&&(o=!0),c.push(u)}if(s||o){const a=v(c);if(s){const u=d(c.length,{size:32});return{dynamic:!0,encoded:c.length>0?m(u,a):u}}if(o)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:m(...c.map(({encoded:a})=>a))}}function Fe(e,{type:t}){const[,r]=t.split("bytes"),n=l(e);if(!r){let i=e;return n%32!==0&&(i=b(i,Math.ceil((e.length-2)/2/32)*32)),{dynamic:!0,encoded:m(y(d(n,{size:32})),i)}}if(n!==Number.parseInt(r))throw new Y({expectedSize:Number.parseInt(r),value:e});return{dynamic:!1,encoded:b(e)}}function Ve(e){if(typeof e!="boolean")throw new f(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:y(G(e))}}function Ge(e,{signed:t,size:r}){if(typeof r=="number"){const n=2n**(BigInt(r)-(t?1n:0n))-1n,i=t?-n-1n:0n;if(e>n||e<i)throw new W({max:n.toString(),min:i.toString(),signed:t,size:r/8,value:e.toString()})}return{dynamic:!1,encoded:d(e,{size:32,signed:t})}}function _e(e){const t=B(e),r=Math.ceil(l(t)/32),n=[];for(let i=0;i<r;i++)n.push(b(O(t,i*32,(i+1)*32)));return{dynamic:!0,encoded:m(b(d(l(t),{size:32})),...n)}}function We(e,t){const{checksumAddress:r,parameter:n}=t;let i=!1;const s=[];for(let o=0;o<n.components.length;o++){const c=n.components[o],a=Array.isArray(e)?o:c.name,u=M({checksumAddress:r,parameter:c,value:e[a]});s.push(u),u.dynamic&&(i=!0)}return{dynamic:i,encoded:i?v(s):m(...s.map(({encoded:o})=>o))}}function ke(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function Q(e,t,r){const{checksumAddress:n=!1}={};if(e.length!==t.length)throw new Z({expectedLength:e.length,givenLength:t.length});const i=He({checksumAddress:n,parameters:e,values:t}),s=v(i);return s.length===0?"0x":s}function I(e,t){if(e.length!==t.length)throw new Z({expectedLength:e.length,givenLength:t.length});const r=[];for(let n=0;n<e.length;n++){const i=e[n],s=t[n];r.push(I.encode(i,s))}return m(...r)}(function(e){function t(r,n,i=!1){if(r==="address"){const a=n;return w(a),y(a.toLowerCase(),i?32:0)}if(r==="string")return B(n);if(r==="bytes")return n;if(r==="bool")return y(G(n),i?32:1);const s=r.match(X);if(s){const[a,u,h="256"]=s,p=Number.parseInt(h)/8;return d(n,{size:i?32:p,signed:u==="int"})}const o=r.match(Ce);if(o){const[a,u]=o;if(Number.parseInt(u)!==(n.length-2)/2)throw new Y({expectedSize:Number.parseInt(u),value:n});return b(n,i?32:0)}const c=r.match(Te);if(c&&Array.isArray(n)){const[a,u]=c,h=[];for(let p=0;p<n.length;p++)h.push(t(u,n[p],!0));return h.length===0?"0x":m(...h)}throw new ee(r)}e.encode=t})(I||(I={}));class De extends f{constructor({expectedLength:t,givenLength:r,type:n}){super(`Array length mismatch for type \`${n}\`. Expected: \`${t}\`. Given: \`${r}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class Y extends f{constructor({expectedSize:t,value:r}){super(`Size of bytes "${r}" (bytes${l(r)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class Z extends f{constructor({expectedLength:t,givenLength:r}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${r}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class qe extends f{constructor(t){super(`Value \`${t}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class ee extends f{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function tt(e,t){var i;const{bytecode:r,args:n}=t;return m(r,(i=e.inputs)!=null&&i.length&&(n!=null&&n.length)?Q(e.inputs,n):"0x")}function rt(e){return J(e)}function nt(e,...t){const{overloads:r}=e,n=r?Je([e,...r],e.name,{args:t[0]}):e,i=Ke(n),s=t.length>0?Q(n.inputs,t[0]):void 0;return s?m(i,s):i}function it(e,t={}){return J(e,t)}function Je(e,t,r){const n=ve(e,t,r);if(n.type!=="function")throw new P({name:t,type:"function"});return n}function Ke(e){return K(e)}export{nt as a,rt as b,tt as e,it as f,et as t};
