import{f as wa,a as Ts}from"./abitype-kHAD-mPk.js";import{t as va,e as xa,a as Ea,f as Je,b as Pa}from"./ox-CcAxFH5_.js";import{k as Ba,s as $s,r as Ia,h as Aa,c as Ta}from"./@noble-C5A8J5eD.js";const Ns="2.23.5";let mt={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${Ns}`};class v extends Error{constructor(t,n={}){var i;const r=(()=>{var c;return n.cause instanceof v?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof v&&n.cause.docsPath||n.docsPath,o=(i=mt.getDocsUrl)==null?void 0:i.call(mt,{...n,docsPath:s}),a=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...o?[`Docs: ${o}`]:[],...r?[`Details: ${r}`]:[],...mt.version?[`Version: ${mt.version}`]:[]].join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=Ns}walk(t){return Ss(this,t)}}function Ss(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?Ss(e.cause,t):t?null:e}class Cs extends v{constructor({max:t,min:n,signed:r,size:s,value:o}){super(`Number "${o}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class $a extends v{constructor(t){super(`Bytes value "${t}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class Na extends v{constructor(t){super(`Hex value "${t}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}class Sa extends v{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}class ks extends v{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}class Fs extends v{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}class Vr extends v{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${t} ${r} long.`,{name:"InvalidBytesLengthError"})}}function He(e,{dir:t,size:n=32}={}){return typeof e=="string"?$e(e,{dir:t,size:n}):Ca(e,{dir:t,size:n})}function $e(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new Fs({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function Ca(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new Fs({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const o=t==="right";r[o?s:n-s-1]=e[o?s:e.length-s-1]}return r}function fe(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function _(e){return fe(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function ie(e,{dir:t="left"}={}){let n=typeof e=="string"?e.replace("0x",""):e,r=0;for(let s=0;s<n.length-1&&n[t==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=t==="left"?n.slice(r):n.slice(0,n.length-r),typeof e=="string"?(n.length===1&&t==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const ka=new TextEncoder;function Be(e,t={}){return typeof e=="number"||typeof e=="bigint"?za(e,t):typeof e=="boolean"?Fa(e,t):fe(e)?te(e,t):Me(e,t)}function Fa(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(ce(n,{size:t.size}),He(n,{size:t.size})):n}const ve={zero:48,nine:57,A:65,F:70,a:97,f:102};function Zr(e){if(e>=ve.zero&&e<=ve.nine)return e-ve.zero;if(e>=ve.A&&e<=ve.F)return e-(ve.A-10);if(e>=ve.a&&e<=ve.f)return e-(ve.a-10)}function te(e,t={}){let n=e;t.size&&(ce(n,{size:t.size}),n=He(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,o=new Uint8Array(s);for(let a=0,i=0;a<s;a++){const c=Zr(r.charCodeAt(i++)),u=Zr(r.charCodeAt(i++));if(c===void 0||u===void 0)throw new v(`Invalid byte sequence ("${r[i-2]}${r[i-1]}" in "${r}").`);o[a]=c*16+u}return o}function za(e,t){const n=R(e,t);return te(n)}function Me(e,t={}){const n=ka.encode(e);return typeof t.size=="number"?(ce(n,{size:t.size}),He(n,{dir:"right",size:t.size})):n}function ce(e,{size:t}){if(_(e)>t)throw new Sa({givenSize:_(e),maxSize:t})}function q(e,t={}){const{signed:n}=t;t.size&&ce(e,{size:t.size});const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2,o=(1n<<BigInt(s)*8n-1n)-1n;return r<=o?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Ra(e,t={}){let n=e;if(t.size&&(ce(n,{size:t.size}),n=ie(n)),ie(n)==="0x00")return!1;if(ie(n)==="0x01")return!0;throw new Na(n)}function le(e,t={}){return Number(q(e,t))}function Cf(e,t={}){let n=te(e);return t.size&&(ce(n,{size:t.size}),n=ie(n,{dir:"right"})),new TextDecoder().decode(n)}const Ma=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function k(e,t={}){return typeof e=="number"||typeof e=="bigint"?R(e,t):typeof e=="string"?nt(e,t):typeof e=="boolean"?zs(e,t):V(e,t)}function zs(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(ce(n,{size:t.size}),He(n,{size:t.size})):n}function V(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=Ma[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(ce(r,{size:t.size}),He(r,{dir:"right",size:t.size})):r}function R(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof o=="bigint"&&n?-o-1n:0;if(o&&s>o||s<a){const c=typeof e=="bigint"?"n":"";throw new Cs({max:o?`${o}${c}`:void 0,min:`${a}${c}`,signed:n,size:r,value:`${e}${c}`})}const i=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?He(i,{size:r}):i}const Oa=new TextEncoder;function nt(e,t={}){const n=Oa.encode(e);return V(n,t)}async function La(e,{chain:t}){const{id:n,name:r,nativeCurrency:s,rpcUrls:o,blockExplorers:a}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:R(n),chainName:r,nativeCurrency:s,rpcUrls:o.default.http,blockExplorerUrls:a?Object.values(a).map(({url:i})=>i):void 0}]},{dedupe:!0,retryCount:0})}function Ae(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new Ja(e.type);return`${e.name}(${rn(e.inputs,{includeName:t})})`}function rn(e,{includeName:t=!1}={}){return e?e.map(n=>Da(n,{includeName:t})).join(t?", ":","):""}function Da(e,{includeName:t}){return e.type.startsWith("tuple")?`(${rn(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}class Ga extends v{constructor({docsPath:t}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:t,name:"AbiConstructorNotFoundError"})}}class Wr extends v{constructor({docsPath:t}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:t,name:"AbiConstructorParamsNotFoundError"})}}class Rs extends v{constructor({data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${rn(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=n,this.size=r}}class Rt extends v{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class ja extends v{constructor({expectedLength:t,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class qa extends v{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${_(n)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class _a extends v{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Ms extends v{constructor(t,{docsPath:n}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}}class Ua extends v{constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t,name:"AbiEventSignatureEmptyTopicsError"})}}class Os extends v{constructor(t,{docsPath:n}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class Kr extends v{constructor(t,{docsPath:n}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class nn extends v{constructor(t,{docsPath:n}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class Ha extends v{constructor(t,{docsPath:n}){super([`Function "${t}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class Va extends v{constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${Ae(t.abiItem)}\`, and`,`\`${n.type}\` in \`${Ae(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class Za extends v{constructor({expectedSize:t,givenSize:n}){super(`Expected bytes${t}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class yt extends v{constructor({abiItem:t,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${rn(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=n,this.params=r,this.size=s}}class sn extends v{constructor({abiItem:t,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Ae(t,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}}class Wa extends v{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class Ka extends v{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class Ya extends v{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class Ja extends v{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function be(e){return typeof e[0]=="string"?ge(e):Xa(e)}function Xa(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function ge(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}class X extends v{constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class on extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}function Y(e,t){const n=t||"hex",r=Ba(fe(e,{strict:!1})?Be(e):e);return n==="bytes"?r:k(r)}const $n=new on(8192);function Mt(e,t){if($n.has(`${e}.${t}`))return $n.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),r=Y(Me(n),"bytes"),s=n.split("");for(let a=0;a<40;a+=2)r[a>>1]>>4>=8&&s[a]&&(s[a]=s[a].toUpperCase()),(r[a>>1]&15)>=8&&s[a+1]&&(s[a+1]=s[a+1].toUpperCase());const o=`0x${s.join("")}`;return $n.set(`${e}.${t}`,o),o}function Ls(e,t){if(!H(e,{strict:!1}))throw new X({address:e});return Mt(e,t)}const Qa=/^0x[a-fA-F0-9]{40}$/,Nn=new on(8192);function H(e,t){const{strict:n=!0}=t??{},r=`${e}.${n}`;if(Nn.has(r))return Nn.get(r);const s=Qa.test(e)?e.toLowerCase()===e?!0:n?Mt(e)===e:!0:!1;return Nn.set(r,s),s}function gt(e,t,n,{strict:r}={}){return fe(e,{strict:!1})?qs(e,t,n,{strict:r}):js(e,t,n,{strict:r})}function Ds(e,t){if(typeof t=="number"&&t>0&&t>_(e)-1)throw new ks({offset:t,position:"start",size:_(e)})}function Gs(e,t,n){if(typeof t=="number"&&typeof n=="number"&&_(e)!==n-t)throw new ks({offset:n,position:"end",size:_(e)})}function js(e,t,n,{strict:r}={}){Ds(e,t);const s=e.slice(t,n);return r&&Gs(s,t,n),s}function qs(e,t,n,{strict:r}={}){Ds(e,t);const s=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return r&&Gs(s,t,n),s}const ei=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,_s=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Ve(e,t){if(e.length!==t.length)throw new _a({expectedLength:e.length,givenLength:t.length});const n=ti({params:e,values:t}),r=hr(n);return r.length===0?"0x":r}function ti({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(lr({param:e[r],value:t[r]}));return n}function lr({param:e,value:t}){const n=pr(e.type);if(n){const[r,s]=n;return ri(t,{length:r,param:{...e,type:s}})}if(e.type==="tuple")return ci(t,{param:e});if(e.type==="address")return ni(t);if(e.type==="bool")return oi(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int"),[,,s="256"]=_s.exec(e.type)??[];return ai(t,{signed:r,size:Number(s)})}if(e.type.startsWith("bytes"))return si(t,{param:e});if(e.type==="string")return ii(t);throw new Wa(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function hr(e){let t=0;for(let o=0;o<e.length;o++){const{dynamic:a,encoded:i}=e[o];a?t+=32:t+=_(i)}const n=[],r=[];let s=0;for(let o=0;o<e.length;o++){const{dynamic:a,encoded:i}=e[o];a?(n.push(R(t+s,{size:32})),r.push(i),s+=_(i)):n.push(i)}return be([...n,...r])}function ni(e){if(!H(e))throw new X({address:e});return{dynamic:!1,encoded:$e(e.toLowerCase())}}function ri(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new Ya(e);if(!r&&e.length!==t)throw new ja({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let s=!1;const o=[];for(let a=0;a<e.length;a++){const i=lr({param:n,value:e[a]});i.dynamic&&(s=!0),o.push(i)}if(r||s){const a=hr(o);if(r){const i=R(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?be([i,a]):i}}if(s)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:be(o.map(({encoded:a})=>a))}}function si(e,{param:t}){const[,n]=t.type.split("bytes"),r=_(e);if(!n){let s=e;return r%32!==0&&(s=$e(s,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:be([$e(R(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new qa({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:$e(e,{dir:"right"})}}function oi(e){if(typeof e!="boolean")throw new v(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:$e(zs(e))}}function ai(e,{signed:t,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new Cs({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:R(e,{size:32,signed:t})}}function ii(e){const t=nt(e),n=Math.ceil(_(t)/32),r=[];for(let s=0;s<n;s++)r.push($e(gt(t,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:be([$e(R(_(t),{size:32})),...r])}}function ci(e,{param:t}){let n=!1;const r=[];for(let s=0;s<t.components.length;s++){const o=t.components[s],a=Array.isArray(e)?s:o.name,i=lr({param:o,value:e[a]});r.push(i),i.dynamic&&(n=!0)}return{dynamic:n,encoded:n?hr(r):be(r.map(({encoded:s})=>s))}}function pr(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const Sn="/docs/contract/encodeDeployData";function an(e){const{abi:t,args:n,bytecode:r}=e;if(!n||n.length===0)return r;const s=t.find(a=>"type"in a&&a.type==="constructor");if(!s)throw new Ga({docsPath:Sn});if(!("inputs"in s))throw new Wr({docsPath:Sn});if(!s.inputs||s.inputs.length===0)throw new Wr({docsPath:Sn});const o=Ve(s.inputs,n);return ge([r,o])}function Q(e){return typeof e=="string"?{address:e,type:"json-rpc"}:e}class ct extends v{constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:t,docsSlug:"account",name:"AccountNotFoundError"})}}class Cn extends v{constructor({docsPath:t,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:t,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function Us(e){const t=Y(`0x${e.substring(4)}`).substring(26);return Mt(`0x${t}`)}const ui="modulepreload",di=function(e){return"/game-demo/"+e},Yr={},Hs=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),i=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=di(c),c in Yr)return;Yr[c]=!0;const u=c.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${l}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":ui,u||(d.as="script"),d.crossOrigin="",d.href=c,i&&d.setAttribute("nonce",i),document.head.appendChild(d),u)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a}return s.then(a=>{for(const i of a||[])i.status==="rejected"&&o(i.reason);return t().catch(o)})};async function fi({hash:e,signature:t}){const n=fe(e)?e:k(e),{secp256k1:r}=await Hs(async()=>{const{secp256k1:a}=await Promise.resolve().then(()=>Kd);return{secp256k1:a}},void 0);return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:u,s:l,v:d,yParity:f}=t,h=Number(f??d),b=Jr(h);return new r.Signature(q(u),q(l)).addRecoveryBit(b)}const a=fe(t)?t:k(t),i=le(`0x${a.slice(130)}`),c=Jr(i);return r.Signature.fromCompact(a.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function Jr(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function Vs({hash:e,signature:t}){return Us(await fi({hash:e,signature:t}))}class Xr extends v{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Zs extends v{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`,{name:"PositionOutOfBoundsError"})}}class li extends v{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`,{name:"RecursiveReadLimitExceededError"})}}const hi={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new li({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new Zs({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new Xr({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new Xr({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function mr(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(hi);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}function Ne(e,t="hex"){const n=Ws(e),r=mr(new Uint8Array(n.length));return n.encode(r),t==="hex"?V(r.bytes):r.bytes}function Ws(e){return Array.isArray(e)?pi(e.map(t=>Ws(t))):mi(e)}function pi(e){const t=e.reduce((s,o)=>s+o.length,0),n=Ks(t);return{length:t<=55?1+t:1+n+t,encode(s){t<=55?s.pushByte(192+t):(s.pushByte(247+n),n===1?s.pushUint8(t):n===2?s.pushUint16(t):n===3?s.pushUint24(t):s.pushUint32(t));for(const{encode:o}of e)o(s)}}}function mi(e){const t=typeof e=="string"?te(e):e,n=Ks(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(s){t.length===1&&t[0]<128?s.pushBytes(t):t.length<=55?(s.pushByte(128+t.length),s.pushBytes(t)):(s.pushByte(183+n),n===1?s.pushUint8(t.length):n===2?s.pushUint16(t.length):n===3?s.pushUint24(t.length):s.pushUint32(t.length),s.pushBytes(t))}}}function Ks(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new v("Length is too large.")}function Ys(e){const{chainId:t,contractAddress:n,nonce:r,to:s}=e,o=Y(ge(["0x05",Ne([t?R(t):"0x",n,r?R(r):"0x"])]));return s==="bytes"?te(o):o}async function Js(e){const{authorization:t,signature:n}=e;return Vs({hash:Ys(t),signature:n??t})}class qn extends v{constructor({blockNumber:t,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...t&&r.blockCreated&&r.blockCreated>t?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${t}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class bi extends v{constructor({chain:t,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${t.id} – ${t.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${t.id} – ${t.name}`],name:"ChainMismatchError"})}}class yi extends v{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class Xs extends v{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class Ot extends v{constructor({chainId:t}){super(typeof t=="number"?`Chain ID "${t}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}function br({chain:e,currentChainId:t}){if(!e)throw new yi;if(t!==e.id)throw new bi({chain:e,currentChainId:t})}const Qs={gwei:9,wei:18},gi={ether:-9,wei:9},kf={ether:-18,gwei:-9};function eo(e,t){let n=e.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(t,"0");let[s,o]=[n.slice(0,n.length-t),n.slice(n.length-t)];return o=o.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${o?`.${o}`:""}`}function re(e,t="wei"){return eo(e,gi[t])}class Xe extends v{constructor({cause:t,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"})}}Object.defineProperty(Xe,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Xe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Ge extends v{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${re(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:t,name:"FeeCapTooHighError"})}}Object.defineProperty(Ge,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class _n extends v{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${re(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:t,name:"FeeCapTooLowError"})}}Object.defineProperty(_n,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class Un extends v{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:t,name:"NonceTooHighError"})}}Object.defineProperty(Un,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Hn extends v{constructor({cause:t,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:t,name:"NonceTooLowError"})}}Object.defineProperty(Hn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Vn extends v{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:t,name:"NonceMaxValueError"})}}Object.defineProperty(Vn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class Zn extends v{constructor({cause:t}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:t,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(Zn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class Wn extends v{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:t,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(Wn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class Kn extends v{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:t,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(Kn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class Yn extends v{constructor({cause:t}){super("The transaction type is not supported for this chain.",{cause:t,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(Yn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class wt extends v{constructor({cause:t,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${re(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${re(r)} gwei`:""}).`].join(`
`),{cause:t,name:"TipAboveFeeCapError"})}}Object.defineProperty(wt,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Lt extends v{constructor({cause:t}){super(`An error occurred while executing: ${t==null?void 0:t.shortMessage}`,{cause:t,name:"UnknownNodeError"})}}function yr(e,t="wei"){return eo(e,Qs[t])}function Dt(e){const t=Object.entries(e).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=t.reduce((r,[s])=>Math.max(r,s.length),0);return t.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class wi extends v{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class vi extends v{constructor({v:t}){super(`Invalid \`v\` value "${t}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class xi extends v{constructor({transaction:t}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Dt(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class Ei extends v{constructor({storageKey:t}){super(`Size for storage key "${t}" is invalid. Expected 32 bytes. Got ${Math.floor((t.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class Pi extends v{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:a,gasPrice:i,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:f}){var b;const h=Dt({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof f<"u"&&`${yr(f)} ${((b=s==null?void 0:s.nativeCurrency)==null?void 0:b.symbol)||"ETH"}`,data:o,gas:a,gasPrice:typeof i<"u"&&`${re(i)} gwei`,maxFeePerGas:typeof c<"u"&&`${re(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${re(u)} gwei`,nonce:l});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",h].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class to extends v{constructor({blockHash:t,blockNumber:n,blockTag:r,hash:s,index:o}){let a="Transaction";r&&o!==void 0&&(a=`Transaction at block time "${r}" at index "${o}"`),t&&o!==void 0&&(a=`Transaction at block hash "${t}" at index "${o}"`),n&&o!==void 0&&(a=`Transaction at block number "${n}" at index "${o}"`),s&&(a=`Transaction with hash "${s}"`),super(`${a} could not be found.`,{name:"TransactionNotFoundError"})}}class no extends v{constructor({hash:t}){super(`Transaction receipt with hash "${t}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class Bi extends v{constructor({hash:t}){super(`Timed out while waiting for transaction with hash "${t}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Z=(e,t,n)=>JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString():s,n),Ii=e=>e,Gt=e=>e;class Oe extends v{constructor({body:t,cause:n,details:r,headers:s,status:o,url:a}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[o&&`Status: ${o}`,`URL: ${Gt(a)}`,t&&`Request body: ${Z(t)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=t,this.headers=s,this.status=o,this.url=a}}class gr extends v{constructor({body:t,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${Gt(r)}`,`Request body: ${Z(t)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class Qr extends v{constructor({body:t,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Gt(n)}`,`Request body: ${Z(t)}`],name:"TimeoutError"})}}const Ai=-1;class se extends v{constructor(t,{code:n,docsPath:r,metaMessages:s,name:o,shortMessage:a}){super(a,{cause:t,docsPath:r,metaMessages:s||(t==null?void 0:t.metaMessages),name:o||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=o||t.name,this.code=t instanceof gr?t.code:n??Ai}}class ut extends se{constructor(t,n){super(t,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class vt extends se{constructor(t){super(t,{code:vt.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(vt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class xt extends se{constructor(t){super(t,{code:xt.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(xt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Et extends se{constructor(t,{method:n}={}){super(t,{code:Et.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(Et,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Pt extends se{constructor(t){super(t,{code:Pt.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Pt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class je extends se{constructor(t){super(t,{code:je.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(je,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class qe extends se{constructor(t){super(t,{code:qe.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(qe,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Bt extends se{constructor(t){super(t,{code:Bt.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Bt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class It extends se{constructor(t){super(t,{code:It.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(It,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class At extends se{constructor(t){super(t,{code:At.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(At,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Re extends se{constructor(t,{method:n}={}){super(t,{code:Re.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Re,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class rt extends se{constructor(t){super(t,{code:rt.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(rt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Tt extends se{constructor(t){super(t,{code:Tt.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Tt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class et extends ut{constructor(t){super(t,{code:et.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(et,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class $t extends ut{constructor(t){super(t,{code:$t.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty($t,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Nt extends ut{constructor(t,{method:n}={}){super(t,{code:Nt.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Nt,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class St extends ut{constructor(t){super(t,{code:St.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(St,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Ct extends ut{constructor(t){super(t,{code:Ct.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Ct,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class kt extends ut{constructor(t){super(t,{code:kt.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(kt,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Ti extends se{constructor(t){super(t,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function cn(e,t){const n=(e.details||"").toLowerCase(),r=e instanceof v?e.walk(s=>(s==null?void 0:s.code)===Xe.code):e;return r instanceof v?new Xe({cause:e,message:r.details}):Xe.nodeMessage.test(n)?new Xe({cause:e,message:e.details}):Ge.nodeMessage.test(n)?new Ge({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas}):_n.nodeMessage.test(n)?new _n({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas}):Un.nodeMessage.test(n)?new Un({cause:e,nonce:t==null?void 0:t.nonce}):Hn.nodeMessage.test(n)?new Hn({cause:e,nonce:t==null?void 0:t.nonce}):Vn.nodeMessage.test(n)?new Vn({cause:e,nonce:t==null?void 0:t.nonce}):Zn.nodeMessage.test(n)?new Zn({cause:e}):Wn.nodeMessage.test(n)?new Wn({cause:e,gas:t==null?void 0:t.gas}):Kn.nodeMessage.test(n)?new Kn({cause:e,gas:t==null?void 0:t.gas}):Yn.nodeMessage.test(n)?new Yn({cause:e}):wt.nodeMessage.test(n)?new wt({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas,maxPriorityFeePerGas:t==null?void 0:t.maxPriorityFeePerGas}):new Lt({cause:e})}function $i(e,{docsPath:t,...n}){const r=(()=>{const s=cn(e,n);return s instanceof Lt?e:s})();return new Pi(r,{docsPath:t,...n})}function un(e,{format:t}){if(!t)return{};const n={};function r(o){const a=Object.keys(o);for(const i of a)i in e&&(n[i]=e[i]),o[i]&&typeof o[i]=="object"&&!Array.isArray(o[i])&&r(o[i])}const s=t(e||{});return r(s),n}function dn(e,t){return({exclude:n,format:r})=>({exclude:n,format:s=>{const o=t(s);if(n)for(const a of n)delete o[a];return{...o,...r(s)}},type:e})}const Ni={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Ze(e){const t={};return typeof e.authorizationList<"u"&&(t.authorizationList=Ci(e.authorizationList)),typeof e.accessList<"u"&&(t.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(t.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?t.blobs=e.blobs.map(n=>V(n)):t.blobs=e.blobs),typeof e.data<"u"&&(t.data=e.data),typeof e.from<"u"&&(t.from=e.from),typeof e.gas<"u"&&(t.gas=R(e.gas)),typeof e.gasPrice<"u"&&(t.gasPrice=R(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(t.maxFeePerBlobGas=R(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=R(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=R(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=R(e.nonce)),typeof e.to<"u"&&(t.to=e.to),typeof e.type<"u"&&(t.type=Ni[e.type]),typeof e.value<"u"&&(t.value=R(e.value)),t}const Si=dn("transactionRequest",Ze);function Ci(e){return e.map(t=>({address:t.contractAddress,r:t.r,s:t.s,chainId:R(t.chainId),nonce:R(t.nonce),...typeof t.yParity<"u"?{yParity:R(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:R(t.v)}:{}}))}function M(e,t,n){const r=e[t.name];if(typeof r=="function")return r;const s=e[n];return typeof s=="function"?s:o=>t(e,o)}const ki=2n**16n-1n,fn=2n**256n-1n;function Ce(e){const{account:t,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:o}=e,a=t?Q(t):void 0;if(a&&!H(a.address))throw new X({address:a.address});if(o&&!H(o))throw new X({address:o});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new wi;if(r&&r>fn)throw new Ge({maxFeePerGas:r});if(s&&r&&s>r)throw new wt({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function dt(e){const t=await e.request({method:"eth_chainId"},{dedupe:!0});return le(t)}class Fi extends v{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class wr extends v{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class zi extends v{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${re(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class ro extends v{constructor({blockHash:t,blockNumber:n}){let r="Block";t&&(r=`Block at hash "${t}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const so={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function vr(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?le(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?le(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?so[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=Mi(e.authorizationList)),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof t.v=="bigint"){if(t.v===0n||t.v===27n)return 0;if(t.v===1n||t.v===28n)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),t.type==="legacy"&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),t.type==="eip2930"&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t.type==="eip1559"&&delete t.maxFeePerBlobGas,t}const Ri=dn("transaction",vr);function Mi(e){return e.map(t=>({contractAddress:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function xr(e){const t=(e.transactions??[]).map(n=>typeof n=="string"?n:vr(n));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}const Oi=dn("block",xr);async function me(e,{blockHash:t,blockNumber:n,blockTag:r,includeTransactions:s}={}){var l,d,f;const o=r??"latest",a=s??!1,i=n!==void 0?R(n):void 0;let c=null;if(t?c=await e.request({method:"eth_getBlockByHash",params:[t,a]},{dedupe:!0}):c=await e.request({method:"eth_getBlockByNumber",params:[i||o,a]},{dedupe:!!i}),!c)throw new ro({blockHash:t,blockNumber:n});return(((f=(d=(l=e.chain)==null?void 0:l.formatters)==null?void 0:d.block)==null?void 0:f.format)||xr)(c)}async function Er(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function Li(e,t){return oo(e,t)}async function oo(e,t){var o,a;const{block:n,chain:r=e.chain,request:s}=t||{};try{const i=((o=r==null?void 0:r.fees)==null?void 0:o.maxPriorityFeePerGas)??((a=r==null?void 0:r.fees)==null?void 0:a.defaultPriorityFee);if(typeof i=="function"){const u=n||await M(e,me,"getBlock")({}),l=await i({block:u,client:e,request:s});if(l===null)throw new Error;return l}if(typeof i<"u")return i;const c=await e.request({method:"eth_maxPriorityFeePerGas"});return q(c)}catch{const[i,c]=await Promise.all([n?Promise.resolve(n):M(e,me,"getBlock")({}),M(e,Er,"getGasPrice")({})]);if(typeof i.baseFeePerGas!="bigint")throw new wr;const u=c-i.baseFeePerGas;return u<0n?0n:u}}async function Di(e,t){return Jn(e,t)}async function Jn(e,t){var f,h;const{block:n,chain:r=e.chain,request:s,type:o="eip1559"}=t||{},a=await(async()=>{var b,m;return typeof((b=r==null?void 0:r.fees)==null?void 0:b.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:e,request:s}):((m=r==null?void 0:r.fees)==null?void 0:m.baseFeeMultiplier)??1.2})();if(a<1)throw new Fi;const c=10**(((f=a.toString().split(".")[1])==null?void 0:f.length)??0),u=b=>b*BigInt(Math.ceil(a*c))/BigInt(c),l=n||await M(e,me,"getBlock")({});if(typeof((h=r==null?void 0:r.fees)==null?void 0:h.estimateFeesPerGas)=="function"){const b=await r.fees.estimateFeesPerGas({block:n,client:e,multiply:u,request:s,type:o});if(b!==null)return b}if(o==="eip1559"){if(typeof l.baseFeePerGas!="bigint")throw new wr;const b=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await oo(e,{block:l,chain:r,request:s}),m=u(l.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??m+b,maxPriorityFeePerGas:b}}return{gasPrice:(s==null?void 0:s.gasPrice)??u(await M(e,Er,"getGasPrice")({}))}}class Gi extends v{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:a,gasPrice:i,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:f}){var b;const h=Dt({from:n==null?void 0:n.address,to:d,value:typeof f<"u"&&`${yr(f)} ${((b=s==null?void 0:s.nativeCurrency)==null?void 0:b.symbol)||"ETH"}`,data:o,gas:a,gasPrice:typeof i<"u"&&`${re(i)} gwei`,maxFeePerGas:typeof c<"u"&&`${re(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${re(u)} gwei`,nonce:l});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",h].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}function ji(e,{docsPath:t,...n}){const r=(()=>{const s=cn(e,n);return s instanceof Lt?e:s})();return new Gi(r,{docsPath:t,...n})}class qi extends v{constructor({address:t}){super(`State for account "${t}" is set multiple times.`,{name:"AccountStateConflictError"})}}class _i extends v{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function es(e){return e.reduce((t,{slot:n,value:r})=>`${t}        ${n}: ${r}
`,"")}function Ui(e){return e.reduce((t,{address:n,...r})=>{let s=`${t}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=es(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=es(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function ts(e){if(!(!e||e.length===0))return e.reduce((t,{slot:n,value:r})=>{if(n.length!==66)throw new Vr({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new Vr({size:r.length,targetSize:66,type:"hex"});return t[n]=r,t},{})}function Hi(e){const{balance:t,nonce:n,state:r,stateDiff:s,code:o}=e,a={};if(o!==void 0&&(a.code=o),t!==void 0&&(a.balance=R(t)),n!==void 0&&(a.nonce=R(n)),r!==void 0&&(a.state=ts(r)),s!==void 0){if(a.state)throw new _i;a.stateDiff=ts(s)}return a}function Pr(e){if(!e)return;const t={};for(const{address:n,...r}of e){if(!H(n,{strict:!1}))throw new X({address:n});if(t[n])throw new qi({address:n});t[n]=Hi(r)}return t}async function ao(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n?R(n):void 0,o=await e.request({method:"eth_getBalance",params:[t,s||r]});return BigInt(o)}async function Br(e,t){var s,o,a;const{account:n=e.account}=t,r=n?Q(n):void 0;try{let T=function(S){const{block:O,request:L,rpcStateOverride:$}=S;return e.request({method:"eth_estimateGas",params:$?[L,O??"latest",$]:O?[L,O]:[L]})};const{accessList:i,authorizationList:c,blobs:u,blobVersionedHashes:l,blockNumber:d,blockTag:f,data:h,gas:b,gasPrice:m,maxFeePerBlobGas:p,maxFeePerGas:y,maxPriorityFeePerGas:g,nonce:w,value:x,stateOverride:A,...P}=await ln(e,{...t,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),I=(d?R(d):void 0)||f,B=Pr(A),z=await(async()=>{if(P.to)return P.to;if(c&&c.length>0)return await Js({authorization:c[0]}).catch(()=>{throw new v("`to` is required. Could not infer from `authorizationList`")})})();Ce(t);const C=(a=(o=(s=e.chain)==null?void 0:s.formatters)==null?void 0:o.transactionRequest)==null?void 0:a.format,D=(C||Ze)({...un(P,{format:C}),from:r==null?void 0:r.address,accessList:i,authorizationList:c,blobs:u,blobVersionedHashes:l,data:h,gas:b,gasPrice:m,maxFeePerBlobGas:p,maxFeePerGas:y,maxPriorityFeePerGas:g,nonce:w,to:z,value:x});let N=BigInt(await T({block:I,request:D,rpcStateOverride:B}));if(c){const S=await ao(e,{address:D.from}),O=await Promise.all(c.map(async L=>{const{contractAddress:$}=L,G=await T({block:I,request:{authorizationList:void 0,data:h,from:r==null?void 0:r.address,to:$,value:R(S)},rpcStateOverride:B}).catch(()=>100000n);return 2n*BigInt(G)}));N+=O.reduce((L,$)=>L+$,0n)}return N}catch(i){throw ji(i,{...t,account:r,chain:e.chain})}}async function io(e,{address:t,blockTag:n="latest",blockNumber:r}){const s=await e.request({method:"eth_getTransactionCount",params:[t,r?R(r):n]},{dedupe:!!r});return le(s)}function Ir(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(o=>te(o)):e.blobs,s=[];for(const o of r)s.push(Uint8Array.from(t.blobToKzgCommitment(o)));return n==="bytes"?s:s.map(o=>V(o))}function Ar(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(a=>te(a)):e.blobs,s=typeof e.commitments[0]=="string"?e.commitments.map(a=>te(a)):e.commitments,o=[];for(let a=0;a<r.length;a++){const i=r[a],c=s[a];o.push(Uint8Array.from(t.computeBlobKzgProof(i,c)))}return n==="bytes"?o:o.map(a=>V(a))}function co(e,t){const n=t||"hex",r=$s(fe(e,{strict:!1})?Be(e):e);return n==="bytes"?r:k(r)}function Vi(e){const{commitment:t,version:n=1}=e,r=e.to??(typeof t=="string"?"hex":"bytes"),s=co(t,"bytes");return s.set([n],0),r==="bytes"?s:V(s)}function uo(e){const{commitments:t,version:n}=e,r=e.to??(typeof t[0]=="string"?"hex":"bytes"),s=[];for(const o of t)s.push(Vi({commitment:o,to:r,version:n}));return s}const ns=6,fo=32,Tr=4096,lo=fo*Tr,rs=lo*ns-1-1*Tr*ns,ho=1;class Zi extends v{constructor({maxSize:t,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class po extends v{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class Wi extends v{constructor({hash:t,size:n}){super(`Versioned hash "${t}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${n}`],name:"InvalidVersionedHashSizeError"})}}class Ki extends v{constructor({hash:t,version:n}){super(`Versioned hash "${t}" version is invalid.`,{metaMessages:[`Expected: ${ho}`,`Received: ${n}`],name:"InvalidVersionedHashVersionError"})}}function Yi(e){const t=e.to??(typeof e.data=="string"?"hex":"bytes"),n=typeof e.data=="string"?te(e.data):e.data,r=_(n);if(!r)throw new po;if(r>rs)throw new Zi({maxSize:rs,size:r});const s=[];let o=!0,a=0;for(;o;){const i=mr(new Uint8Array(lo));let c=0;for(;c<Tr;){const u=n.slice(a,a+(fo-1));if(i.pushByte(0),i.pushBytes(u),u.length<31){i.pushByte(128),o=!1;break}c++,a+=31}s.push(i)}return t==="bytes"?s.map(i=>i.bytes):s.map(i=>V(i.bytes))}function mo(e){const{data:t,kzg:n,to:r}=e,s=e.blobs??Yi({data:t,to:r}),o=e.commitments??Ir({blobs:s,kzg:n,to:r}),a=e.proofs??Ar({blobs:s,commitments:o,kzg:n,to:r}),i=[];for(let c=0;c<s.length;c++)i.push({blob:s[c],commitment:o[c],proof:a[c]});return i}function bo(e){if(e.type)return e.type;if(typeof e.authorizationList<"u")return"eip7702";if(typeof e.blobs<"u"||typeof e.blobVersionedHashes<"u"||typeof e.maxFeePerBlobGas<"u"||typeof e.sidecars<"u")return"eip4844";if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")return"eip1559";if(typeof e.gasPrice<"u")return typeof e.accessList<"u"?"eip2930":"legacy";throw new xi({transaction:e})}const yo=["blobVersionedHashes","chainId","fees","gas","nonce","type"],ss=new Map;async function ln(e,t){const{account:n=e.account,blobs:r,chain:s,gas:o,kzg:a,nonce:i,nonceManager:c,parameters:u=yo,type:l}=t,d=n&&Q(n),f={...t,...d?{from:d==null?void 0:d.address}:{}};let h;async function b(){return h||(h=await M(e,me,"getBlock")({blockTag:"latest"}),h)}let m;async function p(){return m||(s?s.id:typeof t.chainId<"u"?t.chainId:(m=await M(e,dt,"getChainId")({}),m))}if(u.includes("nonce")&&typeof i>"u"&&d)if(c){const y=await p();f.nonce=await c.consume({address:d.address,chainId:y,client:e})}else f.nonce=await M(e,io,"getTransactionCount")({address:d.address,blockTag:"pending"});if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&r&&a){const y=Ir({blobs:r,kzg:a});if(u.includes("blobVersionedHashes")){const g=uo({commitments:y,to:"hex"});f.blobVersionedHashes=g}if(u.includes("sidecars")){const g=Ar({blobs:r,commitments:y,kzg:a}),w=mo({blobs:r,commitments:y,proofs:g,to:"hex"});f.sidecars=w}}if(u.includes("chainId")&&(f.chainId=await p()),(u.includes("fees")||u.includes("type"))&&typeof l>"u")try{f.type=bo(f)}catch{let y=ss.get(e.uid);if(typeof y>"u"){const g=await b();y=typeof(g==null?void 0:g.baseFeePerGas)=="bigint",ss.set(e.uid,y)}f.type=y?"eip1559":"legacy"}if(u.includes("fees"))if(f.type!=="legacy"&&f.type!=="eip2930"){if(typeof f.maxFeePerGas>"u"||typeof f.maxPriorityFeePerGas>"u"){const y=await b(),{maxFeePerGas:g,maxPriorityFeePerGas:w}=await Jn(e,{block:y,chain:s,request:f});if(typeof t.maxPriorityFeePerGas>"u"&&t.maxFeePerGas&&t.maxFeePerGas<w)throw new zi({maxPriorityFeePerGas:w});f.maxPriorityFeePerGas=w,f.maxFeePerGas=g}}else{if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")throw new wr;if(typeof t.gasPrice>"u"){const y=await b(),{gasPrice:g}=await Jn(e,{block:y,chain:s,request:f,type:"legacy"});f.gasPrice=g}}return u.includes("gas")&&typeof o>"u"&&(f.gas=await M(e,Br,"estimateGas")({...f,account:d&&{address:d.address,type:"json-rpc"}})),Ce(f),delete f.parameters,f}async function $r(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}const kn=new on(128);async function Nr(e,t){var y,g,w,x;const{account:n=e.account,chain:r=e.chain,accessList:s,authorizationList:o,blobs:a,data:i,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:h,value:b,...m}=t;if(typeof n>"u")throw new ct({docsPath:"/docs/actions/wallet/sendTransaction"});const p=n?Q(n):null;try{Ce(t);const A=await(async()=>{if(t.to)return t.to;if(o&&o.length>0)return await Js({authorization:o[0]}).catch(()=>{throw new v("`to` is required. Could not infer from `authorizationList`.")})})();if((p==null?void 0:p.type)==="json-rpc"||p===null){let P;r!==null&&(P=await M(e,dt,"getChainId")({}),br({currentChainId:P,chain:r}));const E=(w=(g=(y=e.chain)==null?void 0:y.formatters)==null?void 0:g.transactionRequest)==null?void 0:w.format,B=(E||Ze)({...un(m,{format:E}),accessList:s,authorizationList:o,blobs:a,chainId:P,data:i,from:p==null?void 0:p.address,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:h,to:A,value:b}),z=kn.get(e.uid),C=z?"wallet_sendTransaction":"eth_sendTransaction";try{return await e.request({method:C,params:[B]},{retryCount:0})}catch(F){if(z===!1)throw F;const D=F;if(D.name==="InvalidInputRpcError"||D.name==="InvalidParamsRpcError"||D.name==="MethodNotFoundRpcError"||D.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[B]},{retryCount:0}).then(T=>(kn.set(e.uid,!0),T)).catch(T=>{const N=T;throw N.name==="MethodNotFoundRpcError"||N.name==="MethodNotSupportedRpcError"?(kn.set(e.uid,!1),D):N});throw D}}if((p==null?void 0:p.type)==="local"){const P=await M(e,ln,"prepareTransactionRequest")({account:p,accessList:s,authorizationList:o,blobs:a,chain:r,data:i,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:h,nonceManager:p.nonceManager,parameters:[...yo,"sidecars"],value:b,...m,to:A}),E=(x=r==null?void 0:r.serializers)==null?void 0:x.transaction,I=await p.signTransaction(P,{serializer:E});return await M(e,$r,"sendRawTransaction")({serializedTransaction:I})}throw(p==null?void 0:p.type)==="smart"?new Cn({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Cn({docsPath:"/docs/actions/wallet/sendTransaction",type:p==null?void 0:p.type})}catch(A){throw A instanceof Cn?A:$i(A,{...t,account:p,chain:t.chain||void 0})}}function Ji(e,t){const{abi:n,args:r,bytecode:s,...o}=t,a=an({abi:n,args:r,bytecode:s});return Nr(e,{...o,data:a})}const Xn=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],go=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],wo=[...go,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Xi=[...go,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],os=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],as=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],is=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function Qi(e,t={}){typeof t.size<"u"&&ce(e,{size:t.size});const n=V(e,t);return q(n,t)}function ec(e,t={}){let n=e;if(typeof t.size<"u"&&(ce(n,{size:t.size}),n=ie(n)),n.length>1||n[0]>1)throw new $a(n);return!!n[0]}function Ie(e,t={}){typeof t.size<"u"&&ce(e,{size:t.size});const n=V(e,t);return le(n,t)}function tc(e,t={}){let n=e;return typeof t.size<"u"&&(ce(n,{size:t.size}),n=ie(n,{dir:"right"})),new TextDecoder().decode(n)}function hn(e,t){const n=typeof t=="string"?te(t):t,r=mr(n);if(_(n)===0&&e.length>0)throw new Rt;if(_(t)&&_(t)<32)throw new Rs({data:typeof t=="string"?t:V(t),params:e,size:_(t)});let s=0;const o=[];for(let a=0;a<e.length;++a){const i=e[a];r.setPosition(s);const[c,u]=tt(r,i,{staticPosition:0});s+=u,o.push(c)}return o}function tt(e,t,{staticPosition:n}){const r=pr(t.type);if(r){const[s,o]=r;return rc(e,{...t,type:o},{length:s,staticPosition:n})}if(t.type==="tuple")return ic(e,t,{staticPosition:n});if(t.type==="address")return nc(e);if(t.type==="bool")return sc(e);if(t.type.startsWith("bytes"))return oc(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return ac(e,t);if(t.type==="string")return cc(e,{staticPosition:n});throw new Ka(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const cs=32,Qn=32;function nc(e){const t=e.readBytes(32);return[Mt(V(js(t,-20))),32]}function rc(e,t,{length:n,staticPosition:r}){if(!n){const a=Ie(e.readBytes(Qn)),i=r+a,c=i+cs;e.setPosition(i);const u=Ie(e.readBytes(cs)),l=Ft(t);let d=0;const f=[];for(let h=0;h<u;++h){e.setPosition(c+(l?h*32:d));const[b,m]=tt(e,t,{staticPosition:c});d+=m,f.push(b)}return e.setPosition(r+32),[f,32]}if(Ft(t)){const a=Ie(e.readBytes(Qn)),i=r+a,c=[];for(let u=0;u<n;++u){e.setPosition(i+u*32);const[l]=tt(e,t,{staticPosition:i});c.push(l)}return e.setPosition(r+32),[c,32]}let s=0;const o=[];for(let a=0;a<n;++a){const[i,c]=tt(e,t,{staticPosition:r+s});s+=c,o.push(i)}return[o,s]}function sc(e){return[ec(e.readBytes(32),{size:32}),32]}function oc(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const a=Ie(e.readBytes(32));e.setPosition(n+a);const i=Ie(e.readBytes(32));if(i===0)return e.setPosition(n+32),["0x",32];const c=e.readBytes(i);return e.setPosition(n+32),[V(c),32]}return[V(e.readBytes(Number.parseInt(s),32)),32]}function ac(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256"),s=e.readBytes(32);return[r>48?Qi(s,{signed:n}):Ie(s,{signed:n}),32]}function ic(e,t,{staticPosition:n}){const r=t.components.length===0||t.components.some(({name:a})=>!a),s=r?[]:{};let o=0;if(Ft(t)){const a=Ie(e.readBytes(Qn)),i=n+a;for(let c=0;c<t.components.length;++c){const u=t.components[c];e.setPosition(i+o);const[l,d]=tt(e,u,{staticPosition:i});o+=d,s[r?c:u==null?void 0:u.name]=l}return e.setPosition(n+32),[s,32]}for(let a=0;a<t.components.length;++a){const i=t.components[a],[c,u]=tt(e,i,{staticPosition:n});s[r?a:i==null?void 0:i.name]=c,o+=u}return[s,o]}function cc(e,{staticPosition:t}){const n=Ie(e.readBytes(32)),r=t+n;e.setPosition(r);const s=Ie(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const o=e.readBytes(s,32),a=tc(ie(o));return e.setPosition(t+32),[a,32]}function Ft(e){var r;const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return(r=e.components)==null?void 0:r.some(Ft);const n=pr(e.type);return!!(n&&Ft({...e,type:n[1]}))}const uc=e=>Y(Be(e));function dc(e){return uc(e)}function fc(e){let t=!0,n="",r=0,s="",o=!1;for(let a=0;a<e.length;a++){const i=e[a];if(["(",")",","].includes(i)&&(t=!0),i==="("&&r++,i===")"&&r--,!!t){if(r===0){if(i===" "&&["event","function",""].includes(s))s="";else if(s+=i,i===")"){o=!0;break}continue}if(i===" "){e[a-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=i,n+=i}}if(!o)throw new v("Unable to normalize signature.");return s}const lc=e=>{const t=typeof e=="string"?e:wa(e);return fc(t)};function vo(e){return dc(lc(e))}const pn=vo,Sr=e=>gt(vo(e),0,4);function jt(e){const{abi:t,args:n=[],name:r}=e,s=fe(r,{strict:!1}),o=t.filter(i=>s?i.type==="function"?Sr(i)===r:i.type==="event"?pn(i)===r:!1:"name"in i&&i.name===r);if(o.length===0)return;if(o.length===1)return o[0];let a;for(const i of o){if(!("inputs"in i))continue;if(!n||n.length===0){if(!i.inputs||i.inputs.length===0)return i;continue}if(!i.inputs||i.inputs.length===0||i.inputs.length!==n.length)continue;if(n.every((u,l)=>{const d="inputs"in i&&i.inputs[l];return d?er(u,d):!1})){if(a&&"inputs"in a&&a.inputs){const u=xo(i.inputs,a.inputs,n);if(u)throw new Va({abiItem:i,type:u[0]},{abiItem:a,type:u[1]})}a=i}}return a||o[0]}function er(e,t){const n=typeof e,r=t.type;switch(r){case"address":return H(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,o)=>er(Object.values(e)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>er(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function xo(e,t,n){for(const r in e){const s=e[r],o=t[r];if(s.type==="tuple"&&o.type==="tuple"&&"components"in s&&"components"in o)return xo(s.components,o.components,n[r]);const a=[s.type,o.type];if(a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?H(n[r],{strict:!1}):a.includes("address")&&a.includes("bytes")?H(n[r],{strict:!1}):!1)return a}}const Fn="/docs/contract/decodeFunctionResult";function We(e){const{abi:t,args:n,functionName:r,data:s}=e;let o=t[0];if(r){const i=jt({abi:t,args:n,name:r});if(!i)throw new nn(r,{docsPath:Fn});o=i}if(o.type!=="function")throw new nn(void 0,{docsPath:Fn});if(!o.outputs)throw new Ha(o.name,{docsPath:Fn});const a=hn(o.outputs,s);if(a&&a.length>1)return a;if(a&&a.length===1)return a[0]}const us="/docs/contract/encodeFunctionData";function hc(e){const{abi:t,args:n,functionName:r}=e;let s=t[0];if(r){const o=jt({abi:t,args:n,name:r});if(!o)throw new nn(r,{docsPath:us});s=o}if(s.type!=="function")throw new nn(void 0,{docsPath:us});return{abi:[s],functionName:Sr(Ae(s))}}function ue(e){const{args:t}=e,{abi:n,functionName:r}=(()=>{var i;return e.abi.length===1&&((i=e.functionName)!=null&&i.startsWith("0x"))?e:hc(e)})(),s=n[0],o=r,a="inputs"in s&&s.inputs?Ve(s.inputs,t??[]):void 0;return ge([o,a??"0x"])}function ft({blockNumber:e,chain:t,contract:n}){var s;const r=(s=t==null?void 0:t.contracts)==null?void 0:s[n];if(!r)throw new qn({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new qn({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const Eo={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},pc={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},mc={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function Po(e){const{abi:t,data:n}=e,r=gt(n,0,4);if(r==="0x")throw new Rt;const o=[...t||[],pc,mc].find(a=>a.type==="error"&&r===Sr(Ae(a)));if(!o)throw new Ms(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:o,args:"inputs"in o&&o.inputs&&o.inputs.length>0?hn(o.inputs,gt(n,4)):void 0,errorName:o.name}}function Bo({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map((s,o)=>`${r&&s.name?`${s.name}: `:""}${typeof t[o]=="object"?Z(t[o]):t[o]}`).join(", ")})`}class Io extends v{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:a,gasPrice:i,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:f,stateOverride:h}){var p;const b=n?Q(n):void 0;let m=Dt({from:b==null?void 0:b.address,to:d,value:typeof f<"u"&&`${yr(f)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:o,gas:a,gasPrice:typeof i<"u"&&`${re(i)} gwei`,maxFeePerGas:typeof c<"u"&&`${re(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${re(u)} gwei`,nonce:l});h&&(m+=`
${Ui(h)}`),super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Raw Call Arguments:",m].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class bc extends v{constructor(t,{abi:n,args:r,contractAddress:s,docsPath:o,functionName:a,sender:i}){const c=jt({abi:n,args:r,name:a}),u=c?Bo({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,l=c?Ae(c,{includeName:!0}):void 0,d=Dt({address:s&&Ii(s),function:l,args:u&&u!=="()"&&`${[...Array((a==null?void 0:a.length)??0).keys()].map(()=>" ").join("")}${u}`,sender:i});super(t.shortMessage||`An unknown error occurred while executing the contract function "${a}".`,{cause:t,docsPath:o,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=t,this.contractAddress=s,this.functionName=a,this.sender=i}}class tr extends v{constructor({abi:t,data:n,functionName:r,message:s}){let o,a,i,c;if(n&&n!=="0x")try{a=Po({abi:t,data:n});const{abiItem:l,errorName:d,args:f}=a;if(d==="Error")c=f[0];else if(d==="Panic"){const[h]=f;c=Eo[h]}else{const h=l?Ae(l,{includeName:!0}):void 0,b=l&&f?Bo({abiItem:l,args:f,includeFunctionName:!1,includeName:!1}):void 0;i=[h?`Error: ${h}`:"",b&&b!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${b}`:""]}}catch(l){o=l}else s&&(c=s);let u;o instanceof Ms&&(u=o.signature,i=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(c&&c!=="execution reverted"||u?[`The contract function "${r}" reverted with the following ${u?"signature":"reason"}:`,c||u].join(`
`):`The contract function "${r}" reverted.`,{cause:o,metaMessages:i,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=a,this.raw=n,this.reason=c,this.signature=u}}class yc extends v{constructor({functionName:t}){super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class gc extends v{constructor({factory:t}){super(`Deployment for counterfactual contract call failed${t?` for factory "${t}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class mn extends v{constructor({data:t,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}function Cr(e,t){var r,s,o,a,i,c;if(!(e instanceof v))return!1;const n=e.walk(u=>u instanceof tr);return n instanceof tr?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((o=n.data)==null?void 0:o.errorName)==="ResolverNotContract"||((a=n.data)==null?void 0:a.errorName)==="ResolverError"||((i=n.data)==null?void 0:i.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||t==="reverse"&&n.reason===Eo[50]):!1}function Ao(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;const t=`0x${e.slice(1,65)}`;return fe(t)?t:null}function tn(e){let t=new Uint8Array(32).fill(0);if(!e)return V(t);const n=e.split(".");for(let r=n.length-1;r>=0;r-=1){const s=Ao(n[r]),o=s?Be(s):Y(Me(n[r]),"bytes");t=Y(be([t,o]),"bytes")}return V(t)}function wc(e){return`[${e.slice(2)}]`}function vc(e){const t=new Uint8Array(32).fill(0);return e?Ao(e)||Y(Me(e)):V(t)}function bn(e){const t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);const n=new Uint8Array(Me(t).byteLength+2);let r=0;const s=t.split(".");for(let o=0;o<s.length;o++){let a=Me(s[o]);a.byteLength>255&&(a=Me(wc(vc(s[o])))),n[r]=a.length,n.set(a,r+1),r+=a.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const xc=3;function _e(e,{abi:t,address:n,args:r,docsPath:s,functionName:o,sender:a}){const i=e instanceof mn?e:e instanceof v?e.walk(b=>"data"in b)||e.walk():{},{code:c,data:u,details:l,message:d,shortMessage:f}=i,h=e instanceof Rt?new yc({functionName:o}):[xc,je.code].includes(c)&&(u||l||d||f)?new tr({abi:t,data:typeof u=="object"?u.data:u,functionName:o,message:i instanceof gr?l:f??d}):e;return new bc(h,{abi:t,args:r,contractAddress:n,docsPath:s,functionName:o,sender:a})}const Ec="0x82ad56cb",To="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Pc="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Bc="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";function $o(e,{docsPath:t,...n}){const r=(()=>{const s=cn(e,n);return s instanceof Lt?e:s})();return new Io(r,{docsPath:t,...n})}function No(){let e=()=>{},t=()=>{};return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}const zn=new Map;function So({fn:e,id:t,shouldSplitBatch:n,wait:r=0,sort:s}){const o=async()=>{const l=c();a();const d=l.map(({args:f})=>f);d.length!==0&&e(d).then(f=>{s&&Array.isArray(f)&&f.sort(s);for(let h=0;h<l.length;h++){const{resolve:b}=l[h];b==null||b([f[h],f])}}).catch(f=>{for(let h=0;h<l.length;h++){const{reject:b}=l[h];b==null||b(f)}})},a=()=>zn.delete(t),i=()=>c().map(({args:l})=>l),c=()=>zn.get(t)||[],u=l=>zn.set(t,[...c(),l]);return{flush:a,async schedule(l){const{promise:d,resolve:f,reject:h}=No();return(n==null?void 0:n([...i(),l]))&&o(),c().length>0?(u({args:l,resolve:f,reject:h}),d):(u({args:l,resolve:f,reject:h}),setTimeout(o,r),d)}}}async function qt(e,t){var C,F,D,T;const{account:n=e.account,batch:r=!!((C=e.batch)!=null&&C.multicall),blockNumber:s,blockTag:o="latest",accessList:a,blobs:i,code:c,data:u,factory:l,factoryData:d,gas:f,gasPrice:h,maxFeePerBlobGas:b,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:y,to:g,value:w,stateOverride:x,...A}=t,P=n?Q(n):void 0;if(c&&(l||d))throw new v("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(c&&g)throw new v("Cannot provide both `code` & `to` as parameters.");const E=c&&u,I=l&&d&&g&&u,B=E||I,z=E?Tc({code:c,data:u}):I?$c({data:u,factory:l,factoryData:d,to:g}):u;try{Ce(t);const S=(s?R(s):void 0)||o,O=Pr(x),L=(T=(D=(F=e.chain)==null?void 0:F.formatters)==null?void 0:D.transactionRequest)==null?void 0:T.format,G=(L||Ze)({...un(A,{format:L}),from:P==null?void 0:P.address,accessList:a,blobs:i,data:z,gas:f,gasPrice:h,maxFeePerBlobGas:b,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:y,to:B?void 0:g,value:w});if(r&&Ic({request:G})&&!O)try{return await Ac(e,{...G,blockNumber:s,blockTag:o})}catch(W){if(!(W instanceof Xs)&&!(W instanceof qn))throw W}const j=await e.request({method:"eth_call",params:O?[G,S,O]:[G,S]});return j==="0x"?{data:void 0}:{data:j}}catch(N){const S=Nc(N),{offchainLookup:O,offchainLookupSignature:L}=await Hs(async()=>{const{offchainLookup:$,offchainLookupSignature:G}=await Promise.resolve().then(()=>Bu);return{offchainLookup:$,offchainLookupSignature:G}},void 0);if(e.ccipRead!==!1&&(S==null?void 0:S.slice(0,10))===L&&g)return{data:await O(e,{data:S,to:g})};throw B&&(S==null?void 0:S.slice(0,10))==="0x101bb98d"?new gc({factory:l}):$o(N,{...t,account:P,chain:e.chain})}}function Ic({request:e}){const{data:t,to:n,...r}=e;return!(!t||t.startsWith(Ec)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Ac(e,t){var m;const{batchSize:n=1024,wait:r=0}=typeof((m=e.batch)==null?void 0:m.multicall)=="object"?e.batch.multicall:{},{blockNumber:s,blockTag:o="latest",data:a,multicallAddress:i,to:c}=t;let u=i;if(!u){if(!e.chain)throw new Xs;u=ft({blockNumber:s,chain:e.chain,contract:"multicall3"})}const d=(s?R(s):void 0)||o,{schedule:f}=So({id:`${e.uid}.${d}`,wait:r,shouldSplitBatch(p){return p.reduce((g,{data:w})=>g+(w.length-2),0)>n*2},fn:async p=>{const y=p.map(x=>({allowFailure:!0,callData:x.data,target:x.to})),g=ue({abi:Xn,args:[y],functionName:"aggregate3"}),w=await e.request({method:"eth_call",params:[{data:g,to:u},d]});return We({abi:Xn,args:[y],functionName:"aggregate3",data:w||"0x"})}}),[{returnData:h,success:b}]=await f({data:a,to:c});if(!b)throw new mn({data:h});return h==="0x"?{data:void 0}:{data:h}}function Tc(e){const{code:t,data:n}=e;return an({abi:Ts(["constructor(bytes, bytes)"]),bytecode:To,args:[t,n]})}function $c(e){const{data:t,factory:n,factoryData:r,to:s}=e;return an({abi:Ts(["constructor(address, bytes, address, bytes)"]),bytecode:Pc,args:[s,t,n,r]})}function Nc(e){var n;if(!(e instanceof v))return;const t=e.walk();return typeof(t==null?void 0:t.data)=="object"?(n=t.data)==null?void 0:n.data:t.data}async function Te(e,t){const{abi:n,address:r,args:s,functionName:o,...a}=t,i=ue({abi:n,args:s,functionName:o});try{const{data:c}=await M(e,qt,"call")({...a,data:i,to:r});return We({abi:n,args:s,functionName:o,data:c||"0x"})}catch(c){throw _e(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:o})}}async function Sc(e,{blockNumber:t,blockTag:n,coinType:r,name:s,gatewayUrls:o,strict:a,universalResolverAddress:i}){let c=i;if(!c){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");c=ft({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const u=ue({abi:as,functionName:"addr",...r!=null?{args:[tn(s),BigInt(r)]}:{args:[tn(s)]}}),l={address:c,abi:wo,functionName:"resolve",args:[k(bn(s)),u],blockNumber:t,blockTag:n},d=M(e,Te,"readContract"),f=o?await d({...l,args:[...l.args,o]}):await d(l);if(f[0]==="0x")return null;const h=We({abi:as,args:r!=null?[tn(s),BigInt(r)]:void 0,functionName:"addr",data:f[0]});return h==="0x"||ie(h)==="0x00"?null:h}catch(u){if(a)throw u;if(Cr(u,"resolve"))return null;throw u}}class Cc extends v{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}}class bt extends v{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}}class kr extends v{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class kc extends v{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const Fc=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,zc=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Rc=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,Mc=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function Oc(e){try{const t=await fetch(e,{method:"HEAD"});if(t.status===200){const n=t.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=e})}}function ds(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function Co({uri:e,gatewayUrls:t}){const n=Rc.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const r=ds(t==null?void 0:t.ipfs,"https://ipfs.io"),s=ds(t==null?void 0:t.arweave,"https://arweave.net"),o=e.match(Fc),{protocol:a,subpath:i,target:c,subtarget:u=""}=(o==null?void 0:o.groups)||{},l=a==="ipns:/"||i==="ipns/",d=a==="ipfs:/"||i==="ipfs/"||zc.test(e);if(e.startsWith("http")&&!l&&!d){let h=e;return t!=null&&t.arweave&&(h=e.replace(/https:\/\/arweave.net/g,t==null?void 0:t.arweave)),{uri:h,isOnChain:!1,isEncoded:!1}}if((l||d)&&c)return{uri:`${r}/${l?"ipns":"ipfs"}/${c}${u}`,isOnChain:!1,isEncoded:!1};if(a==="ar:/"&&c)return{uri:`${s}/${c}${u||""}`,isOnChain:!1,isEncoded:!1};let f=e.replace(Mc,"");if(f.startsWith("<svg")&&(f=`data:image/svg+xml;base64,${btoa(f)}`),f.startsWith("data:")||f.startsWith("{"))return{uri:f,isOnChain:!0,isEncoded:!1};throw new kr({uri:e})}function ko(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new Cc({data:e});return e.image||e.image_url||e.image_data}async function Lc({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then(s=>s.json());return await Fr({gatewayUrls:e,uri:ko(n)})}catch{throw new kr({uri:t})}}async function Fr({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:r}=Co({uri:t,gatewayUrls:e});if(r||await Oc(n))return n;throw new kr({uri:t})}function Dc(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=t.split("/"),[o,a]=n.split(":"),[i,c]=r.split(":");if(!o||o.toLowerCase()!=="eip155")throw new bt({reason:"Only EIP-155 supported"});if(!a)throw new bt({reason:"Chain ID not found"});if(!c)throw new bt({reason:"Contract address not found"});if(!s)throw new bt({reason:"Token ID not found"});if(!i)throw new bt({reason:"ERC namespace not found"});return{chainID:Number.parseInt(a),namespace:i.toLowerCase(),contractAddress:c,tokenID:s}}async function Gc(e,{nft:t}){if(t.namespace==="erc721")return Te(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return Te(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new kc({namespace:t.namespace})}async function jc(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?qc(e,{gatewayUrls:t,record:n}):Fr({uri:n,gatewayUrls:t})}async function qc(e,{gatewayUrls:t,record:n}){const r=Dc(n),s=await Gc(e,{nft:r}),{uri:o,isOnChain:a,isEncoded:i}=Co({uri:s,gatewayUrls:t});if(a&&(o.includes("data:application/json;base64,")||o.startsWith("{"))){const u=i?atob(o.replace("data:application/json;base64,","")):o,l=JSON.parse(u);return Fr({uri:ko(l),gatewayUrls:t})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),Lc({gatewayUrls:t,uri:o.replace(/(?:0x)?{id}/,c)})}async function Fo(e,{blockNumber:t,blockTag:n,name:r,key:s,gatewayUrls:o,strict:a,universalResolverAddress:i}){let c=i;if(!c){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");c=ft({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const u={address:c,abi:wo,functionName:"resolve",args:[k(bn(r)),ue({abi:os,functionName:"text",args:[tn(r),s]})],blockNumber:t,blockTag:n},l=M(e,Te,"readContract"),d=o?await l({...u,args:[...u.args,o]}):await l(u);if(d[0]==="0x")return null;const f=We({abi:os,functionName:"text",data:d[0]});return f===""?null:f}catch(u){if(a)throw u;if(Cr(u,"resolve"))return null;throw u}}async function _c(e,{blockNumber:t,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:o,strict:a,universalResolverAddress:i}){const c=await M(e,Fo,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:s,universalResolverAddress:i,gatewayUrls:o,strict:a});if(!c)return null;try{return await jc(e,{record:c,gatewayUrls:r})}catch{return null}}async function Uc(e,{address:t,blockNumber:n,blockTag:r,gatewayUrls:s,strict:o,universalResolverAddress:a}){let i=a;if(!i){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");i=ft({blockNumber:n,chain:e.chain,contract:"ensUniversalResolver"})}const c=`${t.toLowerCase().substring(2)}.addr.reverse`;try{const u={address:i,abi:Xi,functionName:"reverse",args:[k(bn(c))],blockNumber:n,blockTag:r},l=M(e,Te,"readContract"),[d,f]=s?await l({...u,args:[...u.args,s]}):await l(u);return t.toLowerCase()!==f.toLowerCase()?null:d}catch(u){if(o)throw u;if(Cr(u,"reverse"))return null;throw u}}async function Hc(e,{blockNumber:t,blockTag:n,name:r,universalResolverAddress:s}){let o=s;if(!o){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=ft({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}const[a]=await M(e,Te,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[k(bn(r))],blockNumber:t,blockTag:n});return a}async function zo(e,t){var p,y,g;const{account:n=e.account,blockNumber:r,blockTag:s="latest",blobs:o,data:a,gas:i,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:l,maxPriorityFeePerGas:d,to:f,value:h,...b}=t,m=n?Q(n):void 0;try{Ce(t);const x=(r?R(r):void 0)||s,A=(g=(y=(p=e.chain)==null?void 0:p.formatters)==null?void 0:y.transactionRequest)==null?void 0:g.format,E=(A||Ze)({...un(b,{format:A}),from:m==null?void 0:m.address,blobs:o,data:a,gas:i,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:l,maxPriorityFeePerGas:d,to:f,value:h}),I=await e.request({method:"eth_createAccessList",params:[E,x]});return{accessList:I.accessList,gasUsed:BigInt(I.gasUsed)}}catch(w){throw $o(w,{...t,account:m,chain:e.chain})}}function yn(e,{method:t}){var r,s;const n={};return e.transport.type==="fallback"&&((s=(r=e.transport).onResponse)==null||s.call(r,({method:o,response:a,status:i,transport:c})=>{i==="success"&&t===o&&(n[a]=c.request)})),o=>n[o]||e.request}async function Vc(e){const t=yn(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}class Zc extends v{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const fs="/docs/contract/encodeEventTopics";function _t(e){var c;const{abi:t,eventName:n,args:r}=e;let s=t[0];if(n){const u=jt({abi:t,name:n});if(!u)throw new Kr(n,{docsPath:fs});s=u}if(s.type!=="event")throw new Kr(void 0,{docsPath:fs});const o=Ae(s),a=pn(o);let i=[];if(r&&"inputs"in s){const u=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),l=Array.isArray(r)?r:Object.values(r).length>0?(u==null?void 0:u.map(d=>r[d.name]))??[]:[];l.length>0&&(i=(u==null?void 0:u.map((d,f)=>Array.isArray(l[f])?l[f].map((h,b)=>ls({param:d,value:l[f][b]})):typeof l[f]<"u"&&l[f]!==null?ls({param:d,value:l[f]}):null))??[])}return[a,...i]}function ls({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return Y(Be(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new Zc(e.type);return Ve([e],[t])}async function Ro(e,t){const{address:n,abi:r,args:s,eventName:o,fromBlock:a,strict:i,toBlock:c}=t,u=yn(e,{method:"eth_newFilter"}),l=o?_t({abi:r,args:s,eventName:o}):void 0,d=await e.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof a=="bigint"?R(a):a,toBlock:typeof c=="bigint"?R(c):c,topics:l}]});return{abi:r,args:s,eventName:o,id:d,request:u(d),strict:!!i,type:"event"}}async function Mo(e,{address:t,args:n,event:r,events:s,fromBlock:o,strict:a,toBlock:i}={}){const c=s??(r?[r]:void 0),u=yn(e,{method:"eth_newFilter"});let l=[];c&&(l=[c.flatMap(h=>_t({abi:[h],eventName:h.name,args:n}))],r&&(l=l[0]));const d=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof o=="bigint"?R(o):o,toBlock:typeof i=="bigint"?R(i):i,...l.length?{topics:l}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:o,id:d,request:u(d),strict:!!a,toBlock:i,type:"event"}}async function Oo(e){const t=yn(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}async function Wc(e,t){const{abi:n,address:r,args:s,functionName:o,dataSuffix:a,...i}=t,c=ue({abi:n,args:s,functionName:o});try{return await M(e,Br,"estimateGas")({data:`${c}${a?a.replace("0x",""):""}`,to:r,...i})}catch(u){const l=i.account?Q(i.account):void 0;throw _e(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:o,sender:l==null?void 0:l.address})}}async function Kc(e){const t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}const Yc=new Map,Jc=new Map;function Xc(e){const t=(s,o)=>({clear:()=>o.delete(s),get:()=>o.get(s),set:a=>o.set(s,a)}),n=t(e,Yc),r=t(e,Jc);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Qc(e,{cacheKey:t,cacheTime:n=Number.POSITIVE_INFINITY}){const r=Xc(t),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let o=r.promise.get();o||(o=e(),r.promise.set(o));try{const a=await o;return r.response.set({created:new Date,data:a}),a}finally{r.promise.clear()}}const eu=e=>`blockNumber.${e}`;async function Ut(e,{cacheTime:t=e.cacheTime}={}){const n=await Qc(()=>e.request({method:"eth_blockNumber"}),{cacheKey:eu(e.uid),cacheTime:t});return BigInt(n)}async function tu(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?R(n):void 0;let o;return t?o=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):o=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),le(o)}async function hs(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?R(n):void 0,o=await e.request({method:"eth_getCode",params:[t,s||r]},{dedupe:!!s});if(o!=="0x")return o}function gn(e,t){if(!H(e,{strict:!1}))throw new X({address:e});if(!H(t,{strict:!1}))throw new X({address:t});return e.toLowerCase()===t.toLowerCase()}const ps="/docs/contract/decodeEventLog";function zr(e){const{abi:t,data:n,strict:r,topics:s}=e,o=r??!0,[a,...i]=s;if(!a)throw new Ua({docsPath:ps});const c=t.length===1?t[0]:t.find(m=>m.type==="event"&&a===pn(Ae(m)));if(!(c&&"name"in c)||c.type!=="event")throw new Os(a,{docsPath:ps});const{name:u,inputs:l}=c,d=l==null?void 0:l.some(m=>!("name"in m&&m.name));let f=d?[]:{};const h=l.filter(m=>"indexed"in m&&m.indexed);for(let m=0;m<h.length;m++){const p=h[m],y=i[m];if(!y)throw new sn({abiItem:c,param:p});f[d?m:p.name||m]=nu({param:p,value:y})}const b=l.filter(m=>!("indexed"in m&&m.indexed));if(b.length>0){if(n&&n!=="0x")try{const m=hn(b,n);if(m)if(d)f=[...f,...m];else for(let p=0;p<b.length;p++)f[b[p].name]=m[p]}catch(m){if(o)throw m instanceof Rs||m instanceof Zs?new yt({abiItem:c,data:n,params:b,size:_(n)}):m}else if(o)throw new yt({abiItem:c,data:"0x",params:b,size:0})}return{eventName:u,args:Object.values(f).length>0?f:void 0}}function nu({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(hn([e],t)||[])[0]}function Rr(e){const{abi:t,args:n,logs:r,strict:s=!0}=e,o=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(a=>{var i;try{const c=t.find(l=>l.type==="event"&&a.topics[0]===pn(l));if(!c)return null;const u=zr({...a,abi:[c],strict:s});return o&&!o.includes(u.eventName)||!ru({args:u.args,inputs:c.inputs,matchArgs:n})?null:{...u,...a}}catch(c){let u,l;if(c instanceof Os)return null;if(c instanceof yt||c instanceof sn){if(s)return null;u=c.abiItem.name,l=(i=c.abiItem.inputs)==null?void 0:i.some(d=>!("name"in d&&d.name))}return{...a,args:l?[]:{},eventName:u}}}).filter(Boolean)}function ru(e){const{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function s(o,a,i){try{return o.type==="address"?gn(a,i):o.type==="string"||o.type==="bytes"?Y(Be(a))===i:a===i}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((o,a)=>{if(o==null)return!0;const i=n[a];return i?(Array.isArray(o)?o:[o]).some(u=>s(i,u,t[a])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([o,a])=>{if(a==null)return!0;const i=n.find(u=>u.name===o);return i?(Array.isArray(a)?a:[a]).some(u=>s(i,u,t[o])):!1}):!1}function ye(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function Mr(e,{address:t,blockHash:n,fromBlock:r,toBlock:s,event:o,events:a,args:i,strict:c}={}){const u=c??!1,l=a??(o?[o]:void 0);let d=[];l&&(d=[l.flatMap(m=>_t({abi:[m],eventName:m.name,args:a?void 0:i}))],o&&(d=d[0]));let f;n?f=await e.request({method:"eth_getLogs",params:[{address:t,topics:d,blockHash:n}]}):f=await e.request({method:"eth_getLogs",params:[{address:t,topics:d,fromBlock:typeof r=="bigint"?R(r):r,toBlock:typeof s=="bigint"?R(s):s}]});const h=f.map(b=>ye(b));return l?Rr({abi:l,args:i,logs:h,strict:u}):h}async function Lo(e,t){const{abi:n,address:r,args:s,blockHash:o,eventName:a,fromBlock:i,toBlock:c,strict:u}=t,l=a?jt({abi:n,name:a}):void 0,d=l?void 0:n.filter(f=>f.type==="event");return M(e,Mr,"getLogs")({address:r,args:s,blockHash:o,event:l,events:d,fromBlock:i,toBlock:c,strict:u})}class su extends v{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function ou(e,t){const{address:n,factory:r,factoryData:s}=t;try{const[o,a,i,c,u,l,d]=await M(e,Te,"readContract")({abi:au,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:a,version:i,chainId:Number(c),verifyingContract:u,salt:l},extensions:d,fields:o}}catch(o){const a=o;throw a.name==="ContractFunctionExecutionError"&&a.cause.name==="ContractFunctionZeroDataError"?new su({address:n}):a}}const au=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function iu(e){var t;return{baseFeePerGas:e.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:(t=e.reward)==null?void 0:t.map(n=>n.map(r=>BigInt(r)))}}async function cu(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const o=n?R(n):void 0,a=await e.request({method:"eth_feeHistory",params:[R(t),o||r,s]},{dedupe:!!o});return iu(a)}async function wn(e,{filter:t}){const n="strict"in t&&t.strict,r=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof r[0]=="string")return r;const s=r.map(o=>ye(o));return!("abi"in t)||!t.abi?s:Rr({abi:t.abi,logs:s,strict:n})}async function uu(e,{filter:t}){const n=t.strict??!1,s=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(o=>ye(o));return t.abi?Rr({abi:t.abi,logs:s,strict:n}):s}async function du(e,{address:t,blockNumber:n,blockTag:r="latest",slot:s}){const o=n!==void 0?R(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,s,o||r]})}async function Or(e,{blockHash:t,blockNumber:n,blockTag:r,hash:s,index:o}){var l,d,f;const a=r||"latest",i=n!==void 0?R(n):void 0;let c=null;if(s?c=await e.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):t?c=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,R(o)]},{dedupe:!0}):c=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[i||a,R(o)]},{dedupe:!!i}),!c)throw new to({blockHash:t,blockNumber:n,blockTag:a,hash:s,index:o});return(((f=(d=(l=e.chain)==null?void 0:l.formatters)==null?void 0:d.transaction)==null?void 0:f.format)||vr)(c)}async function fu(e,{hash:t,transactionReceipt:n}){const[r,s]=await Promise.all([M(e,Ut,"getBlockNumber")({}),t?M(e,Or,"getTransaction")({hash:t}):void 0]),o=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return o?r-o+1n:0n}const lu={"0x0":"reverted","0x1":"success"};function Do(e){const t={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(n=>ye(n)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?le(e.transactionIndex):null,status:e.status?lu[e.status]:null,type:e.type?so[e.type]||e.type:null};return e.blobGasPrice&&(t.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(t.blobGasUsed=BigInt(e.blobGasUsed)),t}const hu=dn("transactionReceipt",Do);async function nr(e,{hash:t}){var s,o,a;const n=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!n)throw new no({hash:t});return(((a=(o=(s=e.chain)==null?void 0:s.formatters)==null?void 0:o.transactionReceipt)==null?void 0:a.format)||Do)(n)}async function pu(e,t){var p;const{allowFailure:n=!0,batchSize:r,blockNumber:s,blockTag:o,multicallAddress:a,stateOverride:i}=t,c=t.contracts,u=r??(typeof((p=e.batch)==null?void 0:p.multicall)=="object"&&e.batch.multicall.batchSize||1024);let l=a;if(!l){if(!e.chain)throw new Error("client chain not configured. multicallAddress is required.");l=ft({blockNumber:s,chain:e.chain,contract:"multicall3"})}const d=[[]];let f=0,h=0;for(let y=0;y<c.length;y++){const{abi:g,address:w,args:x,functionName:A}=c[y];try{const P=ue({abi:g,args:x,functionName:A});h+=(P.length-2)/2,u>0&&h>u&&d[f].length>0&&(f++,h=(P.length-2)/2,d[f]=[]),d[f]=[...d[f],{allowFailure:!0,callData:P,target:w}]}catch(P){const E=_e(P,{abi:g,address:w,args:x,docsPath:"/docs/contract/multicall",functionName:A});if(!n)throw E;d[f]=[...d[f],{allowFailure:!0,callData:"0x",target:w}]}}const b=await Promise.allSettled(d.map(y=>M(e,Te,"readContract")({abi:Xn,address:l,args:[y],blockNumber:s,blockTag:o,functionName:"aggregate3",stateOverride:i}))),m=[];for(let y=0;y<b.length;y++){const g=b[y];if(g.status==="rejected"){if(!n)throw g.reason;for(let x=0;x<d[y].length;x++)m.push({status:"failure",error:g.reason,result:void 0});continue}const w=g.value;for(let x=0;x<w.length;x++){const{returnData:A,success:P}=w[x],{callData:E}=d[y][x],{abi:I,address:B,functionName:z,args:C}=c[m.length];try{if(E==="0x")throw new Rt;if(!P)throw new mn({data:A});const F=We({abi:I,args:C,data:A,functionName:z});m.push(n?{result:F,status:"success"}:F)}catch(F){const D=_e(F,{abi:I,address:B,args:C,docsPath:"/docs/contract/multicall",functionName:z});if(!n)throw D;m.push({error:D,result:void 0,status:"failure"})}}}if(m.length!==c.length)throw new v("multicall results mismatch");return m}async function rr(e,t){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:o,traceTransfers:a,validation:i}=t;try{const c=[];for(const f of s){const h=f.blockOverrides?va(f.blockOverrides):void 0,b=f.calls.map(p=>{const y=p,g=y.account?Q(y.account):void 0,w={...y,data:y.abi?ue(y):y.data,from:y.from??(g==null?void 0:g.address)};return Ce(w),Ze(w)}),m=f.stateOverrides?Pr(f.stateOverrides):void 0;c.push({blockOverrides:h,calls:b,stateOverrides:m})}const l=(n?R(n):void 0)||r;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:o,traceTransfers:a,validation:i},l]})).map((f,h)=>({...xr(f),calls:f.calls.map((b,m)=>{var z,C;const{abi:p,args:y,functionName:g,to:w}=s[h].calls[m],x=((z=b.error)==null?void 0:z.data)??b.returnData,A=BigInt(b.gasUsed),P=(C=b.logs)==null?void 0:C.map(F=>ye(F)),E=b.status==="0x1"?"success":"failure",I=p&&E==="success"?We({abi:p,data:x,functionName:g}):null,B=(()=>{var D;if(E==="success")return;let F;if(((D=b.error)==null?void 0:D.data)==="0x"?F=new Rt:b.error&&(F=new mn(b.error)),!!F)return _e(F,{abi:p??[],address:w,args:y,functionName:g??"<unknown>"})})();return{data:x,gasUsed:A,logs:P,status:E,...E==="success"?{result:I}:{error:B}}})}))}catch(c){const u=c,l=cn(u,{});throw l instanceof Lt?u:l}}const mu="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",pe="0x0000000000000000000000000000000000000000",Jt=new on(8192);function bu(e,{enabled:t=!0,id:n}){if(!t||!n)return e();if(Jt.get(n))return Jt.get(n);const r=e().finally(()=>Jt.delete(n));return Jt.set(n,r),r}async function sr(e){return new Promise(t=>setTimeout(t,e))}function or(e,{delay:t=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,o)=>{const a=async({count:i=0}={})=>{const c=async({error:u})=>{const l=typeof t=="function"?t({count:i,error:u}):t;l&&await sr(l),a({count:i+1})};try{const u=await e();s(u)}catch(u){if(i<n&&await r({count:i,error:u}))return c({error:u});o(u)}};a()})}function yu(e,t={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:o,retryDelay:a=150,retryCount:i=3,uid:c}={...t,...r},{method:u}=n;if((d=o==null?void 0:o.exclude)!=null&&d.includes(u))throw new Re(new Error("method not supported"),{method:u});if(o!=null&&o.include&&!o.include.includes(u))throw new Re(new Error("method not supported"),{method:u});const l=s?nt(`${c}.${Z(n)}`):void 0;return bu(()=>or(async()=>{try{return await e(n)}catch(f){const h=f;switch(h.code){case vt.code:throw new vt(h);case xt.code:throw new xt(h);case Et.code:throw new Et(h,{method:n.method});case Pt.code:throw new Pt(h);case je.code:throw new je(h);case qe.code:throw new qe(h);case Bt.code:throw new Bt(h);case It.code:throw new It(h);case At.code:throw new At(h);case Re.code:throw new Re(h,{method:n.method});case rt.code:throw new rt(h);case Tt.code:throw new Tt(h);case et.code:throw new et(h);case $t.code:throw new $t(h);case Nt.code:throw new Nt(h);case St.code:throw new St(h);case Ct.code:throw new Ct(h);case kt.code:throw new kt(h);case 5e3:throw new et(h);default:throw f instanceof v?f:new Ti(h)}}},{delay:({count:f,error:h})=>{var b;if(h&&h instanceof Oe){const m=(b=h==null?void 0:h.headers)==null?void 0:b.get("Retry-After");if(m!=null&&m.match(/\d/))return Number.parseInt(m)*1e3}return~~(1<<f)*a},retryCount:i,shouldRetry:({error:f})=>gu(f)}),{enabled:s,id:l})}}function gu(e){return"code"in e&&typeof e.code=="number"?e.code===-1||e.code===rt.code||e.code===je.code:e instanceof Oe&&e.status?e.status===403||e.status===408||e.status===413||e.status===429||e.status===500||e.status===502||e.status===503||e.status===504:!0}class wu extends v{constructor({callbackSelector:t,cause:n,data:r,extraData:s,sender:o,urls:a}){var i;super(n.shortMessage||"An error occurred while fetching for an offchain result.",{cause:n,metaMessages:[...n.metaMessages||[],(i=n.metaMessages)!=null&&i.length?"":[],"Offchain Gateway Call:",a&&["  Gateway URL(s):",...a.map(c=>`    ${Gt(c)}`)],`  Sender: ${o}`,`  Data: ${r}`,`  Callback selector: ${t}`,`  Extra data: ${s}`].flat(),name:"OffchainLookupError"})}}class vu extends v{constructor({result:t,url:n}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${Gt(n)}`,`Response: ${Z(t)}`],name:"OffchainLookupResponseMalformedError"})}}class xu extends v{constructor({sender:t,to:n}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${n}`,`OffchainLookup sender address: ${t}`],name:"OffchainLookupSenderMismatchError"})}}const Eu="0x556f1830",Go={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function Pu(e,{blockNumber:t,blockTag:n,data:r,to:s}){const{args:o}=Po({data:r,abi:[Go]}),[a,i,c,u,l]=o,{ccipRead:d}=e,f=d&&typeof(d==null?void 0:d.request)=="function"?d.request:jo;try{if(!gn(s,a))throw new xu({sender:a,to:s});const h=await f({data:c,sender:a,urls:i}),{data:b}=await qt(e,{blockNumber:t,blockTag:n,data:be([u,Ve([{type:"bytes"},{type:"bytes"}],[h,l])]),to:s});return b}catch(h){throw new wu({callbackSelector:u,cause:h,data:r,extraData:l,sender:a,urls:i})}}async function jo({data:e,sender:t,urls:n}){var s;let r=new Error("An unknown error occurred.");for(let o=0;o<n.length;o++){const a=n[o],i=a.includes("{data}")?"GET":"POST",c=i==="POST"?{data:e,sender:t}:void 0,u=i==="POST"?{"Content-Type":"application/json"}:{};try{const l=await fetch(a.replace("{sender}",t).replace("{data}",e),{body:JSON.stringify(c),headers:u,method:i});let d;if((s=l.headers.get("Content-Type"))!=null&&s.startsWith("application/json")?d=(await l.json()).data:d=await l.text(),!l.ok){r=new Oe({body:c,details:d!=null&&d.error?Z(d.error):l.statusText,headers:l.headers,status:l.status,url:a});continue}if(!fe(d)){r=new vu({result:d,url:a});continue}return d}catch(l){r=new Oe({body:c,details:l.message,url:a})}}throw r}const Bu=Object.freeze(Object.defineProperty({__proto__:null,ccipRequest:jo,offchainLookup:Pu,offchainLookupAbiItem:Go,offchainLookupSignature:Eu},Symbol.toStringTag,{value:"Module"}));function qo(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}function Iu(e,{errorInstance:t=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,o)=>{(async()=>{let a;try{const i=new AbortController;n>0&&(a=setTimeout(()=>{r?i.abort():o(t)},n)),s(await e({signal:(i==null?void 0:i.signal)||null}))}catch(i){(i==null?void 0:i.name)==="AbortError"&&o(t),o(i)}finally{clearTimeout(a)}})()})}function Au(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const ms=Au();function Tu(e,t={}){return{async request(n){var d;const{body:r,onRequest:s=t.onRequest,onResponse:o=t.onResponse,timeout:a=t.timeout??1e4}=n,i={...t.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:u,signal:l}=i;try{const f=await Iu(async({signal:b})=>{const m={...i,body:Array.isArray(r)?Z(r.map(w=>({jsonrpc:"2.0",id:w.id??ms.take(),...w}))):Z({jsonrpc:"2.0",id:r.id??ms.take(),...r}),headers:{"Content-Type":"application/json",...c},method:u||"POST",signal:l||(a>0?b:null)},p=new Request(e,m),y=await(s==null?void 0:s(p,m))??{...m,url:e};return await fetch(y.url??e,y)},{errorInstance:new Qr({body:r,url:e}),timeout:a,signal:!0});o&&await o(f);let h;if((d=f.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))h=await f.json();else{h=await f.text();try{h=JSON.parse(h||"{}")}catch(b){if(f.ok)throw b;h={error:h}}}if(!f.ok)throw new Oe({body:r,details:Z(h.error)||f.statusText,headers:f.headers,status:f.status,url:e});return h}catch(f){throw f instanceof Oe||f instanceof Qr?f:new Oe({body:r,cause:f,url:e})}}}}class $u extends v{constructor({domain:t}){super(`Invalid domain "${Z(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Nu extends v{constructor({primaryType:t,types:n}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Su extends v{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function _o(e){const{domain:t={},message:n,primaryType:r}=e,s={EIP712Domain:Ko({domain:t}),...e.types};Wo({domain:t,message:n,primaryType:r,types:s});const o=["0x1901"];return t&&o.push(Cu({domain:t,types:s})),r!=="EIP712Domain"&&o.push(Uo({data:n,primaryType:r,types:s})),Y(be(o))}function Cu({domain:e,types:t}){return Uo({data:e,primaryType:"EIP712Domain",types:t})}function Uo({data:e,primaryType:t,types:n}){const r=Ho({data:e,primaryType:t,types:n});return Y(r)}function Ho({data:e,primaryType:t,types:n}){const r=[{type:"bytes32"}],s=[ku({primaryType:t,types:n})];for(const o of n[t]){const[a,i]=Zo({types:n,name:o.name,type:o.type,value:e[o.name]});r.push(a),s.push(i)}return Ve(r,s)}function ku({primaryType:e,types:t}){const n=k(Fu({primaryType:e,types:t}));return Y(n)}function Fu({primaryType:e,types:t}){let n="";const r=Vo({primaryType:e,types:t});r.delete(e);const s=[e,...Array.from(r).sort()];for(const o of s)n+=`${o}(${t[o].map(({name:a,type:i})=>`${i} ${a}`).join(",")})`;return n}function Vo({primaryType:e,types:t},n=new Set){const r=e.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||t[s]===void 0)return n;n.add(s);for(const o of t[s])Vo({primaryType:o.type,types:t},n);return n}function Zo({types:e,name:t,type:n,value:r}){if(e[n]!==void 0)return[{type:"bytes32"},Y(Ho({data:r,primaryType:n,types:e}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},Y(r)];if(n==="string")return[{type:"bytes32"},Y(k(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),o=r.map(a=>Zo({name:t,type:s,types:e,value:a}));return[{type:"bytes32"},Y(Ve(o.map(([a])=>a),o.map(([,a])=>a)))]}return[{type:n},r]}function zu(e){const{domain:t,message:n,primaryType:r,types:s}=e,o=(c,u)=>{const l={...u};for(const d of c){const{name:f,type:h}=d;h==="address"&&(l[f]=l[f].toLowerCase())}return l},a=s.EIP712Domain?t?o(s.EIP712Domain,t):{}:{},i=(()=>{if(r!=="EIP712Domain")return o(s[r],n)})();return Z({domain:a,message:i,primaryType:r,types:s})}function Wo(e){const{domain:t,message:n,primaryType:r,types:s}=e,o=(a,i)=>{for(const c of a){const{name:u,type:l}=c,d=i[u],f=l.match(_s);if(f&&(typeof d=="number"||typeof d=="bigint")){const[m,p,y]=f;R(d,{signed:p==="int",size:Number.parseInt(y)/8})}if(l==="address"&&typeof d=="string"&&!H(d))throw new X({address:d});const h=l.match(ei);if(h){const[m,p]=h;if(p&&_(d)!==Number.parseInt(p))throw new Za({expectedSize:Number.parseInt(p),givenSize:_(d)})}const b=s[l];b&&(Ru(l),o(b,d))}};if(s.EIP712Domain&&t){if(typeof t!="object")throw new $u({domain:t});o(s.EIP712Domain,t)}if(r!=="EIP712Domain")if(s[r])o(s[r],n);else throw new Nu({primaryType:r,types:s})}function Ko({domain:e}){return[typeof(e==null?void 0:e.name)=="string"&&{name:"name",type:"string"},(e==null?void 0:e.version)&&{name:"version",type:"string"},(typeof(e==null?void 0:e.chainId)=="number"||typeof(e==null?void 0:e.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(e==null?void 0:e.verifyingContract)&&{name:"verifyingContract",type:"address"},(e==null?void 0:e.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Ru(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new Su({type:e})}const Mu=`Ethereum Signed Message:
`;function Ou(e){const t=typeof e=="string"?nt(e):typeof e.raw=="string"?e.raw:V(e.raw),n=nt(`${Mu}${_(t)}`);return be([n,t])}function Lr(e,t){return Y(Ou(e),t)}const Yo="0x6492649264926492649264926492649264926492649264926492649264926492";function Lu(e){return qs(e,-32)===Yo}function Du(e){const{address:t,data:n,signature:r,to:s="hex"}=e,o=ge([Ve([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,n,r]),Yo]);return s==="hex"?o:te(o)}function Gu(e){const{authorizationList:t}=e;if(t)for(const n of t){const{contractAddress:r,chainId:s}=n;if(!H(r))throw new X({address:r});if(s<0)throw new Ot({chainId:s})}Dr(e)}function ju(e){const{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new po;for(const n of t){const r=_(n),s=le(gt(n,0,1));if(r!==32)throw new Wi({hash:n,size:r});if(s!==ho)throw new Ki({hash:n,version:s})}}Dr(e)}function Dr(e){const{chainId:t,maxPriorityFeePerGas:n,maxFeePerGas:r,to:s}=e;if(t<=0)throw new Ot({chainId:t});if(s&&!H(s))throw new X({address:s});if(r&&r>fn)throw new Ge({maxFeePerGas:r});if(n&&r&&n>r)throw new wt({maxFeePerGas:r,maxPriorityFeePerGas:n})}function qu(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:o}=e;if(t<=0)throw new Ot({chainId:t});if(o&&!H(o))throw new X({address:o});if(n||s)throw new v("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>fn)throw new Ge({maxFeePerGas:r})}function _u(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:o}=e;if(o&&!H(o))throw new X({address:o});if(typeof t<"u"&&t<=0)throw new Ot({chainId:t});if(n||s)throw new v("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>fn)throw new Ge({maxFeePerGas:r})}function Uu(e){if(!e||e.length===0)return[];const t=[];for(const n of e){const{contractAddress:r,chainId:s,nonce:o,...a}=n;t.push([s?k(s):"0x",r,o?k(o):"0x",...Ht({},a)])}return t}function vn(e){if(!e||e.length===0)return[];const t=[];for(let n=0;n<e.length;n++){const{address:r,storageKeys:s}=e[n];for(let o=0;o<s.length;o++)if(s[o].length-2!==64)throw new Ei({storageKey:s[o]});if(!H(r,{strict:!1}))throw new X({address:r});t.push([r,s])}return t}function Jo(e,t){const n=bo(e);return n==="eip1559"?Zu(e,t):n==="eip2930"?Wu(e,t):n==="eip4844"?Vu(e,t):n==="eip7702"?Hu(e,t):Ku(e,t)}function Hu(e,t){const{authorizationList:n,chainId:r,gas:s,nonce:o,to:a,value:i,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:l,data:d}=e;Gu(e);const f=vn(l),h=Uu(n);return ge(["0x04",Ne([k(r),o?k(o):"0x",u?k(u):"0x",c?k(c):"0x",s?k(s):"0x",a??"0x",i?k(i):"0x",d??"0x",f,h,...Ht(e,t)])])}function Vu(e,t){const{chainId:n,gas:r,nonce:s,to:o,value:a,maxFeePerBlobGas:i,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:l,data:d}=e;ju(e);let f=e.blobVersionedHashes,h=e.sidecars;if(e.blobs&&(typeof f>"u"||typeof h>"u")){const w=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(P=>V(P)),x=e.kzg,A=Ir({blobs:w,kzg:x});if(typeof f>"u"&&(f=uo({commitments:A})),typeof h>"u"){const P=Ar({blobs:w,commitments:A,kzg:x});h=mo({blobs:w,commitments:A,proofs:P})}}const b=vn(l),m=[k(n),s?k(s):"0x",u?k(u):"0x",c?k(c):"0x",r?k(r):"0x",o??"0x",a?k(a):"0x",d??"0x",b,i?k(i):"0x",f??[],...Ht(e,t)],p=[],y=[],g=[];if(h)for(let w=0;w<h.length;w++){const{blob:x,commitment:A,proof:P}=h[w];p.push(x),y.push(A),g.push(P)}return ge(["0x03",Ne(h?[m,p,y,g]:m)])}function Zu(e,t){const{chainId:n,gas:r,nonce:s,to:o,value:a,maxFeePerGas:i,maxPriorityFeePerGas:c,accessList:u,data:l}=e;Dr(e);const d=vn(u),f=[k(n),s?k(s):"0x",c?k(c):"0x",i?k(i):"0x",r?k(r):"0x",o??"0x",a?k(a):"0x",l??"0x",d,...Ht(e,t)];return ge(["0x02",Ne(f)])}function Wu(e,t){const{chainId:n,gas:r,data:s,nonce:o,to:a,value:i,accessList:c,gasPrice:u}=e;qu(e);const l=vn(c),d=[k(n),o?k(o):"0x",u?k(u):"0x",r?k(r):"0x",a??"0x",i?k(i):"0x",s??"0x",l,...Ht(e,t)];return ge(["0x01",Ne(d)])}function Ku(e,t){const{chainId:n=0,gas:r,data:s,nonce:o,to:a,value:i,gasPrice:c}=e;_u(e);let u=[o?k(o):"0x",c?k(c):"0x",r?k(r):"0x",a??"0x",i?k(i):"0x",s??"0x"];if(t){const l=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+t.v-27n);const h=27n+(t.v===27n?0n:1n);if(t.v!==h)throw new vi({v:t.v});return h})(),d=ie(t.r),f=ie(t.s);u=[...u,k(l),d==="0x00"?"0x":d,f==="0x00"?"0x":f]}else n>0&&(u=[...u,k(n),"0x","0x"]);return Ne(u)}function Ht(e,t){const n=t??e,{v:r,yParity:s}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof r>"u"&&typeof s>"u")return[];const o=ie(n.r),a=ie(n.s);return[typeof s=="number"?s?k(1):"0x":r===0n?"0x":r===1n?k(1):r===27n?"0x":k(1),o==="0x00"?"0x":o,a==="0x00"?"0x":a]}class Yu extends v{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function Ju(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new Yu({value:e});let[n,r="0"]=e.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),t===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>t){const[o,a,i]=[r.slice(0,t-1),r.slice(t-1,t),r.slice(t)],c=Math.round(+`${a}.${i}`);c>9?r=`${BigInt(o)+BigInt(1)}0`.padStart(o.length+1,"0"):r=`${o}${c}`,r.length>t&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,t)}else r=r.padEnd(t,"0");return BigInt(`${s?"-":""}${n}${r}`)}function Ff(e,t="wei"){return Ju(e,Qs[t])}const Xu="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function Qu(e,t){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:o,traceAssetChanges:a,traceTransfers:i,validation:c}=t,u=t.account?Q(t.account):void 0;if(a&&!u)throw new v("`account` is required when `traceAssetChanges` is true");const l=u?xa(Pa("constructor(bytes, bytes)"),{bytecode:To,args:[Xu,Ea(Je("function getBalance(address)"),[u.address])]}):void 0,d=a?await Promise.all(t.calls.map(async $=>{if(!$.data&&!$.abi)return;const{accessList:G}=await zo(e,{account:u.address,...$,data:$.abi?ue($):$.data});return G.map(({address:j,storageKeys:W})=>W.length>0?j:null)})).then($=>$.flat().filter(Boolean)):[],f=o==null?void 0:o.map($=>$.address===(u==null?void 0:u.address)?{...$,nonce:0}:$),h=await rr(e,{blockNumber:n,blockTag:r,blocks:[...a?[{calls:[{data:l}],stateOverrides:o},{calls:d.map(($,G)=>({abi:[Je("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:$,from:pe,nonce:G})),stateOverrides:[{address:pe,nonce:0}]}]:[],{calls:[...s,{}].map(($,G)=>({...$,from:u==null?void 0:u.address,nonce:G})),stateOverrides:f},...a?[{calls:[{data:l}]},{calls:d.map(($,G)=>({abi:[Je("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:$,from:pe,nonce:G})),stateOverrides:[{address:pe,nonce:0}]},{calls:d.map(($,G)=>({to:$,abi:[Je("function decimals() returns (uint256)")],functionName:"decimals",from:pe,nonce:G})),stateOverrides:[{address:pe,nonce:0}]},{calls:d.map(($,G)=>({to:$,abi:[Je("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:pe,nonce:G})),stateOverrides:[{address:pe,nonce:0}]},{calls:d.map(($,G)=>({to:$,abi:[Je("function symbol() returns (string)")],functionName:"symbol",from:pe,nonce:G})),stateOverrides:[{address:pe,nonce:0}]}]:[]],traceTransfers:i,validation:c}),b=a?h[2]:h[0],[m,p,,y,g,w,x,A]=a?h:[],{calls:P,...E}=b,I=P.slice(0,-1)??[],B=(m==null?void 0:m.calls)??[],z=(p==null?void 0:p.calls)??[],C=[...B,...z].map($=>$.status==="success"?q($.data):null),F=(y==null?void 0:y.calls)??[],D=(g==null?void 0:g.calls)??[],T=[...F,...D].map($=>$.status==="success"?q($.data):null),N=((w==null?void 0:w.calls)??[]).map($=>$.status==="success"?$.result:null),S=((A==null?void 0:A.calls)??[]).map($=>$.status==="success"?$.result:null),O=((x==null?void 0:x.calls)??[]).map($=>$.status==="success"?$.result:null),L=[];for(const[$,G]of T.entries()){const j=C[$];if(typeof G!="bigint"||typeof j!="bigint")continue;const W=N[$-1],oe=S[$-1],ee=O[$-1],we=$===0?{address:mu,decimals:18,symbol:"ETH"}:{address:d[$-1],decimals:ee||W?Number(W??1):void 0,symbol:oe??void 0};L.some(he=>he.token.address===we.address)||L.push({token:we,value:{pre:j,post:G,diff:G-j}})}return{assetChanges:L,block:E,results:I}}const Rn=new Map,bs=new Map;let ed=0;function Se(e,t,n){const r=++ed,s=()=>Rn.get(e)||[],o=()=>{const l=s();Rn.set(e,l.filter(d=>d.id!==r))},a=()=>{const l=s();if(!l.some(f=>f.id===r))return;const d=bs.get(e);l.length===1&&d&&d(),o()},i=s();if(Rn.set(e,[...i,{id:r,fns:t}]),i&&i.length>0)return a;const c={};for(const l in t)c[l]=(...d)=>{var h,b;const f=s();if(f.length!==0)for(const m of f)(b=(h=m.fns)[l])==null||b.call(h,...d)};const u=n(c);return typeof u=="function"&&bs.set(e,u),a}function Vt(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let s=!0;const o=()=>s=!1;return(async()=>{let i;t&&(i=await e({unpoll:o}));const c=await(n==null?void 0:n(i))??r;await sr(c);const u=async()=>{s&&(await e({unpoll:o}),await sr(r),u())};u()})(),o}function td(e,{blockTag:t="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:o,includeTransactions:a,poll:i,pollingInterval:c=e.pollingInterval}){const u=typeof i<"u"?i:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"),l=a??!1;let d;return u?(()=>{const b=Z(["watchBlocks",e.uid,t,n,r,l,c]);return Se(b,{onBlock:s,onError:o},m=>Vt(async()=>{var p;try{const y=await M(e,me,"getBlock")({blockTag:t,includeTransactions:l});if(y.number&&(d!=null&&d.number)){if(y.number===d.number)return;if(y.number-d.number>1&&n)for(let g=(d==null?void 0:d.number)+1n;g<y.number;g++){const w=await M(e,me,"getBlock")({blockNumber:g,includeTransactions:l});m.onBlock(w,d),d=w}}(!(d!=null&&d.number)||t==="pending"&&!(y!=null&&y.number)||y.number&&y.number>d.number)&&(m.onBlock(y,d),d=y)}catch(y){(p=m.onError)==null||p.call(m,y)}},{emitOnBegin:r,interval:c}))})():(()=>{let b=!0,m=!0,p=()=>b=!1;return(async()=>{try{r&&M(e,me,"getBlock")({blockTag:t,includeTransactions:l}).then(w=>{b&&m&&(s(w,void 0),m=!1)});const y=(()=>{if(e.transport.type==="fallback"){const w=e.transport.transports.find(x=>x.config.type==="webSocket");return w?w.value:e.transport}return e.transport})(),{unsubscribe:g}=await y.subscribe({params:["newHeads"],async onData(w){if(!b)return;const x=await M(e,me,"getBlock")({blockNumber:w.blockNumber,includeTransactions:l}).catch(()=>{});b&&(s(x,d),m=!1,d=x)},onError(w){o==null||o(w)}});p=g,b||p()}catch(y){o==null||o(y)}})(),()=>p()})()}function Xo(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:o,pollingInterval:a=e.pollingInterval}){const i=typeof o<"u"?o:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket");let c;return i?(()=>{const d=Z(["watchBlockNumber",e.uid,t,n,a]);return Se(d,{onBlockNumber:r,onError:s},f=>Vt(async()=>{var h;try{const b=await M(e,Ut,"getBlockNumber")({cacheTime:0});if(c){if(b===c)return;if(b-c>1&&n)for(let m=c+1n;m<b;m++)f.onBlockNumber(m,c),c=m}(!c||b>c)&&(f.onBlockNumber(b,c),c=b)}catch(b){(h=f.onError)==null||h.call(f,b)}},{emitOnBegin:t,interval:a}))})():(()=>{const d=Z(["watchBlockNumber",e.uid,t,n]);return Se(d,{onBlockNumber:r,onError:s},f=>{let h=!0,b=()=>h=!1;return(async()=>{try{const m=(()=>{if(e.transport.type==="fallback"){const y=e.transport.transports.find(g=>g.config.type==="webSocket");return y?y.value:e.transport}return e.transport})(),{unsubscribe:p}=await m.subscribe({params:["newHeads"],onData(y){var w;if(!h)return;const g=q((w=y.result)==null?void 0:w.number);f.onBlockNumber(g,c),c=g},onError(y){var g;(g=f.onError)==null||g.call(f,y)}});b=p,h||b()}catch(m){s==null||s(m)}})(),()=>b()})})()}async function xn(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function nd(e,{address:t,args:n,batch:r=!0,event:s,events:o,fromBlock:a,onError:i,onLogs:c,poll:u,pollingInterval:l=e.pollingInterval,strict:d}){const f=typeof u<"u"?u:typeof a=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"),h=d??!1;return f?(()=>{const p=Z(["watchEvent",t,n,r,e.uid,s,l,a]);return Se(p,{onLogs:c,onError:i},y=>{let g;a!==void 0&&(g=a-1n);let w,x=!1;const A=Vt(async()=>{var P;if(!x){try{w=await M(e,Mo,"createEventFilter")({address:t,args:n,event:s,events:o,strict:h,fromBlock:a})}catch{}x=!0;return}try{let E;if(w)E=await M(e,wn,"getFilterChanges")({filter:w});else{const I=await M(e,Ut,"getBlockNumber")({});g&&g!==I?E=await M(e,Mr,"getLogs")({address:t,args:n,event:s,events:o,fromBlock:g+1n,toBlock:I}):E=[],g=I}if(E.length===0)return;if(r)y.onLogs(E);else for(const I of E)y.onLogs([I])}catch(E){w&&E instanceof qe&&(x=!1),(P=y.onError)==null||P.call(y,E)}},{emitOnBegin:!0,interval:l});return async()=>{w&&await M(e,xn,"uninstallFilter")({filter:w}),A()}})})():(()=>{let p=!0,y=()=>p=!1;return(async()=>{try{const g=(()=>{if(e.transport.type==="fallback"){const P=e.transport.transports.find(E=>E.config.type==="webSocket");return P?P.value:e.transport}return e.transport})(),w=o??(s?[s]:void 0);let x=[];w&&(x=[w.flatMap(E=>_t({abi:[E],eventName:E.name,args:n}))],s&&(x=x[0]));const{unsubscribe:A}=await g.subscribe({params:["logs",{address:t,topics:x}],onData(P){var I;if(!p)return;const E=P.result;try{const{eventName:B,args:z}=zr({abi:w??[],data:E.data,topics:E.topics,strict:h}),C=ye(E,{args:z,eventName:B});c([C])}catch(B){let z,C;if(B instanceof yt||B instanceof sn){if(d)return;z=B.abiItem.name,C=(I=B.abiItem.inputs)==null?void 0:I.some(D=>!("name"in D&&D.name))}const F=ye(E,{args:C?[]:{},eventName:z});c([F])}},onError(P){i==null||i(P)}});y=A,p||y()}catch(g){i==null||i(g)}})(),()=>y()})()}function rd(e,{batch:t=!0,onError:n,onTransactions:r,poll:s,pollingInterval:o=e.pollingInterval}){return(typeof s<"u"?s:e.transport.type!=="webSocket")?(()=>{const u=Z(["watchPendingTransactions",e.uid,t,o]);return Se(u,{onTransactions:r,onError:n},l=>{let d;const f=Vt(async()=>{var h;try{if(!d)try{d=await M(e,Oo,"createPendingTransactionFilter")({});return}catch(m){throw f(),m}const b=await M(e,wn,"getFilterChanges")({filter:d});if(b.length===0)return;if(t)l.onTransactions(b);else for(const m of b)l.onTransactions([m])}catch(b){(h=l.onError)==null||h.call(l,b)}},{emitOnBegin:!0,interval:o});return async()=>{d&&await M(e,xn,"uninstallFilter")({filter:d}),f()}})})():(()=>{let u=!0,l=()=>u=!1;return(async()=>{try{const{unsubscribe:d}=await e.transport.subscribe({params:["newPendingTransactions"],onData(f){if(!u)return;const h=f.result;r([h])},onError(f){n==null||n(f)}});l=d,u||l()}catch(d){n==null||n(d)}})(),()=>l()})()}async function sd(e){var n;return((n=e.account)==null?void 0:n.type)==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(r=>Mt(r))}async function od(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}function ad(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function id(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?le(e.nonce):void 0,storageProof:e.storageProof?ad(e.storageProof):void 0}}async function cd(e,{address:t,blockNumber:n,blockTag:r,storageKeys:s}){const o=r??"latest",a=n!==void 0?R(n):void 0,i=await e.request({method:"eth_getProof",params:[t,s,a||o]});return id(i)}async function ud(e,{confirmations:t=1,hash:n,onReplaced:r,pollingInterval:s=e.pollingInterval,retryCount:o=6,retryDelay:a=({count:c})=>~~(1<<c)*200,timeout:i=18e4}){const c=Z(["waitForTransactionReceipt",e.uid,n]);let u,l,d,f=!1;const{promise:h,resolve:b,reject:m}=No(),p=i?setTimeout(()=>m(new Bi({hash:n})),i):void 0,y=Se(c,{onReplaced:r,resolve:b,reject:m},g=>{const w=M(e,Xo,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(x){const A=E=>{clearTimeout(p),w(),E(),y()};let P=x;if(!f)try{if(d){if(t>1&&(!d.blockNumber||P-d.blockNumber+1n<t))return;A(()=>g.resolve(d));return}if(u||(f=!0,await or(async()=>{u=await M(e,Or,"getTransaction")({hash:n}),u.blockNumber&&(P=u.blockNumber)},{delay:a,retryCount:o}),f=!1),d=await M(e,nr,"getTransactionReceipt")({hash:n}),t>1&&(!d.blockNumber||P-d.blockNumber+1n<t))return;A(()=>g.resolve(d))}catch(E){if(E instanceof to||E instanceof no){if(!u){f=!1;return}try{l=u,f=!0;const I=await or(()=>M(e,me,"getBlock")({blockNumber:P,includeTransactions:!0}),{delay:a,retryCount:o,shouldRetry:({error:C})=>C instanceof ro});f=!1;const B=I.transactions.find(({from:C,nonce:F})=>C===l.from&&F===l.nonce);if(!B||(d=await M(e,nr,"getTransactionReceipt")({hash:B.hash}),t>1&&(!d.blockNumber||P-d.blockNumber+1n<t)))return;let z="replaced";B.to===l.to&&B.value===l.value&&B.input===l.input?z="repriced":B.from===B.to&&B.value===0n&&(z="cancelled"),A(()=>{var C;(C=g.onReplaced)==null||C.call(g,{reason:z,replacedTransaction:l,transaction:B,transactionReceipt:d}),g.resolve(d)})}catch(I){A(()=>g.reject(I))}}else A(()=>g.reject(E))}}})});return h}async function dd(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Ls(n))}async function fd(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}async function Qo(e,t){var u,l,d,f;const{account:n=e.account,chain:r=e.chain,...s}=t;if(!n)throw new ct({docsPath:"/docs/actions/wallet/signTransaction"});const o=Q(n);Ce({account:o,...t});const a=await M(e,dt,"getChainId")({});r!==null&&br({currentChainId:a,chain:r});const i=(r==null?void 0:r.formatters)||((u=e.chain)==null?void 0:u.formatters),c=((l=i==null?void 0:i.transactionRequest)==null?void 0:l.format)||Ze;return o.signTransaction?o.signTransaction({...s,chainId:a},{serializer:(f=(d=e.chain)==null?void 0:d.serializers)==null?void 0:f.transaction}):await e.request({method:"eth_signTransaction",params:[{...c(s),chainId:R(a),from:o.address}]},{retryCount:0})}async function ld(e,{account:t=e.account,message:n}){if(!t)throw new ct({docsPath:"/docs/actions/wallet/signMessage"});const r=Q(t);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?nt(n):n.raw instanceof Uint8Array?k(n.raw):n.raw;return e.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function ea(e,t){const{account:n=e.account,domain:r,message:s,primaryType:o}=t;if(!n)throw new ct({docsPath:"/docs/actions/wallet/signTypedData"});const a=Q(n),i={EIP712Domain:Ko({domain:r}),...t.types};if(Wo({domain:r,message:s,primaryType:o,types:i}),a.signTypedData)return a.signTypedData({domain:r,message:s,primaryType:o,types:i});const c=zu({domain:r,message:s,primaryType:o,types:i});return e.request({method:"eth_signTypedData_v4",params:[a.address,c]},{retryCount:0})}async function hd(e,t){const{abi:n,address:r,args:s,dataSuffix:o,functionName:a,...i}=t,c=i.account?Q(i.account):e.account,u=ue({abi:n,args:s,functionName:a});try{const{data:l}=await M(e,qt,"call")({batch:!1,data:`${u}${o?o.replace("0x",""):""}`,to:r,...i,account:c}),d=We({abi:n,args:s,functionName:a,data:l||"0x"}),f=n.filter(h=>"name"in h&&h.name===t.functionName);return{result:d,request:{abi:f,address:r,args:s,dataSuffix:o,functionName:a,...i,account:c}}}catch(l){throw _e(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:a,sender:c==null?void 0:c.address})}}async function pd(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:R(t)}]},{retryCount:0})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const En=BigInt(0),Pn=BigInt(1),md=BigInt(2);function Ue(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Zt(e){if(!Ue(e))throw new Error("Uint8Array expected")}function st(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const bd=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ot(e){Zt(e);let t="";for(let n=0;n<e.length;n++)t+=bd[e[n]];return t}function Qe(e){const t=e.toString(16);return t.length&1?"0"+t:t}function Gr(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?En:BigInt("0x"+e)}const xe={_0:48,_9:57,A:65,F:70,a:97,f:102};function ys(e){if(e>=xe._0&&e<=xe._9)return e-xe._0;if(e>=xe.A&&e<=xe.F)return e-(xe.A-10);if(e>=xe.a&&e<=xe.f)return e-(xe.a-10)}function at(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,o=0;s<n;s++,o+=2){const a=ys(e.charCodeAt(o)),i=ys(e.charCodeAt(o+1));if(a===void 0||i===void 0){const c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}r[s]=a*16+i}return r}function Le(e){return Gr(ot(e))}function jr(e){return Zt(e),Gr(ot(Uint8Array.from(e).reverse()))}function it(e,t){return at(e.toString(16).padStart(t*2,"0"))}function qr(e,t){return it(e,t).reverse()}function yd(e){return at(Qe(e))}function de(e,t,n){let r;if(typeof t=="string")try{r=at(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if(Ue(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}function zt(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];Zt(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const o=e[r];n.set(o,s),s+=o.length}return n}function gd(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}function wd(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}const Mn=e=>typeof e=="bigint"&&En<=e;function Bn(e,t,n){return Mn(e)&&Mn(t)&&Mn(n)&&t<=e&&e<n}function De(e,t,n,r){if(!Bn(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function ta(e){let t;for(t=0;e>En;e>>=Pn,t+=1);return t}function vd(e,t){return e>>BigInt(t)&Pn}function xd(e,t,n){return e|(n?Pn:En)<<BigInt(t)}const _r=e=>(md<<BigInt(e-1))-Pn,On=e=>new Uint8Array(e),gs=e=>Uint8Array.from(e);function na(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=On(e),s=On(e),o=0;const a=()=>{r.fill(1),s.fill(0),o=0},i=(...d)=>n(s,r,...d),c=(d=On())=>{s=i(gs([0]),d),r=i(),d.length!==0&&(s=i(gs([1]),d),r=i())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<t;){r=i();const h=r.slice();f.push(h),d+=r.length}return zt(...f)};return(d,f)=>{a(),c(d);let h;for(;!(h=f(u()));)c();return a(),h}}const Ed={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Ue(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Wt(e,t,n={}){const r=(s,o,a)=>{const i=Ed[o];if(typeof i!="function")throw new Error("invalid validator function");const c=e[s];if(!(a&&c===void 0)&&!i(c,e))throw new Error("param "+String(s)+" is invalid. Expected "+o+", got "+c)};for(const[s,o]of Object.entries(t))r(s,o,!1);for(const[s,o]of Object.entries(n))r(s,o,!0);return e}const Pd=()=>{throw new Error("not implemented")};function ar(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==void 0)return s;const o=e(n,...r);return t.set(n,o),o}}const Bd=Object.freeze(Object.defineProperty({__proto__:null,aInRange:De,abool:st,abytes:Zt,bitGet:vd,bitLen:ta,bitMask:_r,bitSet:xd,bytesToHex:ot,bytesToNumberBE:Le,bytesToNumberLE:jr,concatBytes:zt,createHmacDrbg:na,ensureBytes:de,equalBytes:gd,hexToBytes:at,hexToNumber:Gr,inRange:Bn,isBytes:Ue,memoized:ar,notImplemented:Pd,numberToBytesBE:it,numberToBytesLE:qr,numberToHexUnpadded:Qe,numberToVarBytesBE:yd,utf8ToBytes:wd,validateObject:Wt},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const J=BigInt(0),U=BigInt(1),ze=BigInt(2),Id=BigInt(3),ir=BigInt(4),ws=BigInt(5),vs=BigInt(8);function ne(e,t){const n=e%t;return n>=J?n:t+n}function Ad(e,t,n){if(t<J)throw new Error("invalid exponent, negatives unsupported");if(n<=J)throw new Error("invalid modulus");if(n===U)return J;let r=U;for(;t>J;)t&U&&(r=r*e%n),e=e*e%n,t>>=U;return r}function ae(e,t,n){let r=e;for(;t-- >J;)r*=r,r%=n;return r}function cr(e,t){if(e===J)throw new Error("invert: expected non-zero number");if(t<=J)throw new Error("invert: expected positive modulus, got "+t);let n=ne(e,t),r=t,s=J,o=U;for(;n!==J;){const i=r/n,c=r%n,u=s-o*i;r=n,n=c,s=o,o=u}if(r!==U)throw new Error("invert: does not exist");return ne(s,t)}function Td(e){const t=(e-U)/ze;let n,r,s;for(n=e-U,r=0;n%ze===J;n/=ze,r++);for(s=ze;s<e&&Ad(s,t,e)!==e-U;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const a=(e+U)/ir;return function(c,u){const l=c.pow(u,a);if(!c.eql(c.sqr(l),u))throw new Error("Cannot find square root");return l}}const o=(n+U)/ze;return function(i,c){if(i.pow(c,t)===i.neg(i.ONE))throw new Error("Cannot find square root");let u=r,l=i.pow(i.mul(i.ONE,s),n),d=i.pow(c,o),f=i.pow(c,n);for(;!i.eql(f,i.ONE);){if(i.eql(f,i.ZERO))return i.ZERO;let h=1;for(let m=i.sqr(f);h<u&&!i.eql(m,i.ONE);h++)m=i.sqr(m);const b=i.pow(l,U<<BigInt(u-h-1));l=i.sqr(b),d=i.mul(d,b),f=i.mul(f,l),u=h}return d}}function $d(e){if(e%ir===Id){const t=(e+U)/ir;return function(r,s){const o=r.pow(s,t);if(!r.eql(r.sqr(o),s))throw new Error("Cannot find square root");return o}}if(e%vs===ws){const t=(e-ws)/vs;return function(r,s){const o=r.mul(s,ze),a=r.pow(o,t),i=r.mul(s,a),c=r.mul(r.mul(i,ze),a),u=r.mul(i,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),s))throw new Error("Cannot find square root");return u}}return Td(e)}const Nd=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Sd(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Nd.reduce((r,s)=>(r[s]="function",r),t);return Wt(e,n)}function Cd(e,t,n){if(n<J)throw new Error("invalid exponent, negatives unsupported");if(n===J)return e.ONE;if(n===U)return t;let r=e.ONE,s=t;for(;n>J;)n&U&&(r=e.mul(r,s)),s=e.sqr(s),n>>=U;return r}function kd(e,t){const n=new Array(t.length),r=t.reduce((o,a,i)=>e.is0(a)?o:(n[i]=o,e.mul(o,a)),e.ONE),s=e.inv(r);return t.reduceRight((o,a,i)=>e.is0(a)?o:(n[i]=e.mul(o,n[i]),e.mul(o,a)),s),n}function ra(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function sa(e,t,n=!1,r={}){if(e<=J)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:s,nByteLength:o}=ra(e,t);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a;const i=Object.freeze({ORDER:e,isLE:n,BITS:s,BYTES:o,MASK:_r(s),ZERO:J,ONE:U,create:c=>ne(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return J<=c&&c<e},is0:c=>c===J,isOdd:c=>(c&U)===U,neg:c=>ne(-c,e),eql:(c,u)=>c===u,sqr:c=>ne(c*c,e),add:(c,u)=>ne(c+u,e),sub:(c,u)=>ne(c-u,e),mul:(c,u)=>ne(c*u,e),pow:(c,u)=>Cd(i,c,u),div:(c,u)=>ne(c*cr(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>cr(c,e),sqrt:r.sqrt||(c=>(a||(a=$d(e)),a(i,c))),invertBatch:c=>kd(i,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>n?qr(c,o):it(c,o),fromBytes:c=>{if(c.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+c.length);return n?jr(c):Le(c)}});return Object.freeze(i)}function oa(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function aa(e){const t=oa(e);return t+Math.ceil(t/2)}function Fd(e,t,n=!1){const r=e.length,s=oa(t),o=aa(t);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const a=n?jr(e):Le(e),i=ne(a,t-U)+U;return n?qr(i,s):it(i,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xs=BigInt(0),Xt=BigInt(1);function Ln(e,t){const n=t.negate();return e?n:t}function ia(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Dn(e,t){ia(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1);return{windows:n,windowSize:r}}function zd(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function Rd(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Gn=new WeakMap,ca=new WeakMap;function jn(e){return ca.get(e)||1}function Md(e,t){return{constTimeNegate:Ln,hasPrecomputes(n){return jn(n)!==1},unsafeLadder(n,r,s=e.ZERO){let o=n;for(;r>xs;)r&Xt&&(s=s.add(o)),o=o.double(),r>>=Xt;return s},precomputeWindow(n,r){const{windows:s,windowSize:o}=Dn(r,t),a=[];let i=n,c=i;for(let u=0;u<s;u++){c=i,a.push(c);for(let l=1;l<o;l++)c=c.add(i),a.push(c);i=c.double()}return a},wNAF(n,r,s){const{windows:o,windowSize:a}=Dn(n,t);let i=e.ZERO,c=e.BASE;const u=BigInt(2**n-1),l=2**n,d=BigInt(n);for(let f=0;f<o;f++){const h=f*a;let b=Number(s&u);s>>=d,b>a&&(b-=l,s+=Xt);const m=h,p=h+Math.abs(b)-1,y=f%2!==0,g=b<0;b===0?c=c.add(Ln(y,r[m])):i=i.add(Ln(g,r[p]))}return{p:i,f:c}},wNAFUnsafe(n,r,s,o=e.ZERO){const{windows:a,windowSize:i}=Dn(n,t),c=BigInt(2**n-1),u=2**n,l=BigInt(n);for(let d=0;d<a;d++){const f=d*i;if(s===xs)break;let h=Number(s&c);if(s>>=l,h>i&&(h-=u,s+=Xt),h===0)continue;let b=r[f+Math.abs(h)-1];h<0&&(b=b.negate()),o=o.add(b)}return o},getPrecomputes(n,r,s){let o=Gn.get(r);return o||(o=this.precomputeWindow(r,n),n!==1&&Gn.set(r,s(o))),o},wNAFCached(n,r,s){const o=jn(n);return this.wNAF(o,this.getPrecomputes(o,n,s),r)},wNAFCachedUnsafe(n,r,s,o){const a=jn(n);return a===1?this.unsafeLadder(n,r,o):this.wNAFUnsafe(a,this.getPrecomputes(a,n,s),r,o)},setWindowSize(n,r){ia(r,t),ca.set(n,r),Gn.delete(n)}}}function Od(e,t,n,r){if(zd(n,e),Rd(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,o=ta(BigInt(n.length)),a=o>12?o-3:o>4?o-2:o?2:1,i=(1<<a)-1,c=new Array(i+1).fill(s),u=Math.floor((t.BITS-1)/a)*a;let l=s;for(let d=u;d>=0;d-=a){c.fill(s);for(let h=0;h<r.length;h++){const b=r[h],m=Number(b>>BigInt(d)&BigInt(i));c[m]=c[m].add(n[h])}let f=s;for(let h=c.length-1,b=s;h>0;h--)b=b.add(c[h]),f=f.add(b);if(l=l.add(f),d!==0)for(let h=0;h<a;h++)l=l.double()}return l}function ua(e){return Sd(e.Fp),Wt(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ra(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Es(e){e.lowS!==void 0&&st("lowS",e.lowS),e.prehash!==void 0&&st("prehash",e.prehash)}function Ld(e){const t=ua(e);Wt(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:Dd,hexToBytes:Gd}=Bd;class jd extends Error{constructor(t=""){super(t)}}const Ee={Err:jd,_tlv:{encode:(e,t)=>{const{Err:n}=Ee;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=Qe(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?Qe(s.length/2|128):"";return Qe(e)+o+s+t},decode(e,t){const{Err:n}=Ee;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++],o=!!(s&128);let a=0;if(!o)a=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=t.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)a=a<<8|l;if(r+=c,a<128)throw new n("tlv.decode(long): not minimal encoding")}const i=t.subarray(r,r+a);if(i.length!==a)throw new n("tlv.decode: wrong value length");return{v:i,l:t.subarray(r+a)}}},_int:{encode(e){const{Err:t}=Ee;if(e<Pe)throw new t("integer: negative integers are not allowed");let n=Qe(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=Ee;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Dd(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=Ee,s=typeof e=="string"?Gd(e):e;Zt(s);const{v:o,l:a}=r.decode(48,s);if(a.length)throw new t("invalid signature: left bytes after parsing");const{v:i,l:c}=r.decode(2,o),{v:u,l}=r.decode(2,c);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(i),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=Ee,r=t.encode(2,n.encode(e.r)),s=t.encode(2,n.encode(e.s)),o=r+s;return t.encode(48,o)}},Pe=BigInt(0),K=BigInt(1);BigInt(2);const Ps=BigInt(3);BigInt(4);function qd(e){const t=Ld(e),{Fp:n}=t,r=sa(t.n,t.nBitLength),s=t.toBytes||((m,p,y)=>{const g=p.toAffine();return zt(Uint8Array.from([4]),n.toBytes(g.x),n.toBytes(g.y))}),o=t.fromBytes||(m=>{const p=m.subarray(1),y=n.fromBytes(p.subarray(0,n.BYTES)),g=n.fromBytes(p.subarray(n.BYTES,2*n.BYTES));return{x:y,y:g}});function a(m){const{a:p,b:y}=t,g=n.sqr(m),w=n.mul(g,m);return n.add(n.add(w,n.mul(m,p)),y)}if(!n.eql(n.sqr(t.Gy),a(t.Gx)))throw new Error("bad generator point: equation left != right");function i(m){return Bn(m,K,t.n)}function c(m){const{allowedPrivateKeyLengths:p,nByteLength:y,wrapPrivateKey:g,n:w}=t;if(p&&typeof m!="bigint"){if(Ue(m)&&(m=ot(m)),typeof m!="string"||!p.includes(m.length))throw new Error("invalid private key");m=m.padStart(y*2,"0")}let x;try{x=typeof m=="bigint"?m:Le(de("private key",m,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof m)}return g&&(x=ne(x,w)),De("private key",x,K,w),x}function u(m){if(!(m instanceof f))throw new Error("ProjectivePoint expected")}const l=ar((m,p)=>{const{px:y,py:g,pz:w}=m;if(n.eql(w,n.ONE))return{x:y,y:g};const x=m.is0();p==null&&(p=x?n.ONE:n.inv(w));const A=n.mul(y,p),P=n.mul(g,p),E=n.mul(w,p);if(x)return{x:n.ZERO,y:n.ZERO};if(!n.eql(E,n.ONE))throw new Error("invZ was invalid");return{x:A,y:P}}),d=ar(m=>{if(m.is0()){if(t.allowInfinityPoint&&!n.is0(m.py))return;throw new Error("bad point: ZERO")}const{x:p,y}=m.toAffine();if(!n.isValid(p)||!n.isValid(y))throw new Error("bad point: x or y not FE");const g=n.sqr(y),w=a(p);if(!n.eql(g,w))throw new Error("bad point: equation left != right");if(!m.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class f{constructor(p,y,g){if(this.px=p,this.py=y,this.pz=g,p==null||!n.isValid(p))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(g==null||!n.isValid(g))throw new Error("z required");Object.freeze(this)}static fromAffine(p){const{x:y,y:g}=p||{};if(!p||!n.isValid(y)||!n.isValid(g))throw new Error("invalid affine point");if(p instanceof f)throw new Error("projective point not allowed");const w=x=>n.eql(x,n.ZERO);return w(y)&&w(g)?f.ZERO:new f(y,g,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){const y=n.invertBatch(p.map(g=>g.pz));return p.map((g,w)=>g.toAffine(y[w])).map(f.fromAffine)}static fromHex(p){const y=f.fromAffine(o(de("pointHex",p)));return y.assertValidity(),y}static fromPrivateKey(p){return f.BASE.multiply(c(p))}static msm(p,y){return Od(f,r,p,y)}_setWindowSize(p){b.setWindowSize(this,p)}assertValidity(){d(this)}hasEvenY(){const{y:p}=this.toAffine();if(n.isOdd)return!n.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){u(p);const{px:y,py:g,pz:w}=this,{px:x,py:A,pz:P}=p,E=n.eql(n.mul(y,P),n.mul(x,w)),I=n.eql(n.mul(g,P),n.mul(A,w));return E&&I}negate(){return new f(this.px,n.neg(this.py),this.pz)}double(){const{a:p,b:y}=t,g=n.mul(y,Ps),{px:w,py:x,pz:A}=this;let P=n.ZERO,E=n.ZERO,I=n.ZERO,B=n.mul(w,w),z=n.mul(x,x),C=n.mul(A,A),F=n.mul(w,x);return F=n.add(F,F),I=n.mul(w,A),I=n.add(I,I),P=n.mul(p,I),E=n.mul(g,C),E=n.add(P,E),P=n.sub(z,E),E=n.add(z,E),E=n.mul(P,E),P=n.mul(F,P),I=n.mul(g,I),C=n.mul(p,C),F=n.sub(B,C),F=n.mul(p,F),F=n.add(F,I),I=n.add(B,B),B=n.add(I,B),B=n.add(B,C),B=n.mul(B,F),E=n.add(E,B),C=n.mul(x,A),C=n.add(C,C),B=n.mul(C,F),P=n.sub(P,B),I=n.mul(C,z),I=n.add(I,I),I=n.add(I,I),new f(P,E,I)}add(p){u(p);const{px:y,py:g,pz:w}=this,{px:x,py:A,pz:P}=p;let E=n.ZERO,I=n.ZERO,B=n.ZERO;const z=t.a,C=n.mul(t.b,Ps);let F=n.mul(y,x),D=n.mul(g,A),T=n.mul(w,P),N=n.add(y,g),S=n.add(x,A);N=n.mul(N,S),S=n.add(F,D),N=n.sub(N,S),S=n.add(y,w);let O=n.add(x,P);return S=n.mul(S,O),O=n.add(F,T),S=n.sub(S,O),O=n.add(g,w),E=n.add(A,P),O=n.mul(O,E),E=n.add(D,T),O=n.sub(O,E),B=n.mul(z,S),E=n.mul(C,T),B=n.add(E,B),E=n.sub(D,B),B=n.add(D,B),I=n.mul(E,B),D=n.add(F,F),D=n.add(D,F),T=n.mul(z,T),S=n.mul(C,S),D=n.add(D,T),T=n.sub(F,T),T=n.mul(z,T),S=n.add(S,T),F=n.mul(D,S),I=n.add(I,F),F=n.mul(O,S),E=n.mul(N,E),E=n.sub(E,F),F=n.mul(N,D),B=n.mul(O,B),B=n.add(B,F),new f(E,I,B)}subtract(p){return this.add(p.negate())}is0(){return this.equals(f.ZERO)}wNAF(p){return b.wNAFCached(this,p,f.normalizeZ)}multiplyUnsafe(p){const{endo:y,n:g}=t;De("scalar",p,Pe,g);const w=f.ZERO;if(p===Pe)return w;if(this.is0()||p===K)return this;if(!y||b.hasPrecomputes(this))return b.wNAFCachedUnsafe(this,p,f.normalizeZ);let{k1neg:x,k1:A,k2neg:P,k2:E}=y.splitScalar(p),I=w,B=w,z=this;for(;A>Pe||E>Pe;)A&K&&(I=I.add(z)),E&K&&(B=B.add(z)),z=z.double(),A>>=K,E>>=K;return x&&(I=I.negate()),P&&(B=B.negate()),B=new f(n.mul(B.px,y.beta),B.py,B.pz),I.add(B)}multiply(p){const{endo:y,n:g}=t;De("scalar",p,K,g);let w,x;if(y){const{k1neg:A,k1:P,k2neg:E,k2:I}=y.splitScalar(p);let{p:B,f:z}=this.wNAF(P),{p:C,f:F}=this.wNAF(I);B=b.constTimeNegate(A,B),C=b.constTimeNegate(E,C),C=new f(n.mul(C.px,y.beta),C.py,C.pz),w=B.add(C),x=z.add(F)}else{const{p:A,f:P}=this.wNAF(p);w=A,x=P}return f.normalizeZ([w,x])[0]}multiplyAndAddUnsafe(p,y,g){const w=f.BASE,x=(P,E)=>E===Pe||E===K||!P.equals(w)?P.multiplyUnsafe(E):P.multiply(E),A=x(this,y).add(x(p,g));return A.is0()?void 0:A}toAffine(p){return l(this,p)}isTorsionFree(){const{h:p,isTorsionFree:y}=t;if(p===K)return!0;if(y)return y(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:p,clearCofactor:y}=t;return p===K?this:y?y(f,this):this.multiplyUnsafe(t.h)}toRawBytes(p=!0){return st("isCompressed",p),this.assertValidity(),s(f,this,p)}toHex(p=!0){return st("isCompressed",p),ot(this.toRawBytes(p))}}f.BASE=new f(t.Gx,t.Gy,n.ONE),f.ZERO=new f(n.ZERO,n.ONE,n.ZERO);const h=t.nBitLength,b=Md(f,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:a,isWithinCurveOrder:i}}function _d(e){const t=ua(e);return Wt(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Ud(e){const t=_d(e),{Fp:n,n:r}=t,s=n.BYTES+1,o=2*n.BYTES+1;function a(T){return ne(T,r)}function i(T){return cr(T,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:d}=qd({...t,toBytes(T,N,S){const O=N.toAffine(),L=n.toBytes(O.x),$=zt;return st("isCompressed",S),S?$(Uint8Array.from([N.hasEvenY()?2:3]),L):$(Uint8Array.from([4]),L,n.toBytes(O.y))},fromBytes(T){const N=T.length,S=T[0],O=T.subarray(1);if(N===s&&(S===2||S===3)){const L=Le(O);if(!Bn(L,K,n.ORDER))throw new Error("Point is not on curve");const $=l(L);let G;try{G=n.sqrt($)}catch(oe){const ee=oe instanceof Error?": "+oe.message:"";throw new Error("Point is not on curve"+ee)}const j=(G&K)===K;return(S&1)===1!==j&&(G=n.neg(G)),{x:L,y:G}}else if(N===o&&S===4){const L=n.fromBytes(O.subarray(0,n.BYTES)),$=n.fromBytes(O.subarray(n.BYTES,2*n.BYTES));return{x:L,y:$}}else{const L=s,$=o;throw new Error("invalid Point, expected length of "+L+", or uncompressed "+$+", got "+N)}}}),f=T=>ot(it(T,t.nByteLength));function h(T){const N=r>>K;return T>N}function b(T){return h(T)?a(-T):T}const m=(T,N,S)=>Le(T.slice(N,S));class p{constructor(N,S,O){this.r=N,this.s=S,this.recovery=O,this.assertValidity()}static fromCompact(N){const S=t.nByteLength;return N=de("compactSignature",N,S*2),new p(m(N,0,S),m(N,S,2*S))}static fromDER(N){const{r:S,s:O}=Ee.toSig(de("DER",N));return new p(S,O)}assertValidity(){De("r",this.r,K,r),De("s",this.s,K,r)}addRecoveryBit(N){return new p(this.r,this.s,N)}recoverPublicKey(N){const{r:S,s:O,recovery:L}=this,$=P(de("msgHash",N));if(L==null||![0,1,2,3].includes(L))throw new Error("recovery id invalid");const G=L===2||L===3?S+t.n:S;if(G>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const j=(L&1)===0?"02":"03",W=c.fromHex(j+f(G)),oe=i(G),ee=a(-$*oe),we=a(O*oe),he=c.BASE.multiplyAndAddUnsafe(W,ee,we);if(!he)throw new Error("point at infinify");return he.assertValidity(),he}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new p(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return at(this.toDERHex())}toDERHex(){return Ee.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return at(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const y={isValidPrivateKey(T){try{return u(T),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const T=aa(t.n);return Fd(t.randomBytes(T),t.n)},precompute(T=8,N=c.BASE){return N._setWindowSize(T),N.multiply(BigInt(3)),N}};function g(T,N=!0){return c.fromPrivateKey(T).toRawBytes(N)}function w(T){const N=Ue(T),S=typeof T=="string",O=(N||S)&&T.length;return N?O===s||O===o:S?O===2*s||O===2*o:T instanceof c}function x(T,N,S=!0){if(w(T))throw new Error("first arg must be private key");if(!w(N))throw new Error("second arg must be public key");return c.fromHex(N).multiply(u(T)).toRawBytes(S)}const A=t.bits2int||function(T){if(T.length>8192)throw new Error("input is too large");const N=Le(T),S=T.length*8-t.nBitLength;return S>0?N>>BigInt(S):N},P=t.bits2int_modN||function(T){return a(A(T))},E=_r(t.nBitLength);function I(T){return De("num < 2^"+t.nBitLength,T,Pe,E),it(T,t.nByteLength)}function B(T,N,S=z){if(["recovered","canonical"].some(ke=>ke in S))throw new Error("sign() legacy options not supported");const{hash:O,randomBytes:L}=t;let{lowS:$,prehash:G,extraEntropy:j}=S;$==null&&($=!0),T=de("msgHash",T),Es(S),G&&(T=de("prehashed msgHash",O(T)));const W=P(T),oe=u(N),ee=[I(oe),I(W)];if(j!=null&&j!==!1){const ke=j===!0?L(n.BYTES):j;ee.push(de("extraEntropy",ke))}const we=zt(...ee),he=W;function An(ke){const Ke=A(ke);if(!d(Ke))return;const Tn=i(Ke),lt=c.BASE.multiply(Ke).toAffine(),Fe=a(lt.x);if(Fe===Pe)return;const ht=a(Tn*a(he+Fe*oe));if(ht===Pe)return;let pt=(lt.x===Fe?0:2)|Number(lt.y&K),Ye=ht;return $&&h(ht)&&(Ye=b(ht),pt^=1),new p(Fe,Ye,pt)}return{seed:we,k2sig:An}}const z={lowS:t.lowS,prehash:!1},C={lowS:t.lowS,prehash:!1};function F(T,N,S=z){const{seed:O,k2sig:L}=B(T,N,S),$=t;return na($.hash.outputLen,$.nByteLength,$.hmac)(O,L)}c.BASE._setWindowSize(8);function D(T,N,S,O=C){var pt;const L=T;N=de("msgHash",N),S=de("publicKey",S);const{lowS:$,prehash:G,format:j}=O;if(Es(O),"strict"in O)throw new Error("options.strict was renamed to lowS");if(j!==void 0&&j!=="compact"&&j!=="der")throw new Error("format must be compact or der");const W=typeof L=="string"||Ue(L),oe=!W&&!j&&typeof L=="object"&&L!==null&&typeof L.r=="bigint"&&typeof L.s=="bigint";if(!W&&!oe)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let ee,we;try{if(oe&&(ee=new p(L.r,L.s)),W){try{j!=="compact"&&(ee=p.fromDER(L))}catch(Ye){if(!(Ye instanceof Ee.Err))throw Ye}!ee&&j!=="der"&&(ee=p.fromCompact(L))}we=c.fromHex(S)}catch{return!1}if(!ee||$&&ee.hasHighS())return!1;G&&(N=t.hash(N));const{r:he,s:An}=ee,ke=P(N),Ke=i(An),Tn=a(ke*Ke),lt=a(he*Ke),Fe=(pt=c.BASE.multiplyAndAddUnsafe(we,Tn,lt))==null?void 0:pt.toAffine();return Fe?a(Fe.x)===he:!1}return{CURVE:t,getPublicKey:g,getSharedSecret:x,sign:F,verify:D,ProjectivePoint:c,Signature:p,utils:y}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Hd(e){return{hash:e,hmac:(t,...n)=>Aa(e,t,Ta(...n)),randomBytes:Ia}}function Vd(e,t){const n=r=>Ud({...e,...Hd(r)});return{...n(t),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const da=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Bs=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Zd=BigInt(1),ur=BigInt(2),Is=(e,t)=>(e+t/ur)/t;function Wd(e){const t=da,n=BigInt(3),r=BigInt(6),s=BigInt(11),o=BigInt(22),a=BigInt(23),i=BigInt(44),c=BigInt(88),u=e*e*e%t,l=u*u*e%t,d=ae(l,n,t)*l%t,f=ae(d,n,t)*l%t,h=ae(f,ur,t)*u%t,b=ae(h,s,t)*h%t,m=ae(b,o,t)*b%t,p=ae(m,i,t)*m%t,y=ae(p,c,t)*p%t,g=ae(y,i,t)*m%t,w=ae(g,n,t)*l%t,x=ae(w,a,t)*b%t,A=ae(x,r,t)*u%t,P=ae(A,ur,t);if(!dr.eql(dr.sqr(P),e))throw new Error("Cannot find square root");return P}const dr=sa(da,void 0,void 0,{sqrt:Wd}),Kt=Vd({a:BigInt(0),b:BigInt(7),Fp:dr,n:Bs,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Bs,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Zd*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,a=BigInt("0x100000000000000000000000000000000"),i=Is(o*e,t),c=Is(-r*e,t);let u=ne(e-i*n-c*s,t),l=ne(-i*r-c*o,t);const d=u>a,f=l>a;if(d&&(u=t-u),f&&(l=t-l),u>a||l>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:f,k2:l}}}},$s);BigInt(0);Kt.ProjectivePoint;const Kd=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:Kt},Symbol.toStringTag,{value:"Module"}));function fa({r:e,s:t,to:n="hex",v:r,yParity:s}){const o=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),a=`0x${new Kt.Signature(q(e),q(t)).toCompactHex()}${o===0?"1b":"1c"}`;return n==="hex"?a:te(a)}async function Ur(e,t){var d,f,h;const{address:n,factory:r,factoryData:s,hash:o,signature:a,universalSignatureVerifierAddress:i=(h=(f=(d=e.chain)==null?void 0:d.contracts)==null?void 0:f.universalSignatureVerifier)==null?void 0:h.address,...c}=t,u=fe(a)?a:typeof a=="object"&&"r"in a&&"s"in a?fa(a):V(a),l=await(async()=>!r&&!s||Lu(u)?u:Du({address:r,data:s,signature:u}))();try{const b=i?{to:i,data:ue({abi:is,functionName:"isValidSig",args:[n,o,l]}),...c}:{data:an({abi:is,args:[n,o,l],bytecode:Bc}),...c},{data:m}=await M(e,qt,"call")(b);return Ra(m??"0x0")}catch(b){try{if(gn(Ls(n),await Vs({hash:o,signature:a})))return!0}catch{}if(b instanceof Io)return!1;throw b}}async function Yd(e,{address:t,message:n,factory:r,factoryData:s,signature:o,...a}){const i=Lr(n);return Ur(e,{address:t,factory:r,factoryData:s,hash:i,signature:o,...a})}async function Jd(e,t){const{address:n,factory:r,factoryData:s,signature:o,message:a,primaryType:i,types:c,domain:u,...l}=t,d=_o({message:a,primaryType:i,types:c,domain:u});return Ur(e,{address:n,factory:r,factoryData:s,hash:d,signature:o,...l})}async function Xd(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}function Qd(e,t){const{abi:n,address:r,args:s,batch:o=!0,eventName:a,fromBlock:i,onError:c,onLogs:u,poll:l,pollingInterval:d=e.pollingInterval,strict:f}=t;return(typeof l<"u"?l:typeof i=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"))?(()=>{const p=f??!1,y=Z(["watchContractEvent",r,s,o,e.uid,a,d,p,i]);return Se(y,{onLogs:u,onError:c},g=>{let w;i!==void 0&&(w=i-1n);let x,A=!1;const P=Vt(async()=>{var E;if(!A){try{x=await M(e,Ro,"createContractEventFilter")({abi:n,address:r,args:s,eventName:a,strict:p,fromBlock:i})}catch{}A=!0;return}try{let I;if(x)I=await M(e,wn,"getFilterChanges")({filter:x});else{const B=await M(e,Ut,"getBlockNumber")({});w&&w<B?I=await M(e,Lo,"getContractEvents")({abi:n,address:r,args:s,eventName:a,fromBlock:w+1n,toBlock:B,strict:p}):I=[],w=B}if(I.length===0)return;if(o)g.onLogs(I);else for(const B of I)g.onLogs([B])}catch(I){x&&I instanceof qe&&(A=!1),(E=g.onError)==null||E.call(g,I)}},{emitOnBegin:!0,interval:d});return async()=>{x&&await M(e,xn,"uninstallFilter")({filter:x}),P()}})})():(()=>{const p=f??!1,y=Z(["watchContractEvent",r,s,o,e.uid,a,d,p]);let g=!0,w=()=>g=!1;return Se(y,{onLogs:u,onError:c},x=>((async()=>{try{const A=(()=>{if(e.transport.type==="fallback"){const I=e.transport.transports.find(B=>B.config.type==="webSocket");return I?I.value:e.transport}return e.transport})(),P=a?_t({abi:n,eventName:a,args:s}):[],{unsubscribe:E}=await A.subscribe({params:["logs",{address:r,topics:P}],onData(I){var z;if(!g)return;const B=I.result;try{const{eventName:C,args:F}=zr({abi:n,data:B.data,topics:B.topics,strict:f}),D=ye(B,{args:F,eventName:C});x.onLogs([D])}catch(C){let F,D;if(C instanceof yt||C instanceof sn){if(f)return;F=C.abiItem.name,D=(z=C.abiItem.inputs)==null?void 0:z.some(N=>!("name"in N&&N.name))}const T=ye(B,{args:D?[]:{},eventName:F});x.onLogs([T])}},onError(I){var B;(B=x.onError)==null||B.call(x,I)}});w=E,g||w()}catch(A){c==null||c(A)}})(),()=>w()))})()}async function ef(e,t){const{abi:n,account:r=e.account,address:s,args:o,dataSuffix:a,functionName:i,...c}=t;if(typeof r>"u")throw new ct({docsPath:"/docs/contract/writeContract"});const u=r?Q(r):null,l=ue({abi:n,args:o,functionName:i});try{return await M(e,Nr,"sendTransaction")({data:`${l}${a?a.replace("0x",""):""}`,to:s,account:u,...c})}catch(d){throw _e(d,{abi:n,address:s,args:o,docsPath:"/docs/contract/writeContract",functionName:i,sender:u==null?void 0:u.address})}}const fr=256;let Qt=fr,en;function la(e=11){if(!en||Qt+e>fr*2){en="",Qt=0;for(let t=0;t<fr;t++)en+=(256+Math.random()*256|0).toString(16).substring(1)}return en.substring(Qt,Qt+++e)}function ha(e){const{batch:t,cacheTime:n=e.pollingInterval??4e3,ccipRead:r,key:s="base",name:o="Base Client",pollingInterval:a=4e3,type:i="base"}=e,c=e.chain,u=e.account?Q(e.account):void 0,{config:l,request:d,value:f}=e.transport({chain:c,pollingInterval:a}),h={...l,...f},b={account:u,batch:t,cacheTime:n,ccipRead:r,chain:c,key:s,name:o,pollingInterval:a,request:d,transport:h,type:i,uid:la()};function m(p){return y=>{const g=y(p);for(const x in b)delete g[x];const w={...p,...g};return Object.assign(w,{extend:m(w)})}}return Object.assign(b,{extend:m(b)})}function pa({key:e,methods:t,name:n,request:r,retryCount:s=3,retryDelay:o=150,timeout:a,type:i},c){const u=la();return{config:{key:e,methods:t,name:n,request:r,retryCount:s,retryDelay:o,timeout:a,type:i},request:yu(r,{methods:t,retryCount:s,retryDelay:o,uid:u}),value:c}}function zf(e,t={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:o}=t;return({retryCount:a})=>pa({key:n,methods:r,name:s,request:e.request.bind(e),retryCount:t.retryCount??a,retryDelay:o,type:"custom"})}class tf extends v{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Rf(e,t={}){const{batch:n,fetchOptions:r,key:s="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:i,onFetchResponse:c,retryDelay:u}=t;return({chain:l,retryCount:d,timeout:f})=>{const{batchSize:h=1e3,wait:b=0}=typeof n=="object"?n:{},m=t.retryCount??d,p=f??t.timeout??1e4,y=e||(l==null?void 0:l.rpcUrls.default.http[0]);if(!y)throw new tf;const g=Tu(y,{fetchOptions:r,onRequest:i,onResponse:c,timeout:p});return pa({key:s,methods:o,name:a,async request({method:w,params:x}){const A={method:w,params:x},{schedule:P}=So({id:y,wait:b,shouldSplitBatch(z){return z.length>h},fn:z=>g.request({body:z}),sort:(z,C)=>z.id-C.id}),E=async z=>n?P(z):[await g.request({body:z})],[{error:I,result:B}]=await E(A);if(I)throw new gr({body:A,error:I,url:y});return B},retryCount:m,retryDelay:u,timeout:p,type:"http"},{fetchOptions:r,url:y})}}function nf(e){var d,f,h;const{scheme:t,statement:n,...r}=((d=e.match(rf))==null?void 0:d.groups)??{},{chainId:s,expirationTime:o,issuedAt:a,notBefore:i,requestId:c,...u}=((f=e.match(sf))==null?void 0:f.groups)??{},l=(h=e.split("Resources:")[1])==null?void 0:h.split(`
- `).slice(1);return{...r,...u,...s?{chainId:Number(s)}:{},...o?{expirationTime:new Date(o)}:{},...a?{issuedAt:new Date(a)}:{},...i?{notBefore:new Date(i)}:{},...c?{requestId:c}:{},...l?{resources:l}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}const rf=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,sf=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function of(e){const{address:t,domain:n,message:r,nonce:s,scheme:o,time:a=new Date}=e;if(n&&r.domain!==n||s&&r.nonce!==s||o&&r.scheme!==o||r.expirationTime&&a>=r.expirationTime||r.notBefore&&a<r.notBefore)return!1;try{if(!r.address||t&&!gn(r.address,t))return!1}catch{return!1}return!0}async function af(e,t){const{address:n,domain:r,message:s,nonce:o,scheme:a,signature:i,time:c=new Date,...u}=t,l=nf(s);if(!l.address||!of({address:n,domain:r,message:l,nonce:o,scheme:a,time:c}))return!1;const f=Lr(s);return Ur(e,{address:l.address,hash:f,signature:i,...u})}function cf(e){return{call:t=>qt(e,t),createAccessList:t=>zo(e,t),createBlockFilter:()=>Vc(e),createContractEventFilter:t=>Ro(e,t),createEventFilter:t=>Mo(e,t),createPendingTransactionFilter:()=>Oo(e),estimateContractGas:t=>Wc(e,t),estimateGas:t=>Br(e,t),getBalance:t=>ao(e,t),getBlobBaseFee:()=>Kc(e),getBlock:t=>me(e,t),getBlockNumber:t=>Ut(e,t),getBlockTransactionCount:t=>tu(e,t),getBytecode:t=>hs(e,t),getChainId:()=>dt(e),getCode:t=>hs(e,t),getContractEvents:t=>Lo(e,t),getEip712Domain:t=>ou(e,t),getEnsAddress:t=>Sc(e,t),getEnsAvatar:t=>_c(e,t),getEnsName:t=>Uc(e,t),getEnsResolver:t=>Hc(e,t),getEnsText:t=>Fo(e,t),getFeeHistory:t=>cu(e,t),estimateFeesPerGas:t=>Di(e,t),getFilterChanges:t=>wn(e,t),getFilterLogs:t=>uu(e,t),getGasPrice:()=>Er(e),getLogs:t=>Mr(e,t),getProof:t=>cd(e,t),estimateMaxPriorityFeePerGas:t=>Li(e,t),getStorageAt:t=>du(e,t),getTransaction:t=>Or(e,t),getTransactionConfirmations:t=>fu(e,t),getTransactionCount:t=>io(e,t),getTransactionReceipt:t=>nr(e,t),multicall:t=>pu(e,t),prepareTransactionRequest:t=>ln(e,t),readContract:t=>Te(e,t),sendRawTransaction:t=>$r(e,t),simulate:t=>rr(e,t),simulateBlocks:t=>rr(e,t),simulateCalls:t=>Qu(e,t),simulateContract:t=>hd(e,t),verifyMessage:t=>Yd(e,t),verifySiweMessage:t=>af(e,t),verifyTypedData:t=>Jd(e,t),uninstallFilter:t=>xn(e,t),waitForTransactionReceipt:t=>ud(e,t),watchBlocks:t=>td(e,t),watchBlockNumber:t=>Xo(e,t),watchContractEvent:t=>Qd(e,t),watchEvent:t=>nd(e,t),watchPendingTransactions:t=>rd(e,t)}}function Mf(e){const{key:t="public",name:n="Public Client"}=e;return ha({...e,key:t,name:n,type:"publicClient"}).extend(cf)}function uf(e){return{addChain:t=>La(e,t),deployContract:t=>Ji(e,t),getAddresses:()=>sd(e),getChainId:()=>dt(e),getPermissions:()=>od(e),prepareTransactionRequest:t=>ln(e,t),requestAddresses:()=>dd(e),requestPermissions:t=>fd(e,t),sendRawTransaction:t=>$r(e,t),sendTransaction:t=>Nr(e,t),signMessage:t=>ld(e,t),signTransaction:t=>Qo(e,t),signTypedData:t=>ea(e,t),switchChain:t=>pd(e,t),watchAsset:t=>Xd(e,t),writeContract:t=>ef(e,t)}}function Of(e){const{key:t="wallet",name:n="Wallet Client",transport:r}=e;return ha({...e,key:t,name:n,transport:r,type:"walletClient"}).extend(uf)}function df(e){if(typeof e=="string"){if(!H(e,{strict:!1}))throw new X({address:e});return{address:e,type:"json-rpc"}}if(!H(e.address,{strict:!1}))throw new X({address:e.address});return{address:e.address,nonceManager:e.nonceManager,sign:e.sign,experimental_signAuthorization:e.experimental_signAuthorization,signMessage:e.signMessage,signTransaction:e.signTransaction,signTypedData:e.signTypedData,source:"custom",type:"local"}}const Hr=50000n,As=ki*32n;class ma extends v{constructor(){super(["Transaction is not an EIP712 transaction.","","Transaction must:",'  - include `type: "eip712"`',"  - include one of the following: `customSignature`, `paymaster`, `paymasterInput`, `gasPerPubdata`, `factoryDeps`"].join(`
`),{name:"InvalidEip712TransactionError"})}}function In(e){return!!(e.type==="eip712"||"customSignature"in e&&e.customSignature||"paymaster"in e&&e.paymaster||"paymasterInput"in e&&e.paymasterInput||"gasPerPubdata"in e&&typeof e.gasPerPubdata=="bigint"||"factoryDeps"in e&&e.factoryDeps)}function ba(e){const{chainId:t,to:n,from:r,paymaster:s,paymasterInput:o}=e;if(!In(e))throw new ma;if(!t||t<=0)throw new Ot({chainId:t});if(n&&!H(n))throw new X({address:n});if(r&&!H(r))throw new X({address:r});if(s&&!H(s))throw new X({address:s});if(s&&!o)throw new v("`paymasterInput` must be provided when `paymaster` is defined");if(!s&&o)throw new v("`paymaster` must be provided when `paymasterInput` is defined")}function ff(e,t){return In(e)?hf(e):Jo(e,t)}const lf={transaction:ff};function hf(e){const{chainId:t,gas:n,nonce:r,to:s,from:o,value:a,maxFeePerGas:i,maxPriorityFeePerGas:c,customSignature:u,factoryDeps:l,paymaster:d,paymasterInput:f,gasPerPubdata:h,data:b}=e;ba(e);const m=[r?k(r):"0x",c?k(c):"0x",i?k(i):"0x",n?k(n):"0x",s??"0x",a?k(a):"0x",b??"0x0",k(t),k(""),k(""),k(t),o??"0x",k(h||Hr),l??[],u??"0x",d&&f?[d,f]:[]];return ge(["0x71",Ne(m)])}let pf=!1;async function Yt({hash:e,privateKey:t,to:n="object"}){const{r,s,recovery:o}=Kt.sign(e.slice(2),t.slice(2),{lowS:!0,extraEntropy:pf}),a={r:R(r,{size:32}),s:R(s,{size:32}),v:o?28n:27n,yParity:o};return n==="bytes"||n==="hex"?fa({...a,to:n}):a}const mf=[{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"uint256",name:"_minAllowance",type:"uint256"},{internalType:"bytes",name:"_innerInput",type:"bytes"}],name:"approvalBased",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"input",type:"bytes"}],name:"general",outputs:[],stateMutability:"nonpayable",type:"function"}];class bf extends v{constructor({givenLength:t,maxBytecodeSize:n}){super(`Bytecode cannot be longer than ${n} bytes. Given length: ${t}`,{name:"BytecodeLengthExceedsMaxSizeError"})}}class yf extends v{constructor({givenLengthInWords:t}){super(`Bytecode length in 32-byte words must be odd. Given length in words: ${t}`,{name:"BytecodeLengthInWordsMustBeOddError"})}}class gf extends v{constructor({givenLength:t}){super(`The bytecode length in bytes must be divisible by 32. Given length: ${t}`,{name:"BytecodeLengthMustBeDivisibleBy32Error"})}}function wf(e){const t=Be(e);if(t.length%32!==0)throw new gf({givenLength:t.length});if(t.length>As)throw new bf({givenLength:t.length,maxBytecodeSize:As});const n=co(t),r=Be(n),s=t.length/32;if(s%2===0)throw new yf({givenLengthInWords:s});const o=Be(s),a=He(o,{size:2}),i=new Uint8Array([1,0]);return r.set(i,0),r.set(a,2),r}function vf(e){if(!In(e))throw new ma;Ce(e)}async function xf(e,t){var u,l,d;const{account:n=e.account,chain:r=e.chain,...s}=t,o=n?Q(n):e.account;if(!o)throw new ct({docsPath:"/docs/actions/wallet/signTransaction"});if(vf({account:o,chain:r,...t}),!((u=r==null?void 0:r.custom)!=null&&u.getEip712Domain))throw new v("`getEip712Domain` not found on chain.");if(!((l=r==null?void 0:r.serializers)!=null&&l.transaction))throw new v("transaction serializer not found on chain.");const a=await M(e,dt,"getChainId")({});r!==null&&br({currentChainId:a,chain:r});const i=r==null?void 0:r.custom.getEip712Domain({...s,chainId:a,from:o.address,type:"eip712"}),c=await ea(e,{...i,account:o});return(d=r==null?void 0:r.serializers)==null?void 0:d.transaction({chainId:a,...s,customSignature:c,type:"eip712"},{r:"0x0",s:"0x0",v:0n})}async function Lf(e,t){return In(t)?xf(e,t):await Qo(e,t)}const ya={block:Oi({format(e){var n;const t=(n=e.transactions)==null?void 0:n.map(r=>{var o;if(typeof r=="string")return r;const s=(o=ya.transaction)==null?void 0:o.format(r);return s.typeHex==="0x71"?s.type="eip712":s.typeHex==="0xff"&&(s.type="priority"),s});return{l1BatchNumber:e.l1BatchNumber?q(e.l1BatchNumber):null,l1BatchTimestamp:e.l1BatchTimestamp?q(e.l1BatchTimestamp):null,transactions:t}}}),transaction:Ri({format(e){const t={};return e.type==="0x71"?t.type="eip712":e.type==="0xff"&&(t.type="priority"),{...t,l1BatchNumber:e.l1BatchNumber?q(e.l1BatchNumber):null,l1BatchTxIndex:e.l1BatchTxIndex?q(e.l1BatchTxIndex):null}}}),transactionReceipt:hu({format(e){return{l1BatchNumber:e.l1BatchNumber?q(e.l1BatchNumber):null,l1BatchTxIndex:e.l1BatchTxIndex?q(e.l1BatchTxIndex):null,logs:e.logs.map(t=>({...ye(t),l1BatchNumber:t.l1BatchNumber?q(t.l1BatchNumber):null,transactionLogIndex:le(t.transactionLogIndex),logType:t.logType})),l2ToL1Logs:e.l2ToL1Logs.map(t=>({blockNumber:q(t.blockHash),blockHash:t.blockHash,l1BatchNumber:t.l1BatchNumber?q(t.l1BatchNumber):null,transactionIndex:q(t.transactionIndex),shardId:q(t.shardId),isService:t.isService,sender:t.sender,key:t.key,value:t.value,transactionHash:t.transactionHash,logIndex:q(t.logIndex)}))}}}),transactionRequest:Si({exclude:["customSignature","factoryDeps","gasPerPubdata","paymaster","paymasterInput"],format(e){return e.gasPerPubdata||e.paymaster&&e.paymasterInput||e.factoryDeps||e.customSignature?{eip712Meta:{...e.gasPerPubdata?{gasPerPubdata:k(e.gasPerPubdata)}:{gasPerPubdata:k(Hr)},...e.paymaster&&e.paymasterInput?{paymasterParams:{paymaster:e.paymaster,paymasterInput:Array.from(te(e.paymasterInput))}}:{},...e.factoryDeps?{factoryDeps:e.factoryDeps.map(t=>Array.from(te(t)))}:{},...e.customSignature?{customSignature:Array.from(te(e.customSignature))}:{}},type:"0x71"}:{}}})},Ef=e=>{ba(e);const t=Pf(e);return{domain:{name:"zkSync",version:"2",chainId:e.chainId},types:{Transaction:[{name:"txType",type:"uint256"},{name:"from",type:"uint256"},{name:"to",type:"uint256"},{name:"gasLimit",type:"uint256"},{name:"gasPerPubdataByteLimit",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymaster",type:"uint256"},{name:"nonce",type:"uint256"},{name:"value",type:"uint256"},{name:"data",type:"bytes"},{name:"factoryDeps",type:"bytes32[]"},{name:"paymasterInput",type:"bytes"}]},primaryType:"Transaction",message:t}};function Pf(e){const{gas:t,nonce:n,to:r,from:s,value:o,maxFeePerGas:a,maxPriorityFeePerGas:i,factoryDeps:c,paymaster:u,paymasterInput:l,gasPerPubdata:d,data:f}=e;return{txType:113n,from:BigInt(s),to:r?BigInt(r):0n,gasLimit:t??0n,gasPerPubdataByteLimit:d??Hr,maxFeePerGas:a??0n,maxPriorityFeePerGas:i??0n,paymaster:u?BigInt(u):0n,nonce:n?BigInt(n):0n,value:o??0n,data:f||"0x0",factoryDeps:(c==null?void 0:c.map(h=>k(wf(h))))??[],paymasterInput:l||"0x"}}const ga={formatters:ya,serializers:lf,custom:{getEip712Domain:Ef}},Df=qo({...ga,id:260,name:"ZKsync InMemory Node",network:"zksync-in-memory-node",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["http://localhost:8011"]}},testnet:!0}),Gf=qo({...ga,id:300,name:"ZKsync Sepolia Testnet",network:"zksync-sepolia-testnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.era.zksync.dev"],webSocket:["wss://sepolia.era.zksync.dev/ws"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia-era.zksync.network/",apiUrl:"https://api-sepolia-era.zksync.network/api"},native:{name:"ZKsync Explorer",url:"https://sepolia.explorer.zksync.io/",blockExplorerApi:"https://block-explorer-api.sepolia.zksync.dev/api"}},contracts:{multicall3:{address:"0xF9cda624FBC7e059355ce98a31693d299FACd963"},universalSignatureVerifier:{address:"0xfB688330379976DA81eB64Fe4BF50d7401763B9C",blockCreated:3855712}},testnet:!0});function jf(e){const{innerInput:t}=e,n=typeof t=="string"?t:V(t);return ue({abi:mf,functionName:"general",args:[n]})}async function Bf(e){const{contractAddress:t,chainId:n,nonce:r,privateKey:s,to:o="object"}=e,a=await Yt({hash:Ys({contractAddress:t,chainId:n,nonce:r}),privateKey:s,to:o});return o==="object"?{contractAddress:t,chainId:n,nonce:r,...a}:a}async function If({message:e,privateKey:t}){return await Yt({hash:Lr(e),privateKey:t,to:"hex"})}async function Af(e){const{privateKey:t,transaction:n,serializer:r=Jo}=e,s=n.type==="eip4844"?{...n,sidecars:!1}:n,o=await Yt({hash:Y(r(s)),privateKey:t});return r(n,o)}async function Tf(e){const{privateKey:t,...n}=e;return await Yt({hash:_o(n),privateKey:t,to:"hex"})}function qf(e,t={}){const{nonceManager:n}=t,r=k(Kt.getPublicKey(e.slice(2),!1)),s=Us(r);return{...df({address:s,nonceManager:n,async sign({hash:a}){return Yt({hash:a,privateKey:e,to:"hex"})},async experimental_signAuthorization(a){return Bf({...a,privateKey:e})},async signMessage({message:a}){return If({message:a,privateKey:e})},async signTransaction(a,{serializer:i}={}){return Af({privateKey:e,transaction:a,serializer:i})},async signTypedData(a){return Tf({...a,privateKey:e})}}),publicKey:r,source:"privateKey"}}export{Of as $,wf as A,v as B,bc as C,df as D,_o as E,ff as F,ue as G,Wc as H,Ot as I,ln as J,Ce as K,$r as L,ef as M,dt as N,sd as O,Ji as P,Lf as Q,It as R,kt as S,V as T,et as U,vr as V,cf as W,Df as X,qf as Y,Mf as Z,Rf as _,Iu as a,qo as a0,Ff as a1,Gf as a2,ga as a3,jf as a4,zf as b,ha as c,kf as d,ao as e,eo as f,Ls as g,Cf as h,Br as i,ld as j,ea as k,ud as l,pu as m,R as n,Or as o,Q as p,qt as q,Te as r,Nr as s,ie as t,Ve as u,jt as v,or as w,H as x,X as y,k as z};
